# 索引

由于此电子书版本没有固定的页码，下面的页码仅供参考，基于本书的印刷版。

A

访问日志 293

用于故障排除错误 293,-298

激活 67

适配器 242

聚合发现服务（ADS） 85

警报

与 Grafana 196-200

应用程序二进制接口（ABI） 248

应用程序网络 16

应用程序弹性 127

带故障注入 128

带负载均衡 141

带重试 138-141

带超时 135-137

应用网格 31

认证

与网格外客户端 162-164

带互联网 TLS（mTLS） 157

AWS 故障注入模拟器

参考链接 128

AWS WAF 304

Azure Web 应用程序防火墙 304

B

蓝/绿部署 25-28

引导配置 77

Buoyant 372

URL 372

C

金丝雀部署 25-28

资本支出（CAPEX） 7

证书颁发机构（CA） 113, 213, 330

证书签名请求（CSR） 113, 154, 163, 331

认证课程

参考文献 336

认证 Istio 管理员 336

证书管理器 216

混沌工程 128

参考链接 128

混沌猴

参考链接 128

Cilium 338

断路器 148

参考链接 76

断路器 24

带异常检测 148-150

无类域间路由（CIDR）块 213，379

Cloud Armor 304

云计算 3-5

优势 6-8

基础设施即服务（IaaS）5

平台即服务（PaaS）5

软件即服务（SaaS）5

云原生计算基金会（CNCF）30

云服务

社区云 6

混合云 6

私有云 6

公有云 5

集群 70

集群管理员 306

集群发现服务（CDS）84

CNAME

HTTPS，启用 119-121

商用现成产品（COTS）269

通用名称（CN）330

社区云 6

Conduit 372

配置生成器 68

Consul 31

Consul Connect 341

Consul 服务网格 341

示例应用程序，部署 345，346

Ingress 网关 354

安装 341-345

网格网关 354

服务发现链 348

终止网关 354

流量管理 348

卸载 355

零信任网络 346-348

容器 13

控制平面 58

控制理论 179

ControlZ 接口 287，288

计数器 188

自定义资源（CR）65

自定义资源定义（CRDs）64，244，306

D

数据平面 58

自定义，使用 Envoy 过滤器 244-247

数据平面代理（DPPs）359

调试日志 298

更改，针对 Istio 数据平面 299

用于故障排除错误 298

延迟 129

委托网关 371

参考链接 371

Delta 聚合发现服务（DxDS） 85

部署模型，针对 Istio 控制平面 70

主集群，带单一控制平面 71, 72

远程集群，带单一控制平面 71, 72

单集群，带外部控制平面 72, 73

单集群，带本地控制平面 71

目标网络地址转换（DNAT） 20

维度

添加，至 Istio 指标 189-191

分布式追踪 200

启用，使用 Jaeger 201-208

实现 200

Docker

参考链接 77

Docker Hub 259

动态配置

通过 xDS APIs 83

E

eBPF 程序 337

出站流量

管理，使用 Istio 121-125

EKS 集群

创建 90, 91

弹性容器服务（ECS） 31

弹性 Kubernetes 服务（EKS） 5, 90

端点发现服务（EDS） 84

企业资源规划（ERP） 5

环境

设置 90

Envoy 74, 189, 271

架构 74, 75

自动重试 75

电路断开 76

配置 75, 76

通过 xDS APIs 的动态配置 83-85

探索 73

可扩展性 85, 86

全局速率限制 76

HTTP 过滤器 76-82

监听器过滤器 82, 83

异常值检测 76

参考链接 74

请求对冲 76

流量镜像 76

Envoy 属性

参考链接 192

Envoy 虚拟应用

部署 226-228

用于部署 235

用于测试 236

Envoy，扩展以支持自定义用例

参考链接 242

EnvoyFilter 配置

参考链接 247

Envoy 过滤器

用于定制数据平面 244-247

编写，选项 85, 86

Envoy HTTP Lua 过滤器

参考链接 243

Envoy 端口

探索 288

端口 15000 288

端口 15001 288

端口 15004 288

端口 15006 288

端口 15020 288

端口 15021 288

端口 15053 288

端口 15090 288

Envoy, 线程

文件刷新线程 74

主线程 74

工作线程 74

错误 181

故障排除，使用访问日志 293-298

故障排除，使用调试日志 298

EWMA 算法 379

扩展伯克利数据包过滤器 (eBPF) 337

可扩展性

需求 242, 243

扩展配置发现服务 (ECDS) 84, 262

参考链接 262

F

F5 NGINX 服务网格 31, 32

故障注入 128

使用，用于应用程序弹性 128

故障注入，Istio

HTTP 中止 132-134

HTTP 延迟 129-132

联邦信息处理标准 (FIPS) 73

文件刷新线程 74

过滤链 74

fortio 工具

参考链接 146

完全限定域名 (FQDN) 115

G

仪表 188

全球 API 门户 356

Gloo Mesh 356

参考链接 356

Google Cloud

基础设施，设置 265-268

Google Kubernetes Engine 服务

使用 212

Grafana 56, 57, 194

报警功能 196-200

Istio 控制平面仪表盘 195

Istio Mesh 仪表盘 196

Istio 性能仪表盘 196

Istio 服务和工作负载仪表盘 196

遥测，可视化 194

gRPC 75

URL 83

H

HashiCorp Vault 271

六边形架构 9

直方图 189

Homebrew

用于 minikube 安装 32-35

HTTP 中止 132

注入 132-134

HTTP 延迟

注入 129-132

HTTP 过滤器 76-80

参考链接 82

HTTPInspector 监听器过滤器

参考链接 82

HTTP Lua 过滤器 243

HTTP 重定向

启用，至 HTTPS 116, 117

HTTPS

启用，针对 CNAME 119-121

启用，针对多个主机 117-119

启用，针对通配符记录 119-121

HTTP 重定向，启用至 116, 117

Ingress，暴露至 113-116

混合架构

检查 268-270

服务网格，设置 270

混合云 6

HyperKit 35

I

基础设施即服务（IaaS） 4, 5

Ingress

暴露，通过 HTTPS 113-116

Ingress 网关 354

参考链接 354

Ingress 流量

管理，与 Kubernetes Ingress 资源 93-100

Ingress，使用 Istio 网关

创建 100, 101

管理 100

虚拟服务，创建 101-104

指令集架构（ISA） 247

IP 虚拟服务器（IPVS） 23

Isovalent

URL 338

Istio 30

架构 57, 58

认证资源 336

下载链接 35

启用，针对示例应用 38-40

故障注入 128

安装 35-38

学习资源 336

Sidecar 注入 40-45

URL 336

用于管理 Egress 流量 121-125

Istio 代理 69

调试 301, 302

Istio，替代方案

App Mesh 31

Consul 31

F5 NGINX 服务网格 31, 32

Kuma 30

Linkerd 30

Red Hat OpenShift 服务网格 31

Istio 证书授权（CA） 64

Istio 社区

参考链接 336

Istio 组件

交互 286

IstioCon

参考链接 336

IstioCon 2022

参考链接 336

Istio 配置

分析 288-293

检查 288-293

Istio 配置，用于管理应用弹性

流量控制，配置 328，329

超时和重试，配置 326，327

Istio 配置，用于管理应用流量

访问外部服务，配置 325，326

DestinationRule，配置 323-325

Istio Ingress 网关，配置 321，322

VirtualService，配置 322，323

Istio 控制平面

通信，建立 72

组件，探索 61，62

部署模型 70

最终用户上下文传播 65

身份目录和注册表 65

Istio 节点代理 64

sidecar 注入 64

Istio 控制平面仪表盘 195

istioctl 65-68

istiod 62，63

API 验证 64

配置监视 64

Istio 证书授权 64

Istio 数据平面

调试日志，变更 299

Envoy，探索 73

扩展，使用 Wasm 251-263

日志级别，变更 299-301

istiod 端口

探索 286

端口 9876 287

端口 15010 287

端口 15012 287

端口 15014 286

端口 15017 286

Istio Ingress 网关

使用 46-51

Istio 安装

工作站，准备 32

Istio 指标

创建 192-194

自定义 187-189

维度 188

维度，添加到 189-191

名称 188

值 188

Istio 操作符 65-68

IstioOperator 65

卸载 68

IstioOperatorSpec 65

Istio 性能仪表盘 196

Istio 的最佳实践 303

攻击向量，检查控制平面 303

攻击向量，检查数据平面 303, 304

自动化，使用 OPA Gatekeeper 306-314

参考链接 305

服务网格，保障安全 304, 305

Istio 安全架构 153-156

Istio 服务和工作负载仪表盘 196

Istio 工作负载组 271

J

Jaeger 54, 55, 201

分布式追踪，启用 201-208

特性 201

安装 201

Java 虚拟机 (JVM) 372

即时编译 (JIT) 步骤 337

K

Kiali 52-54

Kong Inc. 271

kubeconfig

设置 92

kubectl 17, 33

设置 92

kube-proxy 17

Kubernetes 入驻控制器 42

Kubernetes 集群

额外的 Google Cloud 步骤 213, 214

设置 212

Kubernetes 命令行工具

安装 32-35

Kubernetes 凭证 271

Kubernetes CSR API 216

Kubernetes Ingress 资源

用于管理 Ingress 流量 93-100

Kubernetes (K8S) 12-15, 30

优势 14

Kuma 30，357

curl，部署 359-362

仪表盘 358

envoydemo，部署 359-362

安装 357，358

参考链接，针对策略 366

TrafficRoute 策略 363

流量路由 363-371

卸载 371

L

延迟 181

学习资源

参考 336

LEAST_REQUEST 负载均衡策略 143，144

Linkerd 30，372

curl，部署 374，375

envoydemo，部署 374，375

安装 372-374

零信任网络 375-380

Linkerd2-proxy 31，372

linkerd-proxy

参考链接 375

Linkerd v2 372

监听器发现服务（LDS） 84

监听器过滤器 82，83

监听 74

Litmus

参考链接 128

负载均衡 141

用于构建应用程序弹性 141

负载均衡策略，Istio

LEAST_REQUEST 143，144

RANDOM 142

轮询 141，142

日志级别

更改，针对 Istio 数据平面 299-301

日志 180

Lua 过滤器 85，242

M

主线程 74

Mesh 配置协议（MCP） 64

MeshGatewayInstance 367，368

MeshGatewayRoute 368，369

网格网关 354

参考链接 354

度量维度 185

度量 180

度量抓取

与 Prometheus 一起使用 181

微服务架构 8-12

中间件即服务（MWaaS） 15

minikube 17, 32

安装，使用 Homebrew 32-35

镜像服务 109

Mixer 242

参考链接 242

模型-视图-控制器（MVC） 9

ModHeader 扩展 323

监控

黄金信号 181

单体架构 8

多集群部署

CA 外部，至 Istio 216

相互信任，建立 215

插件 CA 证书 215

多个负载均衡规则

定义 144, 145

多主设置

在不同网络上 232-235

在同一网络上 236-239

修改 Webhook 64

相互 TLS（mTLS） 157

宽容模式 157

严格模式 157

使用，用于身份验证 157

使用，设置服务到服务的通信 158-162

N

原生 C++ 过滤器 85

O

OAuth 2.0 授权框架

参考链接 164

可观察性 179

在控制理论中 179

在线书店应用程序

核心模块 9

在线精品应用示例

Istio 配置，用于管理应用程序弹性 326

Istio 配置，用于管理应用程序安全性 329-335

Istio 配置，用于管理流量 321

服务网格，使能 319-321

Open Policy Agent (OPA) Gatekeeper 306

最佳实践，自动化使用 306-314

设置 306

卸载 314

工作负载部署最佳实践，通过 317, 318 强制执行

开源软件 (OSS) 26

OpenSSL

设置 213

操作费用 (OPEX) 7

操作字段

参数 176

异常检测 148

OWASP

URL 304

P

pilot-agent 69

平台即服务 (PaaS) 4, 5

Pod 13

Pod 连接性 272

主集群 71

单一控制平面 71, 72

主-远程配置

在多网络上 217

在同一网络上 228-232

信任，在集群之间建立 217-226

私有云 6

Prometheus 55, 181

安装 182

示例应用，部署 183-187

用于指标抓取 181

PromQL 181

协议缓冲区 83

参考链接 83

Proxy-Wasm 251

Proxy-Wasm ABI 251-253

Proxy-Wasm SDK 254-258

公有云 5

R

随机负载均衡策略 142

流量限制 145

示例 146-148

Red Hat OpenShift 服务网格 31

Rego 307

参考链接 307

远程集群 71

单一控制平面 71, 72

渲染器 68

RequestAuthentication 策略

配置 164-176

请求对冲

参考链接 76

资源管理器 68

重试 135，138

用于应用程序弹性 138-141

微服务中的重试模式

参考链接 75

基于角色的访问控制（RBAC）策略 305

根跨度 204

循环轮询 141，142

路由发现服务（RDS）84

运行时发现服务（RTDS）85

S

饱和度 181

范围路由发现服务（SRDS）84

范围 299

抓取 181

SDS 客户端 69

SDS 服务器 69

秘密发现服务（SDS）69，84

安全命名 155

为每个人提供的安全生产身份框架（SPIFFE）154

服务器名称指示（SNI）114

服务账户 155

参考链接 155

服务发现链，Consul

解析 354，355

路由 348-351

分割 351-354

服务网格 3，15-24

蓝绿部署 25-28

金丝雀部署 25-28

电路断路 24

截止日期 24

重试机制 24

超时 24

服务网格接口（SMI）379

服务网格设置，用于混合架构

演示应用程序，在虚拟机上设置 273

Istio，在集群中设置 274，275

Istio，在虚拟机上设置 277-279

Kubernetes 集群，配置 275-277

概述 271，272

虚拟机工作负载，集成到网格中 280-282

ServiceRouter 配置 349, 350

服务到服务认证 157

服务到服务通信

设置，使用 mTLS 158-162

侧车注入 40-45

单一集群

使用外部控制平面 72, 73

使用本地控制平面 71

网站可靠性工程师 (SREs) 180

Sockshop 应用

部署 92

软件即服务 (SaaS) 4, 5

软件开发工具包 (SDKs) 251

Solo.io 271

源配置

字段 173, 174

跨度 204

Spifee 可验证身份文档 (SVID) 64

StackOverflow

参考链接 336

步骤 CLI

安装链接 154

主体备用名称 (SAN) 154

T

遥测

数据 180

可视化，使用 Grafana 194

终止网关 354

参考链接 354

Tetrate

URL 336

Tetrate Academy 336

超时 134-138

应用程序弹性 135-137

TinyGo，用于主机操作系统

安装链接 256

跟踪 180, 204

流量 181

基于金丝雀发布 104-109

路由 104-109

路由到集群外部的服务 111-113

流量镜像 109-111

参考链接 76

TrafficRoute 策略 363

参考链接 366

流量影像 109

翻译器 68

U

Unix 域套接字（UDS）69

V

验证 Webhook 64

验证器 67

虚拟主机发现服务（VHDS）84

虚拟服务

创建 101-104

W

Wasm 二进制工具包（WABT）258

Wasm 过滤器 86

Wasm 用于代理 251

WasmPlugin API 259

Wasm (原型)

参考链接 253

Web 应用防火墙（WAF）304

WebAssembly 核心规范

参考链接 251

WebAssembly Hub

参考链接 356

WebAssembly（Wasm）85，241

基础知识 247

概览 248

示例应用程序，用于将小写字母转换为大写 248-250

选择，构建扩展的理由 247，248

用于扩展 Istio 数据平面 251-263

WebAssembly 工作组

URL 251

通配符记录

启用 HTTPS 119-121

工作线程 74

工作负载部署最佳实践

强制执行，使用 OPA Gatekeeper 317，318

WorkloadEntry 279

配置 279

WorkloadGroup 277

配置 277

工作站，供 Istio 安装使用

Kubernetes 命令行工具，安装 32-35

minikube，使用 Homebrew 安装 32-35

准备工作 32

系统规格 32

万维网联盟（W3C）251

X

xDS API

实现 75, 83

![Logo 描述自动生成](img/Packt_Logo_New1.png)

[Packtpub.com](http://Packtpub.com)

订阅我们的在线数字图书馆，全面访问超过 7,000 本书籍和视频，以及行业领先的工具，帮助您规划个人发展并推动职业生涯发展。欲了解更多信息，请访问我们的网站。

# 为什么订阅？

+   利用来自超过 4000 名行业专业人士的实用电子书和视频，减少学习时间，多花时间编程

+   提升你的学习效果，使用特别为你打造的技能计划

+   每月获取一本免费电子书或视频

+   完全可搜索，方便获取重要信息

+   复制粘贴、打印和书签内容

你知道吗，Packt 提供每本书的电子书版本，PDF 和 ePub 文件都可以获取？你可以在 [packtpub.com](http://packtpub.com) 升级为电子书版本，作为印刷书籍的购买者，你还可以享受电子书副本的折扣。详情请联系我们：[customercare@packtpub.com](http://customercare@packtpub.com)。

在 [www.packtpub.com](http://www.packtpub.com)，你还可以阅读一系列免费的技术文章，注册各种免费的新闻通讯，并享受 Packt 书籍和电子书的独家折扣与优惠。

# 你可能会喜欢的其他书籍

如果你喜欢本书，可能会对 Packt 出版的其他书籍感兴趣：

![](https://packt.link/9781803232850)

**Kubernetes 运维工具框架书**

迈克尔·戴姆

ISBN: 978-1-80323-285-0

+   深入了解 Operator Framework 和运维工具的好处

+   实施设计运维工具的标准方法

+   使用 Operator SDK 以逐步方式开发运维工具

+   使用 OperatorHub.io 等分发选项发布运维工具

+   使用不同的 Operator 生命周期管理选项部署运维工具

+   发现 Kubernetes 开发标准如何与运维工具相关

+   运用从真实世界运维工具案例研究中学到的知识

![](https://packt.link/9781801818964)

**学习 DevOps - 第二版**

米卡埃尔·克里夫

ISBN: 978-1-80181-896-4

+   理解基础的基础设施即代码模式与实践

+   了解 Git 命令和 Git 流的概览

+   安装并编写 Packer、Terraform 和 Ansible 代码，以根据 Azure 示例进行云基础设施的配置和预配

+   使用 Vagrant 创建本地开发环境

+   使用 Docker 和 Kubernetes 容器化应用程序

+   应用 DevSecOps 进行合规性测试和保护 DevOps 基础设施

+   使用 Jenkins、Azure Pipelines 和 GitLab CI 构建 DevOps CI/CD 管道

+   探索蓝绿部署和 DevOps 实践，适用于开源项目

# Packt 正在寻找像你这样的作者

如果你有兴趣成为 Packt 的作者，请访问 [authors.packtpub.com](http://authors.packtpub.com) 并立即申请。我们与成千上万的开发者和技术专家合作，帮助他们与全球技术社区分享他们的见解。你可以进行一般申请，申请我们正在招募作者的特定热门话题，或提交你自己的创意。

# 分享你的想法

现在您已经完成了*《用 Istio 构建服务网格》*，我们非常希望听到您的想法！如果您是从亚马逊购买的这本书，[请点击这里直接跳转到该书的亚马逊评价页面并分享您的反馈](https://packt.link/r/1803246812)，或者在您购买的站点留下评论。

您的评论对我们和技术社区非常重要，它将帮助我们确保提供优质的内容。

# 下载本书的免费 PDF 版本

感谢您购买本书！

您喜欢随时随地阅读，但无法将纸质书籍随身携带吗？

您购买的电子书与您选择的设备不兼容吗？

不用担心，现在购买每本 Packt 书籍时，您都会免费获得该书的无 DRM 版 PDF。

在任何地方、任何设备上阅读。直接将您最喜欢的技术书籍中的代码搜索、复制并粘贴到您的应用程序中。

福利不仅仅是这些，您还可以获得独家的折扣、新闻通讯以及每天发送到您邮箱的精彩免费内容。

请按照以下简单步骤获取福利：

1.  扫描二维码或访问以下链接

![](img/B17989_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803246819`](https://packt.link/free-ebook/9781803246819)

1.  提交您的购买证明

1.  就这些！我们会将您的免费 PDF 和其他福利直接发送到您的电子邮箱。
