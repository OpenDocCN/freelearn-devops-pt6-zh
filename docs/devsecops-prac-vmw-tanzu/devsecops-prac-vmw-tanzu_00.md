# 前言

以容器打包的微服务形式运行业务应用程序已成为当今的常态。根据云原生计算基金会在 2021 年进行的一项调查（[`www.cncf.io/reports/cncf-annual-survey-2021/`](https://www.cncf.io/reports/cncf-annual-survey-2021/)），约 80%的应用程序都部署在 Kubernetes 上。然而，构建容器化应用程序和生产级 Kubernetes 平台是一些难以攻克的难题。此外，企业考虑到多云部署策略，这为不同的原因增加了更多的操作复杂性。在本书中，我们将学习 VMware Tanzu 产品组合中的不同工具如何协同解决在多云 Kubernetes 平台上构建、运行和管理现代应用的挑战。

我们将本书分为三个逻辑部分，符合应用开发生命周期。在第一部分中，我们将回顾帮助构建安全应用的不同工具。在这一部分中，我们还将展示如何将这些应用容器化并管理它们暴露的 API。在第二部分中，我们将深入探讨帮助大规模运行这些应用的工具。我们将涵盖帮助管理容器镜像和在多云环境中部署 Kubernetes 平台的工具。本节还介绍了如何通过供应链编排部署安全的生产路径。最后一部分将讲解如何管理大规模的 Kubernetes 部署。本节涵盖了监控、安全性和治理多云部署的统一视图。

本书的每一章都涵盖了现代应用生命周期中的一个方面，以及与该方面相关的 Tanzu 工具。这些章节首先描述了业务案例及其适用的挑战——工具背后的*为什么*。然后，它们提供了适用于工具的高层次细节——工具背后的*什么*。最后，它们讲解了如何开始使用这些工具——工具背后的*如何*。

到本书结束时，你将深入理解 Tanzu 平台及其能力，能够将 DevSecOps 实践应用于你的现代容器化应用。

# 本书适合人群

本书适合任何想了解 VMware Tanzu 的人。读者将了解该平台解决的不同安全性、操作性和开发人员生产力的挑战。本书的目的是从学习的角度深入理解这项技术。它还旨在帮助读者在不同工具上执行基本的 Day-1 和 Day-2 操作，获取实践经验。如果你是**云或应用程序架构师**，本书将帮助你理解这些工具所提供的各种功能，以决定如何或是否将其包含在你的解决方案中。如果你是**开发人员**或**开发负责人**，你将学习如何通过不同方式提高开发人员的生产力。如果你是**安全官员**，你将找到更好的方法来确保你的云原生应用程序和 Kubernetes 平台的安全性。最后，如果你是**DevOps 工程师**或**云平台操作员**，你将学会如何围绕这些产品进行各种操作。

本书适合有几年构建和运行现代应用程序经验的人阅读和理解。然而，具有 Kubernetes 经验将有助于更好地理解相关概念和挑战。此外，读者应该有一定的**命令行接口**（**CLI**）使用经验，以便跟随所有的实践指导。

# 本书涵盖的内容

*第一章*，*理解迁移到云平台的必要性*，为读者提供现代应用程序的背景和相关背景知识。

*第二章*，*开发云原生应用程序*，解释如何使用预定义的应用程序模板，包含所需的框架和模板代码，来开发安全的云原生应用程序。

*第三章*，*使用构建服务构建安全的容器镜像*，指导读者如何从应用程序代码或工件中，以完全自动化的方式构建安全的容器镜像。

*第四章*，*为应用程序配置支持服务*，详细说明如何构建流行的开源工具目录，以便将其安全的容器镜像作为应用程序后端服务使用。

*第五章*，*定义和管理业务 API*，讲述如何构建和管理安全的应用程序 API。

*第六章*，*使用 Harbor 管理容器镜像*，提供了如何使用私有容器镜像注册表存储和管理容器镜像的指导。

*第七章*，*使用 Tanzu Kubernetes Grid 在云之间编排容器*，详细讲解了多云 Kubernetes 平台的细节。

*第八章*，*通过 Tanzu 应用平台提升开发者生产力*，详细介绍了如何建立一个安全的应用供应链，以实现快速的生产路径。

*第九章*，*使用 Tanzu Mission Control 管理和控制 Kubernetes 集群*，教会读者如何在多云环境中集中管理部署的各种 Kubernetes 集群。

*第十章*，*通过 VMware Aria 应用程序操作实现全栈可视化*，演示了如何监控多云环境中部署的应用程序、它们的 Kubernetes 平台和基础设施。

*第十一章*，*通过 Tanzu 服务网格实现安全的微服务间通信*，探讨了如何在多云/多集群环境中，为部署在 Kubernetes 上的微服务建立安全的通信。

*第十二章*，*综合应用*，总结了技术领域的端到端概况，并对相关技术的未来发展进行了预测。

# 充分利用本书

本书的入门门槛非常低。任何具有应用程序开发和/或基础设施运维经验的人都可以使用本书学习 Tanzu 平台的相关内容。然而，读者如果对 Kubernetes 和容器化应用程序有所了解，将能从本书中获得更多收获。为了遵循书中的动手操作，读者还应熟悉 CLI 命令。

| **本书涵盖的** **软件/硬件** | **操作系统** **要求** |
| --- | --- |
| Tanzu 应用加速器 | Windows, macOS 或 Linux |
| Tanzu 构建服务 |  |
| VMware 应用目录 |  |
| VMware Tanzu 的 API 门户 |  |
| Spring Cloud Gateway |  |
| Harbor |  |
| Tanzu Kubernetes Grid |  |
| Tanzu 应用平台 |  |
| Tanzu Mission Control |  |
| VMware Aria 应用程序操作 |  |
| Tanzu 服务网格 |  |

本书中的逐步指导是在 macOS 系统上执行的。然而，大部分指令在 Linux 或 Windows 系统上也能无修改地工作。

**如果您使用的是本书的数字版，我们建议您自己输入代码，或从本书的 GitHub 仓库访问代码（链接在下一节提供）。这样做可以帮助您避免因复制和粘贴代码而可能出现的错误。**

本书中有一些地方使用了示例应用程序和 Kubernetes 配置。读者可以通过以下章节提供的 GitHub 仓库下载这些内容。

# 下载示例代码文件

你可以从 GitHub 下载本书的示例代码文件，网址为[`github.com/PacktPublishing/DevSecOps-in-Practice-with-VMware-Tanzu`](https://github.com/PacktPublishing/DevSecOps-in-Practice-with-VMware-Tanzu)。如果代码有更新，它会在 GitHub 仓库中进行更新。

我们还有其他代码包，可以从我们丰富的书籍和视频目录中找到，访问[`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。快来看看吧！

# 下载彩色图片

我们还提供了一份包含书中截图和图表的彩色 PDF 文件，你可以在此下载：[`packt.link/xL5cm`](https://packt.link/xL5cm)。

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`：表示文本中的代码字、数据库表名、文件夹名称、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 账号。例如：“从那里，你可以按照`README.md`中的说明，在线下运行应用程序并将其部署到 Kubernetes。”

一段代码会按照如下格式显示：

```
$ kubectl port-forward -n kubeapps svc/kubeapps 8080:80
Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
```

当我们希望引起你对代码块中特定部分的注意时，相关的行或项会以粗体显示：

```
$ chmod +x gradlew && ./gradlew openApiGenerate  # (this will create a maven project in-place, use gradlew.bat on Windows)
...
$ mvn spring-boot:run
```

任何命令行输入或输出都会按如下方式书写：

```
kubectl apply -f ./accelerator-k8s-resource.yaml
```

**粗体**：表示一个新术语、重要词汇或在屏幕上看到的词汇。例如，菜单或对话框中的词汇会以**粗体**显示。比如：“在 TAP GUI 的**创建**页面上，我们点击**选择**按钮，位于**Hello** **Fun** 加速器下方。”

提示或重要说明

以这样的形式出现。

# 联系我们

我们欢迎读者的反馈。

`customercare@packtpub.com`并在邮件主题中注明书名。

**勘误表**：虽然我们已尽最大努力确保内容的准确性，但错误难免发生。如果你在本书中发现错误，我们将非常感激你向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表格。

`copyright@packt.com`并附上链接到相关材料。

**如果你有兴趣成为作者**：如果你在某个主题方面有专业知识，并有兴趣写书或为书籍做贡献，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

阅读完《DevSecOps in Practice with VMware Tanzu》后，我们非常希望听到你的反馈！请点击此处直接前往 Amazon 评论页面并分享你的想法。

你的评论对我们以及技术社区都非常重要，帮助我们确保提供优质的内容。

# 下载本书的免费 PDF 版本

感谢购买本书！

你喜欢在旅途中阅读，但又无法随身携带纸质书籍吗？

你的电子书购买是否与您选择的设备不兼容？

别担心，现在购买每本 Packt 图书，你都可以免费获得该书的无 DRM PDF 版本。

在任何地方、任何设备上都可以阅读。搜索、复制并将你最喜欢的技术书籍中的代码直接粘贴到你的应用程序中。

优惠不仅仅如此，你还可以独家获得折扣、新闻通讯，并且每天将有精彩的免费内容发送到你的邮箱

按照以下简单步骤即可享受优惠：

1.  扫描二维码或访问以下链接！[](img/B18145_QR_Free_PDF.jpg)

[`packt.link/free-ebook/9781803241340`](https://packt.link/free-ebook/9781803241340)

1.  提交你的购买证明

1.  就这些！我们会直接将你的免费 PDF 和其他福利发送到你的电子邮件

# 第一部分 – 在 Tanzu 平台上构建云原生应用程序

本部分包含了不同的 Tanzu 工具的详细信息，这些工具对于提高开发者的生产力和软件供应链的安全性，在云原生应用程序开发中非常有用。

本书的这一部分包括以下章节：

+   *第一章*，*理解迁移到云平台的必要性*

+   *第二章*，*开发云原生应用程序*

+   *第三章*，*使用构建服务构建安全的容器镜像*

+   *第四章*，*为应用程序提供后端服务*

+   *第五章*，*定义和管理业务 API*
