- en: 2\. Getting started with Azure Kubernetes Service
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. 开始使用Azure Kubernetes Service
- en: Installing and maintaining Kubernetes clusters correctly and securely is difficult.
    Thankfully, all the major cloud providers, such as **Azure**, **Amazon Web Services**
    (**AWS**), and **Google Cloud Platform** (**GCP**), facilitate installing and
    maintaining clusters. In this chapter, you will navigate through the Azure portal,
    launch your own cluster, and run a sample application. You will accomplish all
    of this from your browser.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 正确、安全地安装和维护Kubernetes集群是困难的。幸运的是，所有主要的云服务提供商，如**Azure**、**Amazon Web Services**（**AWS**）和**Google
    Cloud Platform**（**GCP**），都提供了安装和维护集群的支持。在本章中，您将通过Azure门户导航，启动自己的集群并运行示例应用程序。所有这些操作都将在您的浏览器中完成。
- en: 'The following topics will be covered in this chapter:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Creating a new Azure free account
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建一个新的Azure免费帐户
- en: Creating and launching your first cluster
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建并启动您的第一个集群
- en: Deploying and inspecting your first demo application
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署并检查您的第一个示范应用程序
- en: Let's start by looking at different ways to create an **Azure Kubernetes Service**
    (**AKS**) cluster, and then we will run our sample application.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先来看看创建**Azure Kubernetes Service**（**AKS**）集群的不同方式，然后运行我们的示例应用程序。
- en: Different ways to create an AKS cluster
  id: totrans-7
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建AKS集群的不同方式
- en: 'In this chapter, you will use the Azure portal to deploy your AKS cluster.
    There are, however, multiple ways to create an AKS cluster:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将使用Azure门户来部署AKS集群。然而，也有多种方式可以创建AKS集群：
- en: '**Using the portal**: The portal offers a **graphical user interface** (**GUI**)
    for deploying your cluster through a wizard. This is a great way to deploy your
    first cluster. For multiple deployments or automated deployments, one of the following
    methods is recommended.'
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用门户**：门户提供了一个**图形用户界面**（**GUI**），通过向导部署您的集群。这是部署第一个集群的好方法。对于多个部署或自动化部署，推荐使用以下方法之一。'
- en: '**Using the Azure CLI**: The Azure **command-line interface** (**CLI**) is
    a cross-platform CLI for managing Azure resources. This allows you to script your
    cluster deployment, which can be integrated into other scripts.'
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Azure CLI**：Azure **命令行界面**（**CLI**）是一个跨平台的CLI工具，用于管理Azure资源。它允许您脚本化集群部署，并且可以集成到其他脚本中。'
- en: '**Using Azure PowerShell**: Azure PowerShell is a set of PowerShell commands
    used for managing Azure resources directly from PowerShell. It can also be used
    to create Kubernetes clusters.'
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Azure PowerShell**：Azure PowerShell是一组PowerShell命令，用于直接从PowerShell管理Azure资源。它也可以用来创建Kubernetes集群。'
- en: '**Using ARM templates**: **Azure Resource Manager** (**ARM**) templates are
    an Azure-native way to deploy Azure resources using **Infrastructure as Code** (**IaC**).
    You can declaratively deploy your cluster, allowing you to create a template that
    can be reused by multiple teams.'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用ARM模板**：**Azure资源管理器**（**ARM**）模板是Azure原生的一种部署Azure资源的方法，使用**基础设施即代码**（**IaC**）。您可以声明式地部署集群，允许您创建一个模板，供多个团队重用。'
- en: '**Using Terraform for Azure**: Terraform is an open-source IaC tool developed
    by HashiCorp. The tool is very popular in the open-source community for deploying
    cloud resources, including AKS. Like ARM templates, Terraform also uses declarative
    templates for your cluster.'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用Terraform for Azure**：Terraform是由HashiCorp开发的开源IaC工具。该工具在开源社区中非常受欢迎，用于部署云资源，包括AKS。与ARM模板一样，Terraform也使用声明式模板来部署集群。'
- en: In this chapter, you will create your cluster using the Azure portal. If you
    are interested in deploying a cluster using either CLI, ARM templates, or Terraform,
    the following Azure documentation contains steps on how to use these tools to
    create your own clusters [https://docs.microsoft.com/azure/aks](https://docs.microsoft.com/azure/aks).
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，您将使用Azure门户创建集群。如果您有兴趣通过CLI、ARM模板或Terraform部署集群，以下的Azure文档包含了如何使用这些工具创建集群的步骤
    [https://docs.microsoft.com/azure/aks](https://docs.microsoft.com/azure/aks)。
- en: Getting started with the Azure portal
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 开始使用Azure门户
- en: We will start our initial cluster deployment using the Azure portal. The Azure
    portal is a web-based management console. It allows you to build, manage, and
    monitor all your Azure deployments worldwide through a single console.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从使用Azure门户开始部署初始集群。Azure门户是一个基于Web的管理控制台。它允许您通过单一控制台在全球范围内构建、管理和监控所有Azure部署。
- en: Note
  id: totrans-17
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: To follow along with the examples in this book, you will need an Azure account.
    If you don't have an Azure account, you can create a free account by following
    the steps at [azure.microsoft.com/free](http://azure.microsoft.com/free). If you
    plan to run this in an existing subscription, you will need owner rights to the
    subscription and the ability to create service principals in **Azure Active Directory** (**Azure
    AD**).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 为了跟随本书中的示例，你需要一个 Azure 账户。如果你没有 Azure 账户，可以按照 [azure.microsoft.com/free](http://azure.microsoft.com/free)
    上的步骤创建一个免费账户。如果你打算在现有订阅中运行此内容，你需要订阅的所有者权限并能够在 **Azure Active Directory** (**Azure
    AD**) 中创建服务主体。
- en: All the examples in this book have been verified with a free trial account.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的所有示例都已在免费试用账户上验证。
- en: We are going to jump straight in by creating our AKS cluster. By doing so, we
    are also going to familiarize ourselves with the Azure portal.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将直接开始创建我们的 AKS 集群。通过这样做，我们也将熟悉 Azure 门户。
- en: Creating your first AKS cluster
  id: totrans-21
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 创建你的第一个 AKS 集群
- en: 'To start, browse to the Azure portal on [https://portal.azure.com](https://portal.azure.com).
    Enter the keyword `aks` in the search bar at the top of the Azure portal. Click
    on Kubernetes services under the Services category in the search results:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，浏览到 Azure 门户 [https://portal.azure.com](https://portal.azure.com)。在 Azure
    门户顶部的搜索栏中输入关键词 `aks`。在搜索结果中点击服务类别下的 Kubernetes 服务：
- en: '![Searching for AKS using the Azure portal search bar](img/B17338_02_01.jpg)'
  id: totrans-23
  prefs: []
  type: TYPE_IMG
  zh: '![通过 Azure 门户搜索栏搜索 AKS](img/B17338_02_01.jpg)'
- en: 'Figure 2.1: Searching for AKS with the search bar'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.1：使用搜索栏搜索 AKS
- en: 'This will take you to the AKS pane in the portal. As you might have expected,
    you don''t have any clusters yet. Go ahead and create a new cluster by hitting
    the + Add button, and select the + Add Kubernetes cluster option:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你进入门户中的 AKS 面板。正如你可能预料的那样，你还没有任何集群。继续点击 + 添加 按钮，并选择 + 添加 Kubernetes 集群选项：
- en: '![Clicking the Add button and the Add Kubernetes cluster button to start the
    cluster creation process](img/B17338_02_02.jpg)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![点击添加按钮和添加 Kubernetes 集群按钮以开始集群创建过程](img/B17338_02_02.jpg)'
- en: 'Figure 2.2: Clicking the + Add button and the + Add Kubernetes cluster button
    to start the cluster creation process'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.2：点击 + 添加 按钮和 + 添加 Kubernetes 集群按钮以开始集群创建过程
- en: Note
  id: totrans-28
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: There are a lot of options to configure when you're creating an AKS cluster.
    For your first cluster, we recommend sticking with the defaults from the portal
    and following our naming guidelines during this example. The following settings
    were tested by us to work reliably with a free account.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建 AKS 集群时，有很多选项可以配置。对于第一次创建集群，我们建议使用门户中的默认设置，并在本示例中遵循我们的命名规范。以下设置已经过我们测试，适用于免费账户。
- en: 'This will take you to the creation wizard to create your first AKS cluster.
    The first step here is to create a new resource group. Click Create new, give
    your resource group a name, and hit OK. If you want to follow along with the examples
    in this book, please name the resource group `rg-handsonaks`:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 这将带你进入创建向导，开始创建你的第一个 AKS 集群。这里的第一步是创建一个新的资源组。点击创建新建，给你的资源组命名，然后点击 OK。如果你想跟随本书中的示例，请将资源组命名为
    `rg-handsonaks`：
- en: '![Providing essential information for creating a new resource group](img/B17338_02_03.jpg)'
  id: totrans-31
  prefs: []
  type: TYPE_IMG
  zh: '![提供创建新资源组的必要信息](img/B17338_02_03.jpg)'
- en: 'Figure 2.3: Creating a new resource group'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.3：创建新资源组
- en: Next up, we'll provide the cluster details. Give your cluster a name—if you
    want to follow the examples in the book, please call it `handsonaks`. The region
    we will use in the book is `(US) West US 2`, but you could use any other region
    of choice close to your location. If the region you selected supports Availability
    Zones, unselect all the zones.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将提供集群的详细信息。给你的集群命名——如果你想跟随书中的示例，请将其命名为 `handsonaks`。我们将在书中使用的区域是 `（US）West
    US 2`，但你可以选择任何靠近你位置的其他区域。如果你选择的区域支持可用性区域，请取消选择所有区域。
- en: 'Select a Kubernetes version—at the time of writing, version 1.19.6 is the latest
    version that is supported; don''t worry if that specific version is not available
    for you. Kubernetes and AKS evolve very quickly, and new versions are introduced
    often:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 选择 Kubernetes 版本——截至写作时，版本 1.19.6 是最新的受支持版本；如果该版本对你不可用，也无需担心。Kubernetes 和 AKS
    发展非常迅速，经常会推出新版本：
- en: Note
  id: totrans-35
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: For production environments, deploying a cluster in an Availability Zone is
    recommended. However, since we are deploying a small cluster, not using Availability
    Zones works best for the examples in the book.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 对于生产环境，建议在可用区中部署集群。然而，由于我们正在部署一个小型集群，不使用可用区对于本书中的示例来说是最合适的。
- en: '![Entering the cluster name and selecting a region and Kubernetes version](img/B17338_02_04.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![输入集群名称并选择区域和Kubernetes版本](img/B17338_02_04.jpg)'
- en: 'Figure 2.4: Providing the cluster details'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.4：提供集群详细信息
- en: 'Next, change the node count to 2\. For the purposes of the demo in this book,
    the default `Standard DS2 v2` node size is sufficient. This should make your cluster
    size look similar to that shown in *Figure 2.5*:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，将节点数量更改为2。为了本书中的演示，默认的`Standard DS2 v2`节点大小足够。这将使您的集群大小类似于*图2.5*所示的样子：
- en: '![Updating the node count to 2 and verifying the Standard DS2 v2 machine size](img/B17338_02_05.jpg)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![将节点数量更新为2并验证Standard DS2 v2机器大小](img/B17338_02_05.jpg)'
- en: 'Figure 2.5: Updated Node size and Node count'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.5：更新的节点大小和节点数量
- en: Note
  id: totrans-42
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Your free account has a four-core limit that will be breached if you go with
    the defaults.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 您的免费帐户有四核限制，如果使用默认配置，将会超过限制。
- en: 'The final view of the first pane should look like *Figure 2.6*. There are a
    number of configuration panes, which you need not change for the demo cluster
    we''ll that you''ll use throughout this book. Since you are ready, hit the Review
    + create button to do a final review and create your cluster:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 第一个窗格的最终视图应类似于*图2.6*。有多个配置窗格，您无需为本书中将使用的演示集群更改这些配置。既然您已准备好，点击“审核+创建”按钮进行最终审核并创建您的集群：
- en: '![The final view of all the configurations under the Basics tab](img/B17338_02_06.jpg)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![基础选项卡下所有配置的最终视图](img/B17338_02_06.jpg)'
- en: 'Figure 2.6: Setting the cluster configuration'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.6：设置集群配置
- en: 'In the final view, Azure will validate the configuration that was applied to
    your first cluster. If you get the message Validation passed, click Create:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 在最终视图中，Azure将验证应用于您的第一个集群的配置。如果您看到“验证通过”消息，请点击创建：
- en: '![Reviewing all the cluster configurations under the Review + create tab](img/B17338_02_07.jpg)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![在“审核+创建”选项卡下查看所有集群配置](img/B17338_02_07.jpg)'
- en: 'Figure 2.7: The final validation of your cluster configuration'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.7：集群配置的最终验证
- en: 'Deploying the cluster should take roughly 10 minutes. Once the deployment is
    complete, you can check the deployment details as shown in *Figure 2.8*:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 部署集群大约需要10分钟。部署完成后，您可以查看如*图2.8*所示的部署详情：
- en: '![An overview of the deployment details once the cluster is successfully deployed](img/B17338_02_08.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![集群成功部署后的部署详情概览](img/B17338_02_08.jpg)'
- en: 'Figure 2.8: Deployment details once the cluster is successfully deployed'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.8：集群成功部署后的部署详情
- en: 'If you get a quota limitation error, as shown in *Figure 2.9*, check the settings
    and try again. Make sure that you select the Standard DS2_v2 node size and only
    two nodes:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您遇到配额限制错误，如*图2.9*所示，请检查设置并重试。确保选择`Standard DS2_v2`节点大小，并且节点数量为2：
- en: '![Redeploying the cluster with a smaller cluster size due to the quota limit
    error](img/B17338_02_09.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![由于配额限制错误，重新部署一个较小大小的集群](img/B17338_02_09.jpg)'
- en: 'Figure 2.9: Retrying with a smaller cluster size due to a quota limit error'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.9：由于配额限制错误，尝试使用较小的集群大小
- en: Moving to the next section, we'll take a quick first look at your cluster; hit
    the Go to resource button as seen in *Figure 2.8.* This will take you to the AKS
    cluster dashboard in the portal.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 进入下一部分，我们将快速查看您的集群；点击如*图2.8*所示的“转到资源”按钮。这将把您带到Azure门户中的AKS集群仪表板。
- en: A quick overview of your cluster in the Azure portal
  id: totrans-57
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在Azure门户中快速概览您的集群
- en: 'If you hit the Go to resource button in the previous section, you will see
    the overview of your cluster in the Azure portal:'
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在上一节点击了“转到资源”按钮，您将看到Azure门户中的集群概览：
- en: '![An overview of the AKS pane in the Azure portal](img/B17338_02_10.jpg)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![在Azure门户中查看AKS窗格概览](img/B17338_02_10.jpg)'
- en: 'Figure 2.10: The AKS pane in the Azure portal'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.10：Azure门户中的AKS窗格
- en: This is a quick overview of your cluster. It displays the name, the location,
    and the API server address. The navigation menu on the left provides different
    options to control and manage your cluster. Let's walk through a couple of interesting
    options that the has to portal offer.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 这是您集群的快速概览。它显示了集群名称、位置和API服务器地址。左侧的导航菜单提供了不同的选项来控制和管理您的集群。我们将快速浏览一些门户提供的有趣选项。
- en: The Kubernetes resources section gives you an insight into the workloads that
    are running on your cluster. You could, for instance, see running deployments
    and running pods in your cluster. It also allows you to create new resources on
    your cluster. We will use this section later in the chapter after you have deployed
    your first application on AKS.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes 资源部分为您提供关于运行在集群上的工作负载的洞察。例如，您可以查看正在运行的部署和正在运行的 pods。它还允许您在集群上创建新的资源。我们将在本章稍后使用此部分，在您将第一个应用程序部署到
    AKS 后。
- en: 'In the Node pools pane, you can scale your existing node pool (meaning the
    nodes or servers in your cluster) either up or down by adding or removing nodes.
    You can add a new node pool, potentially with a different virtual machine size,
    and you can also upgrade your node pools individually. In *Figure 2.11*, you can
    see the + Add node pool option at the top-left corner, and if you select your
    node pool, the Upgrade and Scale options also become available in the top bar:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 在节点池面板中，您可以通过添加或删除节点来扩展现有的节点池（即集群中的节点或服务器），实现向上或向下扩展。您可以添加一个新的节点池，可能使用不同的虚拟机规格，还可以单独升级您的节点池。在*图
    2.11*中，您可以看到左上角的 + 添加节点池 选项，如果选择了您的节点池，顶部的 升级 和 扩展 选项也会变得可用：
- en: '![Adding, scaling, and upgrading node pools in the Node pools pane](img/B17338_02_11.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![在节点池面板中添加、扩展和升级节点池](img/B17338_02_11.jpg)'
- en: 'Figure 2.11: Adding, scaling, and upgrading node pools'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.11：添加、扩展和升级节点池
- en: 'In the Cluster configuration pane, you can instruct AKS to upgrade the control
    plane to a newer version. Typically, in a Kubernetes upgrade, you first upgrade
    the control plane, and then the individual node pools separately. This pane also
    allows you to enable **role-based access control** (**RBAC**) (which is enabled
    by default), and optionally integrate your cluster with Azure AD. You will learn
    more about Azure AD integration in *Chapter 8, Role-based access control in AKS*:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 在**集群配置面板**中，您可以指示 AKS 将控制平面升级到较新版本。通常，在 Kubernetes 升级中，您首先升级控制平面，然后分别升级各个节点池。该面板还允许您启用**基于角色的访问控制**（**RBAC**）（默认启用），并可选择将集群与
    Azure AD 集成。您将在*第 8 章，AKS 中的基于角色的访问控制*中了解更多有关 Azure AD 集成的信息：
- en: '![Upgrading the Kubernetes version of the API server using the Upgrade pane](img/B17338_02_12.jpg)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![使用升级面板升级 API 服务器的 Kubernetes 版本](img/B17338_02_12.jpg)'
- en: 'Figure 2.12: Upgrading the Kubernetes version of the API server using the Upgrade
    pane'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.12：使用升级面板升级 API 服务器的 Kubernetes 版本
- en: 'Finally, the Insights pane allows you to monitor your cluster infrastructure
    and the workloads running on your cluster. Since your cluster is brand new, there
    isn''t a lot of data to investigate. We will return back to this, in *Chapter
    7*, *Monitoring the AKS cluster and the application*:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，**Insights** 面板允许您监控集群基础设施和运行在集群上的工作负载。由于您的集群是全新的，因此没有太多数据可以调查。我们将在*第 7 章*中返回此部分，*监控
    AKS 集群和应用程序*：
- en: '![Monitoring cluster utilization using the Insights pane](img/B17338_02_13.jpg)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![使用 Insights 面板监控集群利用率](img/B17338_02_13.jpg)'
- en: 'Figure 2.13: Displaying cluster utilization using the Insights pane'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.13：使用 Insights 面板显示集群利用率
- en: This concludes our quick overview of the cluster and some of the interesting
    configuration options in the Azure portal. In the next section, we'll connect
    to our AKS cluster using Cloud Shell and then launch a demo application on top
    of this cluster.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们对集群和 Azure 门户中一些有趣配置选项的简要概述。在接下来的部分，我们将使用 Cloud Shell 连接到我们的 AKS 集群，并在该集群上启动一个演示应用程序。
- en: Accessing your cluster using Azure Cloud Shell
  id: totrans-73
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 通过 Azure Cloud Shell 访问您的集群
- en: 'Once the deployment is completed successfully, find the small Cloud Shell icon
    near the search bar, as highlighted in *Figure 2.14*, and click it:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦部署成功完成，找到靠近搜索栏的小 Cloud Shell 图标，如*图 2.14*所示，然后点击它：
- en: '![Clicking the Cloud Shell icon to open Azure Cloud Shell](img/B17338_02_14.jpg)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![点击 Cloud Shell 图标以打开 Azure Cloud Shell](img/B17338_02_14.jpg)'
- en: 'Figure 2.14: Clicking the Cloud Shell icon to open Azure Cloud Shell'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.14：点击 Cloud Shell 图标以打开 Azure Cloud Shell
- en: 'The portal will ask you to select either PowerShell or Bash as your default
    shell experience. As we will be working mainly with Linux workloads, please select Bash:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 门户会要求您选择 PowerShell 或 Bash 作为默认的 shell 环境。由于我们主要处理 Linux 工作负载，请选择 Bash：
- en: '![Selecting Bash as the default code editor](img/B17338_02_15.jpg)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![选择 Bash 作为默认代码编辑器](img/B17338_02_15.jpg)'
- en: 'Figure 2.15: Selecting the Bash option'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.15：选择 Bash 选项
- en: 'If this is the first time you have launched Cloud Shell, you will be asked
    to create a storage account; confirm and create it:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 如果这是您第一次启动 Cloud Shell，系统会要求您创建一个存储账户；请确认并创建它：
- en: '![Creating a new storage account for Cloud Shell](img/B17338_02_16.jpg)'
  id: totrans-81
  prefs: []
  type: TYPE_IMG
  zh: '![为 Cloud Shell 创建新存储账户](img/B17338_02_16.jpg)'
- en: 'Figure 2.16: Creating a new storage account for Cloud Shell'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.16：为 Cloud Shell 创建新存储账户
- en: 'After creating the storage, you might get an error message that contains a
    mount storage error. If that occurs, please restart your Cloud Shell:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建存储后，您可能会收到包含挂载存储错误的错误信息。如果发生这种情况，请重启您的 Cloud Shell：
- en: '![Hitting the restart button upon potentially receiving a mount storage error
    ](img/B17338_02_17.jpg)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![在可能收到挂载存储错误时点击重启按钮](img/B17338_02_17.jpg)'
- en: 'Figure 2.17: Hitting the restart button upon receiving a mount storage error'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.17：在收到挂载存储错误时点击重启按钮
- en: 'Click on the power button. It should restart, and you should see something
    similar to *Figure 2.18*:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 点击电源按钮。它应该会重启，您应该会看到类似 *图 2.18* 的界面：
- en: '![Showing a user logged into Cloud Shell](img/B17338_02_18.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![显示已登录 Cloud Shell 的用户](img/B17338_02_18.jpg)'
- en: 'Figure 2.18: Launching Cloud Shell successfully'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.18：成功启动 Cloud Shell
- en: 'You can pull the splitter/divider up or down to see more or less of the shell:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以上下拖动分隔符/分隔线，以查看更多或更少的 Shell 内容：
- en: '![Using the divider to resize the Cloud Shell window](img/B17338_02_19.jpg)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![使用分隔符调整 Cloud Shell 窗口大小](img/B17338_02_19.jpg)'
- en: 'Figure 2.19: Using the divider to make Cloud Shell larger or smaller'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.19：使用分隔符调整 Cloud Shell 大小
- en: The command-line tool that is used to interface with Kubernetes clusters is
    called `kubectl`. The benefit of using Azure Cloud Shell is that this tool, along
    with many others, comes preinstalled and is regularly maintained. `kubectl` uses
    a configuration file stored in `~/.kube/config` to store credentials to access
    your cluster.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 用于与 Kubernetes 集群交互的命令行工具是 `kubectl`。使用 Azure Cloud Shell 的好处是，这个工具以及许多其他工具都预安装并定期维护。`kubectl`
    使用存储在 `~/.kube/config` 中的配置文件来存储访问集群的凭证。
- en: Note
  id: totrans-93
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: There is some discussion in the Kubernetes community around the correct pronunciation
    of `kubectl`. The common way to pronounce it is either *kube-c-t-l*, *kube-control*,
    or *kube-cuddle*.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kubernetes 社区中，关于 `kubectl` 的正确发音有一些讨论。常见的发音方式是 *kube-c-t-l*、*kube-control*
    或 *kube-cuddle*。
- en: 'To get the required credentials to access your cluster, you need to type the
    following command:'
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获取访问您集群所需的凭证，您需要输入以下命令：
- en: '[PRE0]'
  id: totrans-96
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Note
  id: totrans-97
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: In this book, you will commonly see longer commands spread over multiple lines
    using the backslash symbol. This helps improve the readability of the commands,
    while still allowing you to copy and paste them. If you are typing these commands,
    you can safely ignore the backslash and type the full command in a single line.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中，您将经常看到较长的命令分布在多行中，并使用反斜杠符号。这有助于提高命令的可读性，同时仍然允许您复制粘贴。如果您正在输入这些命令，可以安全地忽略反斜杠，并将完整命令输入在同一行中。
- en: 'To verify that you have access, type the following:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 为了验证您是否有访问权限，请输入以下内容：
- en: '[PRE1]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'You should see something like *Figure 2.20*:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该看到类似 *图 2.20* 的内容：
- en: '![Output of the kubectl get nodes command](img/B17338_02_20.jpg)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![`kubectl get nodes` 命令的输出](img/B17338_02_20.jpg)'
- en: 'Figure 2.20: Output of the kubectl get nodes command'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.20：`kubectl get nodes` 命令的输出
- en: This command has verified that you can connect to your AKS cluster. In the next
    section, you'll go ahead and launch your first application.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 该命令已验证您可以连接到您的 AKS 集群。在下一节中，您将继续启动第一个应用程序。
- en: Deploying and inspecting your first demo application
  id: totrans-105
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 部署并检查您的第一个演示应用
- en: As you are all connected, let's launch your very first application. In this
    section, you will deploy your first application and inspect it using `kubectl`
    and later using the Azure portal. Let's start by deploying the application.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 既然您已经连接成功，让我们启动您的第一个应用程序。在本节中，您将部署第一个应用，并通过 `kubectl` 以及稍后通过 Azure 门户检查它。我们先从部署应用开始。
- en: Deploying the demo application
  id: totrans-107
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 部署演示应用
- en: In this section, you will deploy your demo application. For this, you will have
    to write a bit of code. In Cloud Shell, there are two options to edit code. You
    can do this either via command-line tools such as `vi` or `nano` or you can use
    a GUI-based code editor by typing the `code` commands in Cloud Shell. Throughout
    this book, you will mainly be instructed to use the graphical editor in the examples,
    but feel free to use any other tool you feel most comfortable with.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 在这一部分，你将部署你的演示应用程序。为此，你需要写一些代码。在Cloud Shell中，有两种方式可以编辑代码。你可以通过命令行工具，如`vi`或`nano`，来编辑代码，或者你可以通过在Cloud
    Shell中输入`code`命令使用基于GUI的代码编辑器。在本书中，示例会主要指导你使用图形编辑器，但你可以自由选择你最熟悉的任何工具。
- en: 'For the purpose of this book, all the code examples are hosted in a GitHub
    repository. You can clone this repository to your Cloud Shell and work with the
    code examples directly. To clone the GitHub repo into your Cloud Shell, use the
    following command:'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 为了本书的目的，所有代码示例都托管在一个GitHub仓库中。你可以将此仓库克隆到你的Cloud Shell中，并直接使用这些代码示例。要将GitHub仓库克隆到Cloud
    Shell中，请使用以下命令：
- en: '[PRE2]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'To access the code examples for this chapter, navigate into the directory of
    the code examples and go to the `Chapter02` directory:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要访问本章的代码示例，请进入代码示例的目录，并转到`Chapter02`目录：
- en: '[PRE3]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: You will use the code directly in the `Chapter02` folder for now. At this point
    in the book, you will not focus on what is in the code files just yet. The goal
    of this chapter is to launch a cluster and deploy an application on top of it.
    In the following chapters, we will dive into how Kubernetes configuration files
    are built and how you can create your own.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你将直接使用`Chapter02`文件夹中的代码。此时，你不必专注于代码文件中的内容。本章的目标是启动一个集群，并在其上部署一个应用程序。在接下来的章节中，我们将深入探讨Kubernetes配置文件的构建方式，以及如何创建你自己的配置文件。
- en: 'You will create an application based on the definition in the `azure-vote.yaml` file.
    To open that file in Cloud Shell, you can type the following command:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 你将根据`azure-vote.yaml`文件中的定义创建一个应用程序。要在Cloud Shell中打开该文件，可以输入以下命令：
- en: '[PRE4]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Here is the code example for your convenience:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 这是便于你参考的代码示例：
- en: '[PRE5]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'You can make changes to files in the Cloud Shell code editor. If you''ve made
    changes, you can save them by clicking on the ... icon in the upper-right corner,
    and then click Save to save the file as highlighted in *Figure 2.21*:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在Cloud Shell代码编辑器中对文件进行更改。如果你做了更改，可以通过点击右上角的...图标，然后点击保存来保存文件，如*图2.21*所示：
- en: '![Saving changes in the Cloud Shell code editor](img/B17338_02_21.jpg)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![在Cloud Shell代码编辑器中保存更改](img/B17338_02_21.jpg)'
- en: 'Figure 2.21: Save the azure-vote.yaml file'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.21：保存azure-vote.yaml文件
- en: 'The file should be saved. You can check this with the following command:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 文件应该已保存。你可以通过以下命令来检查：
- en: '[PRE6]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Note:'
  id: totrans-123
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意：
- en: Hitting the *Tab* button expands the file name in Linux. In the preceding scenario,
    if you hit *Tab* after typing `az`, it should expand to `azure-vote.yaml`.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 按下*Tab*按钮会在Linux中展开文件名。在前述情况下，如果你在输入`az`后按下*Tab*，它应该会展开为`azure-vote.yaml`。
- en: 'Now, let''s launch the application:'
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们启动应用程序：
- en: '[PRE7]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'You should quickly see the output as shown in *Figure 2.22*, it tells you which
    resources have been created:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该很快看到如*图2.22*所示的输出，它会告诉你哪些资源已被创建：
- en: '![Output of the kubectl create command](img/B17338_02_22.jpg)'
  id: totrans-128
  prefs: []
  type: TYPE_IMG
  zh: '![kubectl create命令的输出](img/B17338_02_22.jpg)'
- en: 'Figure 2.22: Output of the kubectl create command'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.22：kubectl create命令的输出
- en: You have successfully created your demo application. In the next section, you
    will inspect all the different objects Kubernetes created for this application
    and connect to your application.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经成功创建了演示应用程序。在接下来的部分，你将检查Kubernetes为该应用程序创建的所有不同对象，并连接到你的应用程序。
- en: Exploring the demo application
  id: totrans-131
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 探索演示应用程序
- en: In the previous section, you deployed a demo application. In this section, you
    will explore the different objects that Kubernetes created for this application
    and connect to it.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一部分，你已经部署了一个演示应用程序。在这一部分，你将探索Kubernetes为该应用程序创建的不同对象并连接到它。
- en: 'You can check the progress of the deployment by typing the following command:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以通过输入以下命令来检查部署的进度：
- en: '[PRE8]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'If you typed this soon after creating the application, you might have seen
    that a certain pod was still in the `ContainerCreating` process:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在创建应用程序后不久输入此命令，你可能会看到某个Pod仍处于`ContainerCreating`过程：
- en: '![Output of the kubectl get pods command](img/B17338_02_23.jpg)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![kubectl get pods命令的输出](img/B17338_02_23.jpg)'
- en: 'Figure 2.23: Output of the kubectl get pods command'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.23：kubectl get pods命令的输出
- en: Note
  id: totrans-138
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 注意
- en: Typing `kubectl` can become tedious. You can use the `alias` command to make
    your life easier. You can use `k` instead of `kubectl` as the alias with the following
    command: `alias k=kubectl`. After running the preceding command, you can just
    use `k get pods`. For instructional purposes in this book, we will continue to
    use the full `kubectl` command.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 输入`kubectl`可能会变得乏味。你可以使用`alias`命令来简化操作。你可以使用`k`代替`kubectl`作为别名，命令如下：`alias k=kubectl`。执行上述命令后，你可以直接使用`k
    get pods`。为了本书的教学目的，我们将继续使用完整的`kubectl`命令。
- en: 'Hit the *up arrow* key and press *Enter* to repeat the `kubectl get pods` command
    until the status of all pods is `Running`. Setting up all the pods takes some
    time, and you could optionally follow their status using the following command:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 按*上箭头*键并按*Enter*重复执行`kubectl get pods`命令，直到所有Pod的状态为`Running`。设置所有Pod需要一些时间，你也可以选择使用以下命令跟踪它们的状态：
- en: '[PRE9]'
  id: totrans-141
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: To stop following the status of the pods (when they are all in a running state),
    you can press *Ctrl* + *C*.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 要停止跟踪Pod的状态（当它们都处于运行状态时），你可以按*Ctrl* + *C*。
- en: In order to access your application publicly, you need one more thing. You need
    to know the public IP of the load balancer so that you can access it. If you remember
    from *Chapter 1*, *Introduction to containers and Kubernetes*, a service in Kubernetes
    will create an Azure load balancer. This load balancer will get a public IP in
    your application so you can access it publicly.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 为了使你的应用能够公开访问，你还需要一个额外的信息。你需要知道负载均衡器的公共IP地址，这样你才能访问它。如果你记得在*第1章*，《容器与Kubernetes简介》中提到，Kubernetes中的服务将创建一个Azure负载均衡器。这个负载均衡器会为你的应用获取一个公共IP，从而使你能够公开访问它。
- en: 'Type the following command to get the public IP of the load balancer:'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 输入以下命令以获取负载均衡器的公共IP：
- en: '[PRE10]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'At first, the external IP might show `pending`. Wait for the public IP to appear
    and then press *Ctrl* + *C* to exit:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 一开始，外部IP可能显示为`pending`。等待公共IP出现后，再按*Ctrl* + *C*退出：
- en: '![Watching the service IP change from pending to the actual IP address](img/B17338_02_24.jpg)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![观察服务IP从待定状态变化为实际IP地址](img/B17338_02_24.jpg)'
- en: 'Figure 2.24: Watching the service IP change from pending to the actual IP address'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.24：观察服务IP从待定状态变化为实际IP地址
- en: 'Note the external IP address and type it in a browser. You should see an output
    similar to *Figure 2.25*:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意外部IP地址并在浏览器中输入。你应该看到类似*图2.25*的输出：
- en: '![Output of the application you just launched as seen in the browser](img/B17338_02_25.jpg)'
  id: totrans-150
  prefs: []
  type: TYPE_IMG
  zh: '![你刚刚启动的应用在浏览器中显示的输出](img/B17338_02_25.jpg)'
- en: 'Figure 2.25: The actual application you just launched'
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.25：你刚刚启动的实际应用
- en: Click on Cats or Dogs and watch the count go up.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 点击“Cats”或“Dogs”，并观察计数增加。
- en: 'To see all the objects in Kubernetes that were created for your application,
    you can use the `kubectl get all` command. This will show an output similar to
    *Figure 2.26*:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 要查看为你的应用在Kubernetes中创建的所有对象，你可以使用`kubectl get all`命令。这将显示类似*图2.26*的输出：
- en: '![Viewing all the objects by executing the kubectl get all command](img/B17338_02_26.jpg)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![通过执行kubectl get all命令查看所有对象](img/B17338_02_26.jpg)'
- en: 'Figure 2.26: Exploring all the Kubernetes objects created for your application'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 图2.26：探索为你的应用创建的所有Kubernetes对象
- en: 'As you can see, a number of objects were created:'
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，创建了许多对象：
- en: 'Pods: You will see two pods, one for the back end and one for the front end.'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Pods：你将看到两个Pod，一个用于后端，一个用于前端。
- en: 'Services: You will also see two services, one for the back end of type `ClusterIP`
    and one for the front end of type LoadBalancer. What these types mean will be
    explored in *Chapter 3*, *Application deployment on AKS.*'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 服务：你还会看到两个服务，一个用于后端，类型为`ClusterIP`，另一个用于前端，类型为LoadBalancer。这些类型的含义将在*第3章*，《在AKS上进行应用部署》中探讨。
- en: 'Deployments: You will also see two deployments.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署：你还将看到两个部署。
- en: 'ReplicaSets: And finally you''ll see two ReplicaSets.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 副本集：最后你将看到两个副本集。
- en: 'You can also view these objects from the Azure portal. To see, for example,
    the two deployments, you can click on **Workloads** in the left-hand navigation
    menu of the AKS pane, and you will see all the deployments in your cluster as
    shown in *Figure 2.27*. This figure shows you all the deployments in your cluster,
    including the system deployments. At the bottom of the list, you can see your
    own deployments. As you can also see in this figure, you can explore other objects
    such as pods and ReplicaSets using the top menu:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 你也可以通过 Azure 门户查看这些对象。例如，要查看两个部署，你可以点击 AKS 面板左侧导航菜单中的**工作负载**，然后你将看到集群中的所有部署，如*图
    2.27*所示。此图显示了集群中的所有部署，包括系统部署。在列表底部，你可以看到你自己的部署。正如图中所示，你还可以通过顶部菜单查看其他对象，如 pod 和
    ReplicaSet：
- en: '![Viewing all the deployments in our cluster using the Azure portal](img/B17338_02_27.jpg)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![通过 Azure 门户查看我们集群中的所有部署](img/B17338_02_27.jpg)'
- en: 'Figure 2.27: Exploring the two deployments part of your application in the
    Azure portal'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.27：在 Azure 门户中查看应用程序的两个部署部分
- en: You have now launched your own cluster and your first Kubernetes application.
    Note that Kubernetes took care of tasks such as connecting the front end and the
    back end, and exposing them to the outside world, as well as providing storage
    for the services.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 你现在已经启动了自己的集群和第一个 Kubernetes 应用程序。请注意，Kubernetes 处理了连接前端和后端、将其暴露到外部以及为服务提供存储等任务。
- en: 'Before moving on to the next chapter, let''s clean up your deployment. Since
    you created everything from a file, you can also delete everything by pointing
    Kubernetes to that file. Type `kubectl delete -f azure-vote.yaml` and watch all
    your objects get deleted:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在进入下一章节之前，让我们清理一下你的部署。由于你是从文件创建的一切，你也可以通过将 Kubernetes 指向该文件来删除所有内容。输入`kubectl
    delete -f azure-vote.yaml`，然后观察所有对象被删除：
- en: '![Deleting all the objects by running the kubectl delete command](img/B17338_02_28.jpg)'
  id: totrans-166
  prefs: []
  type: TYPE_IMG
  zh: '![通过运行 kubectl delete 命令删除所有对象](img/B17338_02_28.jpg)'
- en: 'Figure 2.28: Cleaning up the application'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 图 2.28：清理应用程序
- en: In this section, you have connected to your AKS cluster using Cloud Shell, successfully
    launched and connected to a demo application, explored the objects created using
    Cloud Shell and the Azure portal, and finally, cleaned up the resources that were
    created.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，你已经通过 Cloud Shell 连接到你的 AKS 集群，成功启动并连接到演示应用程序，探索了通过 Cloud Shell 和 Azure
    门户创建的对象，并最终清理了已创建的资源。
- en: Summary
  id: totrans-169
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 总结
- en: Having completed this chapter, you will now be able to access and navigate the
    Azure portal to perform all the functions required to deploy an AKS cluster. We
    used the free trial on Azure to our advantage to learn the ins and outs of AKS.
    We also launched our own AKS cluster with the ability to customize configurations
    if required using the Azure portal.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 完成本章后，你将能够访问并导航 Azure 门户，以执行所有部署 AKS 集群所需的功能。我们利用 Azure 的免费试用版，深入了解了 AKS 的各个方面。我们还启动了自己的
    AKS 集群，并能够根据需要通过 Azure 门户自定义配置。
- en: We also used Cloud Shell without installing anything on the computer. This is
    important for all the upcoming sections, where you will be doing more than just
    launching simple applications. Finally, we launched a publicly accessible service.
    The skeleton of this application is the same as for complex applications that
    we will cover in the later chapters.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还使用了 Cloud Shell，而无需在计算机上安装任何东西。这对于接下来的所有章节非常重要，因为你将不仅仅是启动简单的应用程序。最后，我们启动了一个公开可访问的服务。这个应用程序的框架与我们将在后续章节中讨论的复杂应用程序相同。
- en: In the next chapter, we will take an in-depth look at different deployment options
    to deploy applications onto AKS.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章节中，我们将深入研究不同的部署选项，以将应用程序部署到 AKS 上。
