- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Kubernetes has taken the world by storm, becoming the standard infrastructure
    for DevOps teams to develop, test, and run applications. Most enterprises are
    either running it already or are planning to run it in the next year. A look at
    job postings on any of the major job sites shows that just about every big-name
    company has Kubernetes positions open. The fast rate of adoption has led to Kubernetes-related
    positions growing by over 2,000% in the last 4 years.
  prefs: []
  type: TYPE_NORMAL
- en: One common problem that companies are struggling to address is the lack of enterprise
    Kubernetes knowledge. While Kubernetes isn’t new anymore (it just turned 10!),
    companies have had issues with trying to build teams to run clusters reliably.
    They’ve also struggled to understand how to integrate Kubernetes workloads across
    the multiple silos and technology stacks that are common in the enterprise world.
    Finding people with basic Kubernetes skills is becoming easier, but finding people
    with knowledge on topics that are required for enterprise clusters is still a
    challenge.
  prefs: []
  type: TYPE_NORMAL
- en: Who this book is for
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: We created this book to help DevOps teams to expand their skills beyond the
    basics of Kubernetes. It was created from the years of experience we have working
    with clusters in multiple enterprise environments.
  prefs: []
  type: TYPE_NORMAL
- en: There are many books available that introduce Kubernetes and the basics of installing
    clusters, creating Deployments, and using Kubernetes objects. Our plan was to
    create a book that would go beyond a basic cluster, and to keep the book at a
    reasonable length, we have not re-hashed the basics of Kubernetes. Readers should
    have some experience with Kubernetes and DevOps before reading this book.
  prefs: []
  type: TYPE_NORMAL
- en: While the primary focus of the book is on extending clusters with enterprise
    features, the first section of the book will provide a refresher on key Docker
    topics and Kubernetes objects. It is important that you have a solid understanding
    of Kubernetes objects in order to get the most out of the more advanced chapters.
  prefs: []
  type: TYPE_NORMAL
- en: What this book covers
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*Chapter 1*, *Docker and Container Essentials*, covers the problems Docker
    and Kubernetes address for developers. You will be introduced to Docker, including
    the Docker daemon, data, installation, and using the Docker CLI.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 2*, *Deploying Kubernetes Using KinD*, helps with creating development
    clusters using KinD, a powerful tool that allows you to create clusters ranging
    from a single-node cluster to a full multi-node cluster. The chapter goes beyond
    a basic **KinD** cluster, explaining how to use a load balancer running **HAProxy**
    to load-balance worker nodes. By the end of the chapter, you will understand how
    KinD works and how to create a custom multi-node cluster, which will be used for
    the exercises in the chapters.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 3*, *Kubernetes Bootcamp*, provides a refresher on Kubernetes. This
    chapter will cover most of the objects that a cluster includes , which will be
    helpful if you are new to Kubernetes. It will explain each object with a description
    of what each object does and its function in a cluster. It is meant to be a refresher,
    or a “pocket guide” to objects. It does not contain exhaustive details for each
    object (that would require a second book).'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 4*, *Services, Load Balancing, and Network Policies*, explains how
    to expose a Kubernetes Deployment using services. Each service type will be explained
    with examples, and you will learn how to expose them using both a layer 7 and
    layer 4 load balancer. In this chapter, you will go beyond the basics of a simple
    Ingress controller, installing **MetalLB**, to provide layer 4 access to services.
    Finally, you will learn how to provide fine-grained control over the communication
    between pods, enhancing security and compliance within your cluster by using Kubernetes
    network policies.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 5*, *External DNS and Global Load Balancing*, will make you learn
    about two add-ons that benefit enterprise clusters by installing an incubator
    project called `external-dns` to provide dynamic name resolution for the services
    exposed by MetalLB. You will also learn how to add a **Global Load Balancer**
    to your cluster, using a project called **K8GB**, which provides native Kubernetes
    Global Load Balancing.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 6*, *Integrating Authentication into Your Cluster*, answers the question,
    “Once your cluster is built, how will users access it?” In this chapter we’ll
    detail how OpenID Connect works and why you should use it to access your cluster.
    You’ll also learn how to authenticate your pipelines, and finally, we’ll also
    cover several anti-patterns that should be avoided and explain why they should
    be avoided.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 7*, *RBAC Policies and Auditing*, explains that once users have access
    to a cluster, you need to know how to limit their access. Whether you are providing
    an entire cluster to your users or just a namespace, you’ll need to know how Kubernetes
    authorizes access via its **role-based access control** (**RBAC**) system. In
    this chapter, we’ll detail how to design RBAC policies, how to debug them, and
    different strategies for multi-tenancy.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 8*, *Managing Secrets*, puts the focus on one of the hardest to implement
    issues in the Kubernetes world: how to manage secret data. First, we’ll look at
    the challenges of managing Secrets in Kubernetes. Then we’ll learn about HashiCorp’s
    **Vault** for secret management. Finally, we’ll integrate our clusters with Vault
    using both the **Vault sidecar** and the popular **External Secrets Operator**.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 9*, *Building Multitenant Clusters with vClusters*, moves out of a
    single cluster toward breaking up clusters into tenants using the **vCluster**
    project from Loft. You’ll learn how vClusters work, how they interact with host
    clusters, how to securely access them, and how to automate their rollout for your
    tenants. We’ll also build off what we learned in *Chapter 8* to integrate managed
    Secrets into our vClusters too!'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 10*, *Deploying a Secured Kubernetes Dashboard*, covers Kubernetes
    Dashboard, which is often the first thing users try to launch once a cluster is
    up and running. There’s quite a bit of mythology around security (or lack thereof).
    Your cluster will be made of other web applications too, such as network dashboards,
    logging systems, and monitoring dashboards. This chapter looks at how the dashboard
    is architected, how to properly secure it, and examples of how not to deploy it
    with details as to why.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 11*, *Extending Security Using Open Policy Agent*, provides you with
    the guidance you need to deploy **Open Policy Agent** and **GateKeeper** to enable
    policies that can’t be implemented using RBAC. We’ll cover how to deploy Gatekeeper,
    how to write policies in Rego, and how to test your policies using OPA’s built-in
    testing framework.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 12*, *Node Security with Gatekeeper*, deals with the security of the
    nodes that run your pods. We will discuss how to securely design your containers
    so they are harder to abuse and how to build policies using GateKeeper that prevent
    your containers from accessing resources they don’t need.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 13*, *KubeArmor Securing Your Runtime*, presents security, which is
    the job of everyone, and providing tools to address attack vectors is key to running
    a secure and resilient cluster. In this chapter, you will learn how to secure
    your containers runtime by using a CNCF project called **KubeArmor**. KubeArmor
    provides an easy way to lock down containers using easy to understand policies.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 14*, *Backing Up Workloads*, explains how to create a backup of your
    cluster workloads for disaster recovery or cluster migrations, using **Velero**.
    You will work hands-on to create an S3-compatible storage location using MinIO
    to create a backup of example workloads and persistent storage. You will then
    restore the backup to a brand-new cluster to simulate a cluster migration.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 15*, *Monitoring Clusters and Workloads*, explores how to know how
    healthy your cluster is using **Prometheus** and **OpenSearch**. You’ll start
    with understanding how Kubernetes and Prometheus handle metrics, then we’ll deploy
    the Prometheus stack with **Alertmanager** and **Grafana**. You’ll learn how to
    secure the stack and how to extend it to monitor additional workloads. After we’re
    done with monitoring, we will move on to log aggregation with OpenSearch. We will
    start with exploring how logging in Kubernetes works, move on to integrating OpenSearch,
    and wrap up with securing access to OpenSearch with **OpenUnison**.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 16*, *An Introduction to Istio*, explains that many enterprises use
    a service mesh to provide advanced features such as security, traffic routing,
    authentication, tracing, and observability to a cluster. This chapter will introduce
    you to Istio, a popular open-source mesh, and its architecture, along with the
    most commonly used resources it provides. You will deploy Istio to your KinD cluster
    with an example application and learn how to observe the behavior of an application
    using an observability tool called Kiali.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 17*, *Building and Deploying Applications on Istio*, acknowledges
    that once you’ve deployed Istio, you’ll want to develop and deploy applications
    that use it! This chapter starts with a walk-through of the differences between
    monoliths and microservices and how they’re deployed. Next, we’ll step through
    building a micro-service to run in Istio and get into advanced topics like authentication,
    authorization, and service-to-service authentication for your services. You will
    also learn how to secure Kiali access by leveraging existing roles in Kubernetes
    using an OIDC provider and JSON Web Tokens. You’ll also learn how to secure Istio
    services using JWTs, along with how to use token exchanges to gain access to different
    services, securely moving from one service to another. Finally, we use OPA to
    create a custom authorization rule we configure with Istio.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 18*, *Provisioning a Multitenant Platform*, explores how to build
    pipelines, how to automate their creation, and how they relate to GitOps. We’ll
    explore how the objects that are used to drive pipelines are related to each other,
    how to build relationships between systems, and finally, design a self-service
    workflow for automating the Deployment of pipelines.'
  prefs: []
  type: TYPE_NORMAL
- en: '*Chapter 19*, *Building a Developer Portal*, builds off of our designs in *Chapter
    18* to build out a multitenant platform with many of the tools we used throughout
    this book. We’ll start with talking about building a lab to run our multitenant
    cluster in. Next we’ll roll out Kubernetes to three clusters and integrate them
    with GitLab, Vault, Argo CD, Harbor, and OpenUnison. Finally we’ll walk through
    onboarding a new vCluster based tenant using OpenUnison’s self-service portal.'
  prefs: []
  type: TYPE_NORMAL
- en: To get the most out of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: You should have a basic understanding of Linux, basic commands, tools like Git,
    and a text editor like Vi.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The book chapters contain both theory and hands-on exercises. We feel that
    the exercises help to reinforce the theory, but they are not required to understand
    each topic. If you want to do the exercises in the book, you will need to meet
    the requirement in the table below:'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '| **Requirement for the chapter exercises** | **Version** |'
  prefs: []
  type: TYPE_TB
- en: '| Ubuntu Server | 22.04 or higher |'
  prefs: []
  type: TYPE_TB
- en: All exercises use Ubuntu, but most of them will work on other Linux installations.
  prefs: []
  type: TYPE_NORMAL
- en: Download the example code files
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The code bundle for the book is hosted on GitHub at [https://github.com/PacktPublishing/Kubernetes-An-Enterprise-Guide-Third-Edition](https://github.com/PacktPublishing/Kubernetes-An-Enterprise-Guide-Third-Edition).
    We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  prefs: []
  type: TYPE_NORMAL
- en: Download the color images
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We also provide a PDF file that has color images of the screenshots/diagrams
    used in this book. You can download it here: [https://packt.link/gbp/9781835086957](https://packt.link/gbp/9781835086957).'
  prefs: []
  type: TYPE_NORMAL
- en: Supplementary content
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Here’s a link to the YouTube channel (created and managed by the authors Marc
    Boorshtein and Scott Surovich) that contains videos of the labs from this book,
    so you can see them in action before you start on your own: [https://packt.link/N5qjd](https://packt.link/N5qjd).'
  prefs: []
  type: TYPE_NORMAL
- en: Conventions used
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: There are a number of text conventions used throughout this book.
  prefs: []
  type: TYPE_NORMAL
- en: '`CodeInText`: Indicates code words in text, database table names, folder names,
    filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles.
    For example: “The `--name` option will set the name of the cluster to `cluster01`,
    and `--config` tells the installer to use the `cluster01-kind.yaml` config file.”'
  prefs: []
  type: TYPE_NORMAL
- en: 'A block of code is set as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'When we wish to draw your attention to a particular part of a code block, the
    relevant lines or items are set in bold:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Any command-line input or output is written as follows:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '**Bold**: Indicates a new term, an important word, or words that you see on
    the screen, for example, in menus or dialog boxes, also appear in the text like
    this. For example: “Hit the **Finish Login** button at the bottom of the screen.”'
  prefs: []
  type: TYPE_NORMAL
- en: Warnings or important notes appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Tips and tricks appear like this.
  prefs: []
  type: TYPE_NORMAL
- en: Get in touch
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Feedback from our readers is always welcome.
  prefs: []
  type: TYPE_NORMAL
- en: '**General feedback**: Email [feedback@packtpub.com](mailto:feedback%40packtpub.com),
    and mention the book’s title in the subject of your message. If you have questions
    about any aspect of this book, please email us at [questions@packtpub.com](mailto:questions%40packtpub.com).'
  prefs: []
  type: TYPE_NORMAL
- en: '**Errata**: Although we have taken every care to ensure the accuracy of our
    content, mistakes do happen. If you have found a mistake in this book, we would
    be grateful if you would report this to us. Please visit [http://www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata),
    select your book, click on the Errata Submission Form link, and enter the details.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Piracy**: If you come across any illegal copies of our works in any form
    on the Internet, we would be grateful if you would provide us with the location
    address or website name. Please contact us at [copyright@packtpub.com](mailto:copyright%40packtpub.com)
    with a link to the material.'
  prefs: []
  type: TYPE_NORMAL
- en: '**If you are interested in becoming an author**: If there is a topic that you
    have expertise in and you are interested in either writing or contributing to
    a book, please visit [http://authors.packtpub.com](http://authors.packtpub.com).'
  prefs: []
  type: TYPE_NORMAL
- en: Share your thoughts
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Once you’ve read *Kubernetes - An Enterprise Guide, Third Edition*, we’d love
    to hear your thoughts! Please [click here to go straight to the Amazon review
    page](https://packt.link/r/1835086950) for this book and share your feedback.
  prefs: []
  type: TYPE_NORMAL
- en: Your review is important to us and the tech community and will help us make
    sure we’re delivering excellent quality content.
  prefs: []
  type: TYPE_NORMAL
- en: Download a free PDF copy of this book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Thanks for purchasing this book!
  prefs: []
  type: TYPE_NORMAL
- en: Do you like to read on the go but are unable to carry your print books everywhere?
  prefs: []
  type: TYPE_NORMAL
- en: Is your eBook purchase not compatible with the device of your choice?
  prefs: []
  type: TYPE_NORMAL
- en: Don’t worry, now with every Packt book you get a DRM-free PDF version of that
    book at no cost.
  prefs: []
  type: TYPE_NORMAL
- en: Read anywhere, any place, on any device. Search, copy, and paste code from your
    favorite technical books directly into your application.
  prefs: []
  type: TYPE_NORMAL
- en: The perks don’t stop there, you can get exclusive access to discounts, newsletters,
    and great free content in your inbox daily.
  prefs: []
  type: TYPE_NORMAL
- en: 'Follow these simple steps to get the benefits:'
  prefs: []
  type: TYPE_NORMAL
- en: 'Scan the QR code or visit the link below:'
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: '![](img/B21165_Free_PDF_QR.png)'
  prefs: []
  type: TYPE_IMG
- en: '[https://packt.link/free-ebook/9781835086957](https://packt.link/free-ebook/9781835086957)'
  prefs: []
  type: TYPE_NORMAL
- en: Submit your proof of purchase.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: That’s it! We’ll send your free PDF and other benefits to your email directly.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
