<html><head></head><body>
		<div id="_idContainer048">
			<h1 id="_idParaDest-62" class="chapter-number"><a id="_idTextAnchor083"/>3</h1>
			<h1 id="_idParaDest-63"><a id="_idTextAnchor084"/>Installing Your First App with Helm</h1>
			<p><a id="_idTextAnchor085"/>Earlier in this book, we referred to Helm as the <strong class="bold">Kubernetes package manager</strong> and compared it to an operating system’s package manager. A package manager<a id="_idIndexMarker157"/> allows users to quickly and easily install applications of varying complexities and manage any dependencies that an application might have. Helm works similarly. <a id="_idTextAnchor086"/></p>
			<p>Users simply determine the application they want to deploy on Kubernetes and Helm does the rest of the work. A <a id="_idIndexMarker158"/>Helm chart – a packaging of Kubernetes resources – contains the logic and components required to install an application, allowing users to perform installations without needing to know the specific resources required. Users can also pass in parameters, called values, to a Helm chart to customize different aspects of the application. You will explore these features in this chapter by leveraging Helm as a package manager to deploy an instance of WordPress onto Kubernetes. </p>
			<p>In this chapter, we will cover the following main topics<a id="_idTextAnchor087"/>:</p>
			<ul>
				<li>Understanding the WordPress application</li>
				<li>Finding a WordPress chart</li>
				<li>Creating a Kubernetes environment</li>
				<li>Installing a WordPress chart</li>
				<li>Choosing between <strong class="source-inline">--set</strong> and <strong class="source-inline">--values</strong><a id="_idTextAnchor088"/> </li>
				<li>Accessing the WordPress applicatio<a id="_idTextAnchor089"/>n</li>
				<li>Upgrading the WordPress release</li>
				<li>Rolling back the WordPress release</li>
				<li>Uninstalling the WordPress release</li>
				<li>Shutting down your environmen<a id="_idTextAnchor090"/>t</li>
			</ul>
			<h1 id="_idParaDest-64"><a id="_idTextAnchor091"/>Technical requirements</h1>
			<p>This chapter will use the following software technologies:</p>
			<ul>
				<li>minikube</li>
				<li>kubectl</li>
				<li>Helm</li>
			</ul>
			<p>We assume that these components have already been installed on your system. For additional information on each of these tools, including their installation and configuration, please refer to <a href="B17979_02.xhtml#_idTextAnchor038"><em class="italic">Chapter 2</em></a>, <em class="italic">Preparing a Kubernetes and Helm Environment<a id="_idTextAnchor092"/></em>.</p>
			<h1 id="_idParaDest-65"><a id="_idTextAnchor093"/>Understanding the WordPress application</h1>
			<p>WordPress<a id="_idIndexMarker159"/> is an open source <strong class="bold">Content Management System</strong> (<strong class="bold">CMS</strong>) used <a id="_idIndexMarker160"/>to create websites and blogs. Two different variants are available – WordPress.com and WordPress.org. WordPress.com<a id="_idIndexMarker161"/> is a <strong class="bold">Software-as-a-Service</strong> (<strong class="bold">SaaS</strong>) version of the <a id="_idIndexMarker162"/>CMS, meaning the WordPress application and its components are hosted and managed by WordPress. In this case, users do not need to worry about installing a WordPress instance as they can simply access instances that are already available. WordPress.org, on the other hand, is the self-hosted option. It requires users to deploy their WordPress instances and requires some level of expertise to maintain.</p>
			<p>Since WordPress.com<a id="_idIndexMarker163"/> is easier to start with, it may sound like the more desirable option. This SaaS version of WordPress, however, has many disadvantages over the self-hosted WordPress.org, such as the following:</p>
			<ul>
				<li>It does not provide as many features as WordPress.org</li>
				<li>It does not give users full control over their website</li>
				<li>It requires users to pay for premium features</li>
				<li>It does <a id="_idIndexMarker164"/>not provide the ability to modify the backend code of a website</li>
			</ul>
			<p>The self-hosted WordPress.org<a id="_idIndexMarker165"/> variation, on the other hand, gives users complete control over their website and WordPress instances. It provides the full WordPress feature set, from installing plugins to modifying backend code.</p>
			<p>A self-hosted WordPress instance<a id="_idIndexMarker166"/> requires users to deploy a few different components. WordPress needs a MySQL or a MariaDB database to save the website and administrative data, and the WordPress UI is deployed as a PHP frontend. In Kubernetes, deploying these components means creating a variety of different resources:</p>
			<ul>
				<li><strong class="source-inline">Secrets</strong> for database and admin console authentication</li>
				<li>A <strong class="source-inline">ConfigMap</strong> for externalized database configuration</li>
				<li><strong class="source-inline">Services</strong> for networking</li>
				<li>A <strong class="source-inline">PersistentVolumeClaim</strong> for database storage</li>
				<li>A <strong class="source-inline">StatefulSet</strong> for deploying the database in a stateful fashion</li>
				<li>A <strong class="source-inline">Deployment</strong> for deploying the frontend</li>
			</ul>
			<p>Creating these Kubernetes resources requires both WordPress and Kubernetes expertise. WordPress expertise is required because the user needs to know the required physical components, as well as how to configure them. Kubernetes expertise is required because users need to know how to deploy WordPress dependencies as Kubernetes resources. Given the complexity and number of components that are required, deploying WordPress on Kubernetes can be a daunting task.</p>
			<p>The challenge presented by this task is a perfect use case for Helm. Rather than focusing on creating and configuring each of the Kubernetes resources we have described, users can leverage Helm as a package manager to deploy and configure WordPress on Kubernetes. To begin, we’ll explore a platform<a id="_idIndexMarker167"/> called <strong class="bold">Artifact Hub</strong> to locate a suitable WordPress Helm chart. After that, we’ll deploy WordPress to your Kubernetes cluster using Helm and explore basic Helm features along the way.</p>
			<h1 id="_idParaDest-66">Finding a Word<a id="_idTextAnchor094"/>Press chart</h1>
			<p>Helm charts can be made <a id="_idIndexMarker168"/>available for consumption by publishing them to a chart repository. A chart repository<a id="_idIndexMarker169"/> is a location where packaged charts can be stored and shared. A repository<a id="_idIndexMarker170"/> is often hosted as an HTTP server and can take the form of various implementations, including GitHub pages, an Amazon S3 bucket, or a simple web server, such as Apache HTTPD. Recently, repositories can also take the form of OCI registries, allowing users to save and retrieve Helm charts from hosted services such as Docker Hub and Quay.</p>
			<p>To use charts from a repository, Helm needs to be configured to use the repository. This can be accomplished by adding repositories using <strong class="source-inline">helm repo add</strong>. One challenge involved with adding repositories is that there are many different chart repositories available for consumption; it may be difficult to locate the particular repository that fits your use case. To make it easier to find chart repositories (and other Kubernetes-related artifacts), the Kubernetes community created a platform called Artifact Hub.</p>
			<p>Artifact Hub<a id="_idIndexMarker171"/> is a centralized location for upstream Kubernetes artifacts, such as Helm charts, operators, plugins, and more. In this chapter, we will use the Artifact Hub platform to search for WordPress Helm charts. Once an appropriate chart is found, we will add the repository this chart belongs to so that it can be installed.</p>
			<p>To begin, interaction with Artifact Hub can be accomplished either from the command line or from a web browser. When using the command line to search for Helm charts, the results that are returned provide a URL to Artifact Hub, which can be used to find additional information on the chart and instructions on how to add its chart repository. </p>
			<p>Let’s follow this workflow to add a chart repository containing a WordPress chart.</p>
			<h2 id="_idParaDest-67"><a id="_idTextAnchor095"/>Searching for WordPress charts from the command line</h2>
			<p>In general, Helm<a id="_idIndexMarker172"/> contains two different search<a id="_idIndexMarker173"/> commands to assist us in finding Helm charts:</p>
			<ul>
				<li>To search for charts in Artifact Hub, use the following command:<p class="source-code"><strong class="bold">$ helm search hub</strong></p></li>
			</ul>
			<p>Note that in prior versions of Helm, <strong class="source-inline">helm search hub</strong> referenced a centrally managed public repository of Helm charts maintained by the Helm community called Helm Hub instead of Artifact Hub. Backward compatibility has been retained through the use of the <strong class="source-inline">--endpoint</strong> parameter, which enables users to specify the location of any monocular-based instance, the web search and discovery web application backing Helm Hub. </p>
			<ul>
				<li>To search repositories for a keyword present in a chart, use the following command:<p class="source-code"><strong class="bold">$ helm search repo</strong></p></li>
			</ul>
			<p>If repositories have not been added previously, users should run the <strong class="source-inline">helm search hub</strong> command to locate Helm charts available across all public chart repositories. Once a repository has been added, users can run <strong class="source-inline">helm search repo</strong> to search across these repositories.</p>
			<p>Let’s <a id="_idIndexMarker174"/>search Artifact Hub for any existing <a id="_idIndexMarker175"/>WordPress charts. Each chart in Artifact Hub has a set of keywords that can be searched against. Execute the following command to locate charts containing the <strong class="source-inline">wordpress</strong> keyword:</p>
			<p class="source-code">$ helm search hub wordpress</p>
			<p>Upon running this command, an output similar to the following should be displayed:</p>
			<div>
				<div id="_idContainer018" class="IMG---Figure">
					<img src="image/Figure_3.1_B17979.jpg" alt="Figure 3.1 – The output from running helm search hub wordpress&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.1 – The output from running helm search hub wordpress</p>
			<p>Each line of the output returned by this command is a chart from Artifact Hub. The output displays the URL to each chart’s Artifact Hub page. Also displayed is the chart version, which represents the latest version of the Helm chart, and the app version, which represents the version of the application that the chart deploys by default. The <strong class="source-inline">helm search hub</strong> command<a id="_idIndexMarker176"/> also prints a brief description of each chart.</p>
			<p>As you may have noticed, some of the values returned are truncated. This is because the default output of <strong class="source-inline">helm search hub</strong> is <strong class="source-inline">table</strong>, causing the results to be returned in tabular format. By default, columns wider than 50 characters are truncated. This truncation can be avoided by using the <strong class="source-inline">--max-col-width=0</strong> flag.</p>
			<p>Try running the following command by including the <strong class="source-inline">--max-col-width</strong> flag to view the untruncated results i<a id="_idTextAnchor096"/>n tabular format: </p>
			<p class="source-code">$ helm search hub wordpress<a id="_idTextAnchor097"/> --max-col-width=0</p>
			<p>Alternatively, users can pass the <strong class="source-inline">--output</strong> flag and specify either <strong class="source-inline">yaml</strong> or <strong class="source-inline">json</strong>, which will print the search results in full. </p>
			<p>Try running the previous command again with the <strong class="source-inline">--output yaml</strong> flag:</p>
			<p class="source-code">$ helm search hub wordpress --output yaml</p>
			<p>The result will be in YAML format, similar to the output shown here:</p>
			<div>
				<div id="_idContainer019" class="IMG---Figure">
					<img src="image/Figure_3.2_B17979.jpg" alt="Figure 3.2 – The output for the helm search hub wordpress --output yaml command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.2 – The output for the helm search hub wordpress --output yaml command</p>
			<p>For this<a id="_idIndexMarker177"/> example, we will choose to install the<a id="_idIndexMarker178"/> second chart that was returned in the preceding sample output. To learn more about this chart and how it is installed, visit <a href="B17979_03.xhtml#_idTextAnchor083">https://artifacthub.io/packages/helm/bitnami/wordpress</a>. We’ll explore this link in the next section.</p>
			<h2 id="_idParaDest-68"><a id="_idTextAnchor098"/>Viewing the WordPress chart in a browser</h2>
			<p>Using <strong class="source-inline">helm search hub</strong> is the<a id="_idIndexMarker179"/> fastest way to search for charts <a id="_idIndexMarker180"/>on Artifact Hub. However, it <a id="_idIndexMarker181"/>does not provide all of the details <a id="_idIndexMarker182"/>needed for installation. Namely, users need to know a chart’s repository URL to add its repository and install the chart. A chart’s Artifact Hub page can provide this URL, along with other installation details.</p>
			<p>Once you have entered the WordPress chart’s URL into a browser window, a page similar to the following will be displayed:</p>
			<div>
				<div id="_idContainer020" class="IMG---Figure">
					<img src="image/Figure_3.3_B17979.jpg" alt="Figure 3.3 – A WordPress Helm chart from Artifact Hub&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.3 – A WordPress Helm chart from Artifact Hub</p>
			<p>The <a id="_idIndexMarker183"/>WordPress chart’s page from Artifact Hub provides <a id="_idIndexMarker184"/>many details, including the maintainer of the chart (<strong class="bold">Bitnami</strong>, which is a company that provides software packages that can be deployed to different environments) and a brief introduction to the chart (stating that this chart will deploy a WordPress instance to Kubernetes, along with a Bitnami MariaDB chart as a dependency). The web page also provides installation details, including the chart’s supported values, which are used to configure the installation, along with Bitnami’s chart repository URL. These installation details give users the ability to add this repository and install the WordPress chart.</p>
			<p>Under the <strong class="bold">TL;DR</strong> heading, you should see a <strong class="source-inline">helm repo add</strong> command. This is the command that you need to run to add the Bitnami chart repository, which is the repository that contains the WordPress chart we are interested in installing. </p>
			<h2 id="_idParaDest-69"><a id="_idTextAnchor099"/>Bitnami repository chart retention policy</h2>
			<p>Recent changes<a id="_idIndexMarker185"/> within the Bitnami Helm community have resulted in charts being removed from the Bitnami repository 6 months after their publication date. Aligning to the most recent versions of software packages is a recommended practice so that the most recent set of features and security remediations are included. However, since the remainder of the exercises specify specific chart versions to support the stability of the tested integrations, an alternate repository must be utilized.</p>
			<p>Fortunately, another<a id="_idIndexMarker186"/> repository index has been provided that includes all of the Bitnami charts without the retention policy of the default index, which will be described in the next section. You will learn more about repository indexes by creating and managing your own repository in <a href="B17979_07.xhtml#_idTextAnchor196"><em class="italic">Chapter 7</em></a>, <em class="italic">Helm Lifecycle Hooks</em>.</p>
			<h2 id="_idParaDest-70"><a id="_idTextAnchor100"/> Adding the full Bitnami repository</h2>
			<p>With an understanding <a id="_idIndexMarker187"/>of the considerations as they relate to charts within the Bitnami repository, let’s add the repository that allows us to specify specific chart versions without concerns that they may be removed in the future. The only difference in the <strong class="source-inline">helm repo add</strong> command is the URL of the repository.</p>
			<p>Let’s add the repository now and verify that we can interact with its contents:</p>
			<ol>
				<li>Add the full Bitnami chart repository:<p class="source-code"><strong class="bold">$ helm repo add bitnami https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami </strong></p></li>
				<li>Verify that the chart has been added by running <strong class="source-inline">helm repo list</strong>:<p class="source-code"><strong class="bold">$ helm repo list</strong></p><p class="source-code"><strong class="bold">NAME       URL                   </strong></p><p class="source-code"><strong class="bold">bitnami     </strong>https://raw.githubusercontent.com/bitnami/charts/archive-full-index/bitnami</p></li>
			</ol>
			<p>We can do a little more now that we have added the repository. </p>
			<ol>
				<li value="3">Run the following command to view charts from locally configured repositories that contain the <strong class="source-inline">bitnami</strong> keyword:<p class="source-code"><strong class="bold">$ helm search repo bitnami --output yaml</strong></p></li>
			</ol>
			<p>A shortened list of the results returned is shown in the following output:</p>
			<div>
				<div id="_idContainer021" class="IMG---Figure">
					<img src="image/Figure_3.4_B17979.jpg" alt="Figure 3.4 – The output for the helm search repo bitnami --output yaml command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.4 – The output for the helm search repo bitnami --output yaml command</p>
			<p>Similar to the <strong class="source-inline">helm search hub</strong> command, the <strong class="source-inline">helm search repo</strong> command takes a keyword as an argument. Using <strong class="source-inline">bitnami</strong> as a keyword will return all the charts in the <strong class="source-inline">bitnami</strong> repository, as well as charts outside of that repository that may also contain the <strong class="source-inline">bitnami</strong> keyword.</p>
			<p>To ensure that you now <a id="_idIndexMarker188"/>have access to the WordPress chart, run the following <strong class="source-inline">helm search repo</strong> command with the <strong class="source-inline">wordpress</strong> argument:</p>
			<p class="source-code">$ helm search repo wordpress</p>
			<p>The output will display the WordPress chart that you found on Artifact Hub and observed in your browser:</p>
			<div>
				<div id="_idContainer022" class="IMG---Figure">
					<img src="image/Figure_3.5_B17979.jpg" alt="Figure 3.5 – The output for the helm search repo wordpress command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.5 – The output for the helm search repo wordpress command</p>
			<p>The value in the <strong class="source-inline">NAME</strong> field before the slash (<strong class="source-inline">/</strong>) indicates the name of the repository containing the Helm chart that was returned. The latest version of the WordPress chart from the <strong class="source-inline">bitnami</strong> repository, at the time of writing, is version <strong class="source-inline">12.1.6</strong>. This is the version that will be used for the installation. Previous versions can be queried by passing the <strong class="source-inline">--versions</strong> flag to the <strong class="source-inline">search</strong> command:</p>
			<p class="source-code">helm search repo wordpress --versions</p>
			<p>You should then see a new line for each version of the available WordPress charts:</p>
			<div>
				<div id="_idContainer023" class="IMG---Figure">
					<img src="image/Figure_3.6_B17979.jpg" alt="Figure 3.6 – The version lists for WordPress charts in the bitnami repository&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.6 – The version lists for WordPress charts in the bitnami repository</p>
			<p>Now that a <a id="_idIndexMarker189"/>WordPress chart has been identified and the chart’s repository has been added, we will explore how to use the command line to find out more about the chart so that you can install it.</p>
			<h2 id="_idParaDest-71"><a id="_idTextAnchor101"/>Showing the WordPress chart information from the command line</h2>
			<p>You can find a lot <a id="_idIndexMarker190"/>of important details about a Helm chart on its Artifact Hub page. Once a chart’s repository is added locally, this information (and more) can also be viewed from the command line with the following four <strong class="source-inline">helm show</strong> subcommands:</p>
			<ul>
				<li>Display the chart’s metadata (or chart definition):<p class="source-code"><strong class="bold">helm show chart</strong></p></li>
				<li>Display the chart’s README file:<p class="source-code"><strong class="bold">helm show readme</strong></p></li>
				<li>Display the chart’s values:<p class="source-code"><strong class="bold">helm show values</strong></p></li>
				<li>Display the chart’s definition, README files, and values:<p class="source-code"><strong class="bold">helm show all</strong></p></li>
			</ul>
			<p>Let’s use these commands with the Bitnami WordPress chart. In each of these commands, the chart should be referenced as <strong class="source-inline">bitnami/wordpress</strong>. Note that we will be passing the <strong class="source-inline">--version</strong> flag to retrieve information about version 12.1.6 of this chart. If this flag is omitted, information from the latest version of the chart will be returned.</p>
			<p>Run the <strong class="source-inline">helm show chart</strong> command to retrieve the metadata for the chart:</p>
			<p class="source-code">$ helm show chart bitnami/wordpress --version 12.1.6</p>
			<p>The <a id="_idIndexMarker191"/>result of this command will be <a id="_idIndexMarker192"/>the <strong class="bold">chart definition</strong> of the WordPress chart. A chart definition describes information such as the chart’s version, its dependencies, keywords, and maintainers:</p>
			<div>
				<div id="_idContainer024" class="IMG---Figure">
					<img src="image/Figure_3.7_B17979.jpg" alt="Figure 3.7 – The wordpress chart definition&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.7 – The wordpress chart definition</p>
			<p>Run<a id="_idIndexMarker193"/> the <strong class="source-inline">helm show readme</strong> command<a id="_idIndexMarker194"/> to view the chart’s README file from the command line:</p>
			<p class="source-code">$ helm show readme bitnami/wordpress --version 12.1.6</p>
			<p>The results of this command may look familiar since a chart’s README file is also displayed on its Artifact Hub page. Using this option from the command line provides a quick way to view the README file without having to open a browser:</p>
			<div>
				<div id="_idContainer025" class="IMG---Figure">
					<img src="image/Figure_3.8_B17979.jpg" alt="Figure 3.8 – The wordpress chart’s README file shown in the command line&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.8 – The wordpress chart’s README file shown in the command line</p>
			<p>We can <a id="_idIndexMarker195"/>use <strong class="source-inline">helm show values</strong> to inspect a chart’s values. Values serve as parameters that users can provide to customize a chart installation. We will run this command later in this chapter in the <em class="italic">Creating a values file for configuration</em> section when we install the WordPress chart.</p>
			<p>Finally, <strong class="source-inline">helm show all</strong> aggregates all of the information from the previous three commands together. Use this command if you want to inspect all of a chart’s details at once.</p>
			<p>Now that we have found and inspected a WordPress chart, let’s set up a Kubernetes environment where we can later install this chart.</p>
			<h1 id="_idParaDest-72"><a id="_idTextAnchor102"/>Creating a Kubernetes environment</h1>
			<p>To create a <a id="_idIndexMarker196"/>Kubernetes environment in this chapter, we will use minikube. We learned how to install minikube in <a href="B17979_02.xhtml#_idTextAnchor038"><em class="italic">Chapter 2</em></a>, <em class="italic">Preparing a Kubernetes and Helm Environment</em>.</p>
			<p>Follow these steps to set up Kubernetes:</p>
			<ol>
				<li value="1">Start your Kubernetes cluster by running the following command:<p class="source-code"><strong class="bold">$ minikube start</strong></p></li>
				<li>After a short amount of time, you should see a line in the output that resembles the following:<p class="source-code"><strong class="bold">Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default</strong></p></li>
				<li>Once the minikube cluster is up and running, create a dedicated namespace for this chapter’s exercise. Run the<a id="_idIndexMarker197"/> following command to create a namespace called <strong class="source-inline">chapter3</strong>:<p class="source-code"><strong class="bold">$ kubectl create namespace chapter3</strong></p></li>
			</ol>
			<p>Now that the cluster setup is complete, let’s begin the process of installing the WordPress c<a id="_idTextAnchor103"/>hart to your Kubernetes cluster.</p>
			<h1 id="_idParaDest-73"><a id="_idTextAnchor104"/>Installing a WordPress chart</h1>
			<p>Installing a Helm chart<a id="_idIndexMarker198"/> is a simple process that should begin with inspecting a chart’s values. In the next section, we will inspect the values that are available in the WordPress chart and describe how to create a file that allows for customizing the installation. Finally, we will install the chart and <a id="_idTextAnchor105"/>access the WordPress application.</p>
			<h2 id="_idParaDest-74"><a id="_idTextAnchor106"/>Creating a values file for configuration</h2>
			<p>You can <a id="_idIndexMarker199"/>override the values defined in charts by providing a YAML-formatted <strong class="source-inline">values</strong> file. To create a <strong class="source-inline">values</strong> file, you need to inspect the supported values that the chart provides. This can be done by running the <strong class="source-inline">helm show values</strong> command, as explained earlier.</p>
			<p>Run the following command to inspect the WordPress chart’s values:</p>
			<p class="source-code">$ helm show values bitnami/wordpress --version 12.1.6</p>
			<p>The result of this command should be a long list of possible values that you can set, many of which already have default values set:</p>
			<div>
				<div id="_idContainer026" class="IMG---Figure">
					<img src="image/Figure_3.9_B17979.jpg" alt="Figure 3.9 – A list of values generated by running helm show values&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.9 – A list of values generated by running helm show values</p>
			<p>The <a id="_idIndexMarker200"/>preceding output shows a portion of the WordPress chart’s values. Many of these properties already have defaults set, meaning these values will represent how the chart is configured if they are not overridden. For example, if the values under the <strong class="source-inline">image</strong> map are not overridden, the WordPress chart will use the <strong class="source-inline">bitnami/wordpress</strong> container image from the <strong class="source-inline">docker.io</strong> registry against the <strong class="source-inline">5.8.0-debian-10-r24</strong> tag.</p>
			<p>Lines in the chart’s values that begin with a hash sign (<strong class="source-inline">#</strong>) are comments. Comments can be used to explain a value or a block of values, or they can be used to unset them. As shown in the preceding example, comments were used to document each of the image-related values.</p>
			<p>If we explore the <strong class="source-inline">helm show values</strong> output further, we can find values that pertain to configuring the WordPress blog’s metadata:</p>
			<div>
				<div id="_idContainer027" class="IMG---Figure">
					<img src="image/Figure_3.10_B17979.jpg" alt="Figure 3.10 – The values returned by running the helm show values command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.10 – The values returned by running the helm show values command</p>
			<p>As you can <a id="_idIndexMarker201"/>see, these values are used to create a WordPress user and create a name for your blog. Let’s override them by creating a <strong class="source-inline">values</strong> file. Create a new file on your machine called <strong class="source-inline">wordpress-values.yaml</strong>. In that file, enter the following content:</p>
			<pre class="source-code">
wordpressUsername: helm-user
wordpressPassword: my-password
wordpressEmail: helm-user@example.com
wordpressFirstName: Helm_is
wordpressLastName: Fun
wordpressBlogName: Learn Helm!</pre>
			<p>Feel free to get more creative with these values if you’d like. Continuing down the list of values from <strong class="source-inline">helm show values</strong>, there is one more important value that should be added to your <strong class="source-inline">values</strong> file before starting the installation, as shown here:</p>
			<div>
				<div id="_idContainer028" class="IMG---Figure">
					<img src="image/Figure_3.11_B17979.jpg" alt="Figure 3.11 – The LoadBalancer value returned after running helm show values&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.11 – The LoadBalancer value returned after running helm show values</p>
			<p>To simplify the <a id="_idIndexMarker202"/>installation, we are going to update this value (referred to as <strong class="source-inline">service.type</strong>) to <strong class="source-inline">NodePort</strong>. We could leave this set to <strong class="source-inline">LoadBalancer</strong>, but this would require you to use the <strong class="source-inline">minikube tunnel</strong> command to reach the service. By setting this to <strong class="source-inline">NodePort</strong> instead, you will be able to directly access WordPress against a local port.</p>
			<p>Add this value to your <strong class="source-inline">wordpress-values.yaml</strong> file:</p>
			<pre class="source-code">
service:
  type: NodePort</pre>
			<p>Once this value has been added to your <strong class="source-inline">values</strong> file, your complete <strong class="source-inline">wordpress-values.yaml</strong> file should look as follows:</p>
			<pre class="source-code">
wordpressUsername: helm-user
wordpressPassword: my-password
wordpressEmail: helm-user@example.com
wordpressFirstName: Helm_is
wordpressLastName: Fun
wordpressBlogName: Learn Helm!
service:
  type: NodePort</pre>
			<p>Now that the <strong class="source-inline">values</strong> file is com<a id="_idTextAnchor107"/>plete, let’s run the installation.</p>
			<h2 id="_idParaDest-75"><a id="_idTextAnchor108"/>Running the installation</h2>
			<p>We <a id="_idIndexMarker203"/>use <strong class="source-inline">helm install</strong> to install a Helm chart. The standard syntax is as follows: </p>
			<p class="source-code">helm install [NAME] [CHART] [flags]</p>
			<p>The <strong class="source-inline">NAME</strong> parameter <a id="_idIndexMarker204"/>is the name you would like to give your Helm release. A <strong class="bold">release</strong> captures the Kubernetes resources that were installed with a chart and tracks an application’s life cycle. We will explore how releases work throughout this chapter.</p>
			<p>The <strong class="source-inline">CHART</strong> parameter is the name of the Helm chart that is installed. Charts from a repository can be installed using <strong class="source-inline">&lt;repo name&gt;/&lt;chart name&gt;</strong>.</p>
			<p>The <strong class="source-inline">flags</strong> option in <strong class="source-inline">helm install</strong> allows you to further customize the installation. <strong class="source-inline">flags</strong> allows users to define and override values, specify the namespace to work against, and more. The list of flags can be viewed by running <strong class="source-inline">helm install --help</strong>. We can pass <strong class="source-inline">--help</strong> to other commands to view their usage and supported options.</p>
			<p>Now that we have a proper understanding of the usage of <strong class="source-inline">helm install</strong>, let’s run the following command:</p>
			<p class="source-code">$ helm install wordpress bitnami/wordpress --values=wordpress-values.yaml --namespace chapter3 --version 12.1.6</p>
			<p>This command installs a new release called <strong class="source-inline">wordpress</strong> using the <strong class="source-inline">bitnami/wordpress</strong> Helm chart. It uses the values defined in the <strong class="source-inline">wordpress-values.yaml</strong> file to customize the installation, and the chart is installed in the <strong class="source-inline">chapter3</strong> namespace. Version <strong class="source-inline">12.1.6</strong> of the chart is deployed, as defined by the <strong class="source-inline">--version</strong> flag. Helm will install the latest cached version of the Helm chart without this flag.</p>
			<p>If the chart’s installation is successful, you should see the following output:</p>
			<div>
				<div id="_idContainer029" class="IMG---Figure">
					<img src="image/Figure_3.12_B17979.jpg" alt="Figure 3.12 – The output of a successful WordPress chart installation &#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.12 – The output of a successful WordPress chart installation </p>
			<p>This output <a id="_idIndexMarker205"/>displays information about the installation, including the name of the release, the time it was deployed, the namespace it was installed to, the status of the deployment (which is <strong class="source-inline">deployed</strong>), and the revision number (which is set to <strong class="source-inline">1</strong> since this is the initial installation of the release).</p>
			<p>The output also displays a list of notes related to the installation. Notes are used to provide users with additional information about their installation. In the case of the WordPress chart, these notes provide information about how to access the WordPress application. While these notes appear directly after installation, they can be retrieved at any time with the <strong class="source-inline">helm get notes</strong> command, as explained in the next section.</p>
			<p>With your first Helm installation complete, let’s inspect the release to observe the resources a<a id="_idTextAnchor109"/>nd configurations that were applied.</p>
			<h2 id="_idParaDest-76"><a id="_idTextAnchor110"/>Inspecting your release</h2>
			<p>One of the easiest ways to inspect<a id="_idIndexMarker206"/> a release and verify its installation is to list all the Helm releases in a given namespace. For this to be achieved, Helm provides the <strong class="source-inline">list</strong> subcommand.</p>
			<p>Run the following command to view the list of releases in the <strong class="source-inline">chapter3</strong> namespace:</p>
			<p class="source-code">$ helm list --namespace chapter3</p>
			<p>You should see only one release in this namespace, as shown here:</p>
			<div>
				<div id="_idContainer030" class="IMG---Figure">
					<img src="image/Figure_3.13_B17979.jpg" alt="Figure 3.13 – The output from the helm list command that lists the Helm releases&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.13 – The output from the helm list command that lists the Helm releases</p>
			<p>The <strong class="source-inline">list</strong> subcommand provides the following information:</p>
			<ul>
				<li>The release name</li>
				<li>The release namespace</li>
				<li>The latest revision number of the release</li>
				<li>A timestamp of the latest revision</li>
				<li>The release status</li>
				<li>The chart name</li>
				<li>The application version</li>
			</ul>
			<p>Note that the status, chart name, and application version have been truncated in the preceding output.</p>
			<p>While the <strong class="source-inline">list</strong> subcommand is useful for providing high-level release information, there are additional items that users may want to know about a particular release. Helm provides the <strong class="source-inline">get</strong> subcommand to provide more information about a release. </p>
			<p>The following commands can be used to provide a set of detailed release information:</p>
			<ul>
				<li>To return all the hooks for a named release, run the following command:<p class="source-code"><strong class="bold">helm get hooks</strong></p></li>
				<li>To return the manifest for a named release, run the following command:<p class="source-code"><strong class="bold">helm get manifest</strong></p></li>
				<li>To return the notes for a named release, run the following command:<p class="source-code"><strong class="bold">helm get notes</strong></p></li>
				<li>To return the values for a named release, run the following command:<p class="source-code"><strong class="bold">helm get values</strong></p></li>
				<li>To return all the information about a named release, run the following command:<p class="source-code"><strong class="bold">helm get all</strong></p></li>
			</ul>
			<p>The first <a id="_idIndexMarker207"/>command from the preceding list, <strong class="source-inline">helm get hooks</strong>, is used to display the hooks for a given release. Hooks will be explored in more detail in <a href="B17979_07.xhtml#_idTextAnchor196"><em class="italic">Chapter 7</em></a>, <em class="italic">Helm Lifecycle Hooks</em>, when you build and test a Helm chart. For now, hooks can be thought of as the actions that Helm performs during certain phases of an application’s life cycle. This WordPress installation did not create any hooks, so let’s move on to the next command.</p>
			<p>The <strong class="source-inline">helm get manifest</strong> command can be used to get a list of the Kubernetes resources that were created as part of the installation. Run the following command: </p>
			<p class="source-code">$ helm get manifest wordpress --namespace chapter3</p>
			<p>After you run this command, you’ll see the following Kubernetes manifests:</p>
			<ul>
				<li>Two <strong class="source-inline">Secrets</strong> for MariaDB and WordPress credentials</li>
				<li>Two <strong class="source-inline">ConfigMaps</strong> (the first is used to configure the WordPress application, while the second is used for testing, which is performed by chart developers and so can be ignored).</li>
				<li>One <strong class="source-inline">PersistentVolumeClaim</strong> for persisting MariaDB data.</li>
				<li>Two <strong class="source-inline">Services</strong> for MariaDB and WordPress</li>
				<li>One <strong class="source-inline">Deployment</strong> for WordPress</li>
				<li>One <strong class="source-inline">StatefulSet</strong> for MariaDB</li>
				<li>One <strong class="source-inline">ServiceAccount</strong> for MariaDB</li>
			</ul>
			<p>From this <a id="_idIndexMarker208"/>output, you can observe where your values had an effect when they configured the Kubernetes resources. One example to note is within the WordPress service, where <strong class="source-inline">type</strong> has been set to <strong class="source-inline">NodePort</strong>:</p>
			<div>
				<div id="_idContainer031" class="IMG---Figure">
					<img src="image/Figure_3.14_B17979.jpg" alt="Figure 3.14 – Setting the Service type to NodePort&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.14 – Setting the Service type to NodePort</p>
			<p>You can also observe the other values that we set for the WordPress user. These values are defined as environment variables in the WordPress deployment, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer032" class="IMG---Figure">
					<img src="image/Figure_3.15_B17979.jpg" alt="Figure 3.15 – Values set as environment variables&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.15 – Values set as environment variables</p>
			<p>The rest of the<a id="_idIndexMarker209"/> default values provided by the chart were left untouched. Those defaults have been applied to the Kubernetes resources and can be observed through the <strong class="source-inline">helm get manifest</strong> command. If these values had been changed, the Kubernetes resources would have been configured differently.</p>
			<p>Let’s move on to the next <strong class="source-inline">get</strong> command. The <strong class="source-inline">helm get notes</strong> command is used to display the notes from a Helm release. As you<a id="_idIndexMarker210"/> may recall, the release notes were displayed when the WordPress chart was installed. Notes are chart-specific and, in the case of WordPress, provide important information about accessing the application and can be displayed once again by running the following command:</p>
			<p class="source-code">$ helm get notes wordpress --namespace chapter3</p>
			<p>The next command is <strong class="source-inline">helm get values</strong>, and <a id="_idIndexMarker211"/>it is useful for recalling the values that were used for a given release. Run the following command to view the values that were provided in the <strong class="source-inline">wordpress</strong> release:</p>
			<p class="source-code">$ helm get values wordpress --namespace chapter3</p>
			<p>The result of this command should look familiar as they should match the values specified in the <strong class="source-inline">wordpress-values.yaml</strong> file:</p>
			<div>
				<div id="_idContainer033" class="IMG---Figure">
					<img src="image/Figure_3.16_B17979.jpg" alt="Figure 3.16 – User-supplied values in the WordPress release&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.16 – User-supplied values in the WordPress release</p>
			<p>While recalling the <a id="_idIndexMarker212"/>user-supplied values is useful, it may be necessary to return all of the values used by a release, including the defaults. This can be accomplished by passing in an additional <strong class="source-inline">--all</strong> flag, as shown in the following command:</p>
			<p class="source-code">$ helm get values wordpress --all --namespace chapter3</p>
			<p>For this chart, the output will be lengthy. The first several values are shown in the following output:</p>
			<div>
				<div id="_idContainer034" class="IMG---Figure">
					<img src="image/Figure_3.17_B17979.jpg" alt="Figure 3.17 – A subset of all the values for the WordPress release &#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.17 – A subset of all the values for the WordPress release </p>
			<p>Finally, Helm provides a <strong class="source-inline">helm get all</strong> command, which can be used to aggregate all of the information<a id="_idIndexMarker213"/> from the various <strong class="source-inline">helm get</strong> commands:</p>
			<p class="source-code">$ helm get all wordpress –n chapter3</p>
			<p>In the preceding command, we snuck in the <strong class="source-inline">-n</strong> flag in place of <strong class="source-inline">--namespace</strong>. From here on out, we will use the <strong class="source-inline">-n</strong> flag to provide the namespace that Helm should operate within.</p>
			<p>Besides the commands provided by Helm, the <strong class="source-inline">kubectl</strong> CLI can also be used to inspect an installation more closely. For example, you could return the deployments that Helm created by running the following command:</p>
			<p class="source-code">$ kubectl get deployments -l app.kubernetes.io/name=wordpress -n chapter3</p>
			<p>You’ll find that the following deployme<a id="_idTextAnchor111"/>nt exists in the <strong class="source-inline">chapter3</strong> namespace:</p>
			<div>
				<div id="_idContainer035" class="IMG---Figure">
					<img src="image/Figure_3.18_B17979.jpg" alt="Figure 3.18 – The wordpress deployment in the chapter3 namespace&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.18 – The wordpress deployment in the chapter3 namespace</p>
			<p>In the<a id="_idIndexMarker214"/> preceding command, we filtered the deployments by using the <strong class="source-inline">-l app.kubernetes.io/name=wordpress</strong> parameter. Many Helm charts add the <strong class="source-inline">app.kubernetes.io/name</strong> label (or a similar label) on the resources they create. You can use this label to filter resources using <strong class="source-inline">kubectl</strong> so that only resources that Helm created are returned.</p>
			<h1 id="_idParaDest-77"><a id="_idTextAnchor112"/>Choosing between --set and --values </h1>
			<p>When we installed WordPress earlier, we <a id="_idIndexMarker215"/>used the <strong class="source-inline">--values</strong> flag to pass parameters to the Helm chart. However, there are two ways to pass values:</p>
			<ul>
				<li>To pass a value explicitly<a id="_idIndexMarker216"/> from the command line, use the following command:<p class="source-code"><strong class="bold">--set</strong></p></li>
				<li>To specify values from a YAML file or URL, use the following command:<p class="source-code"><strong class="bold">--values</strong></p></li>
			</ul>
			<p>In this book, we will treat the <strong class="source-inline">--values</strong> flag as the preferred method of configuring chart values. The reason for this is that it is easier to configure multiple values when they are<a id="_idIndexMarker217"/> contained in a YAML file. Maintaining a <strong class="source-inline">values</strong> file also makes it simple to save these assets in <a id="_idIndexMarker218"/>a <strong class="bold">Source Code Management</strong> (<strong class="bold">SCM</strong>) system, such as <strong class="source-inline">Git</strong>, which allows installations to be easily reproducible. However, take note that sensitive values, such as passwords, should never be stored in a source control repository. When secrets need to be provided, the recommended approach is to use the <strong class="source-inline">--set</strong> flag to prevent them from being committed to source control. We will cover the topic of security in greater detail in <a href="B17979_12.xhtml#_idTextAnchor270"><em class="italic">Chapter 12</em></a>, <em class="italic">Helm Security Considerations</em>.</p>
			<p>The <strong class="source-inline">--set</strong> flag is <a id="_idIndexMarker219"/>used to pass values directly from the command line. This is an acceptable method for simple values, as well as for when there are only a small number of values that need to be configured. Complex values, such as lists and maps, can be challenging to input when using the <strong class="source-inline">--set</strong> flag, so it is not preferred. There are other related flags, such as <strong class="source-inline">--set-file</strong> and <strong class="source-inline">--set-string</strong>. The <strong class="source-inline">--set-file</strong> flag is used to pass along a file that has configured values in a <strong class="source-inline">key1=val1</strong> and <strong class="source-inline">key2=val2</strong> format, while the <strong class="source-inline">--set-string</strong> flag is used to set all the values provided in a <strong class="source-inline">key1=val1</strong> and <strong class="source-inline">key2=val2</strong> format as strings. </p>
			<p>Now, let’s explore the W<a id="_idTextAnchor113"/>ordPress application that we just installed.</p>
			<h1 id="_idParaDest-78"><a id="_idTextAnchor114"/>Accessing the WordPress application</h1>
			<p>The WordPress chart’s<a id="_idIndexMarker220"/> release notes provided four commands that you can run to access your WordPress application (you can recall the full release notes using <strong class="source-inline">helm get notes wordpress -n chapter3</strong>). Run the four commands that were provided from the notes:</p>
			<ul>
				<li>For macOS or Linux, run the following: <p class="source-code"><strong class="bold">export NODE_PORT=$(kubectl get --namespace chapter3 -o jsonpath="{.spec.ports[0].nodePort}" services wordpress)</strong></p><p class="source-code"><strong class="bold">export NODE_IP=$(kubectl get nodes --namespace chapter3 -o jsonpath="{.items[0].status.addresses[0].address}")</strong></p><p class="source-code"><strong class="bold">echo "WordPress URL: http://$NODE_IP:$NODE_PORT/"</strong></p><p class="source-code"><strong class="bold">echo "WordPress Admin URL: http://$NODE_IP:$NODE_PORT/admin"</strong></p></li>
				<li>For Windows PowerShell, run the following:<p class="source-code"><strong class="bold">$NODE_PORT = kubectl get --namespace chapter3 -o jsonpath="{.spec.ports[0].nodePort}" services wordpress | Out-String</strong></p><p class="source-code"><strong class="bold">$NODE_IP = kubectl get nodes --namespace chapter3 -o jsonpath="{.items[0].status.addresses[0].address}" | Out-String</strong></p><p class="source-code"><strong class="bold">echo "WordPress URL: http://$NODE_IP:$NODE_PORT/"</strong></p><p class="source-code"><strong class="bold">echo "WordPress Admin URL: http://$NODE_IP:$NODE_PORT/admin"</strong></p></li>
			</ul>
			<p>After defining the two <a id="_idIndexMarker221"/>environment variables based on the series of <strong class="source-inline">kubectl</strong> queries, the resulting <strong class="source-inline">echo</strong> commands will reveal the URLs to access WordPress. The first URL is to view the home page and is where visitors will access your site. The second URL is to reach the admin console, which is used by website administrators to configure and manage the site’s content.</p>
			<p>Paste the first URL into a browser. You should be presented with a page that looks similar to the following:</p>
			<div>
				<div id="_idContainer036" class="IMG---Figure">
					<img src="image/Figure_3.19_B17979.jpg" alt="Figure 3.19 – The WordPress blog page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.19 – The WordPress blog page</p>
			<p>Several portions of this<a id="_idIndexMarker222"/> page may look familiar to you. First, at the top of the screen, the title of the blog is <strong class="bold">Learn Helm!</strong>, which is the string you gave the <strong class="source-inline">wordpressBlogName</strong> value previously during installation. You can also see this value at the bottom left-hand side of the page.</p>
			<p>Another value that affected the customization of the home page is <strong class="source-inline">wordpressUsername</strong>. If you click on the <strong class="bold">Hello world!</strong> link, you’ll find that the author of that post is <strong class="source-inline">helm-user</strong>:</p>
			<div>
				<div id="_idContainer037" class="IMG---Figure">
					<img src="image/Figure_3.20_B17979.jpg" alt="Figure 3.20 – The “Hello world!” post&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.20 – The “Hello world!” post</p>
			<p>If you had provided a<a id="_idIndexMarker223"/> different value for <strong class="source-inline">wordpressUsername</strong>, then the author here would appear differently as well.</p>
			<p>The second link provided by the previous set of commands is for accessing the admin console. Paste the link from the second <strong class="source-inline">echo</strong> command into a browser. You should be presented with the following login screen:</p>
			<div>
				<div id="_idContainer038" class="IMG---Figure">
					<img src="image/Figure_3.21_B17979.jpg" alt="Figure 3.21 – The WordPress admin console login page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.21 – The WordPress admin console login page</p>
			<p>To log into the admin <a id="_idIndexMarker224"/>console, enter the <strong class="source-inline">wordpressUsername</strong> and <strong class="source-inline">wordpressPassword</strong> values that you provided during the installation. If you used the same values we specified earlier, then the username will be <strong class="source-inline">helm-user</strong> and the password will be <strong class="source-inline">my-password</strong>.</p>
			<p>Once you’re authenticated, the admin console dashboard will be displayed, as shown here:</p>
			<div>
				<div id="_idContainer039" class="IMG---Figure">
					<img src="image/Figure_3.22_B17979.jpg" alt="Figure 3.22 – The WordPress admin console page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.22 – The WordPress admin console page</p>
			<p>If you were a WordPress<a id="_idIndexMarker225"/> administrator, this is where you could configure your site, write posts, and manage plugins. If you click on the top-right link that says <strong class="bold">Howdy, helm-user</strong> (not visible in the preceding screenshot), you will be directed to the <strong class="source-inline">helm-user</strong> profile page. From there, you can see several of the other values that you provided during the installation, as shown in the following screenshot:</p>
			<div>
				<div id="_idContainer040" class="IMG---Figure">
					<img src="image/Figure_3.23_B17979.jpg" alt="Figure 3.23 – The WordPress profile page&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.23 – The WordPress profile page</p>
			<p>The <strong class="bold">First Name</strong>, <strong class="bold">Last Name</strong>, and <strong class="bold">Email</strong> fields refer to their corresponding <strong class="source-inline">wordpressFirstname</strong>, <strong class="source-inline">wordpressLastname</strong>, and <strong class="source-inline">wordpressEmail</strong> Helm values.</p>
			<p>Feel free to <a id="_idIndexMarker226"/>continue exploring your WordPress instance. Once you are finished, continue to the next s<a id="_idTextAnchor115"/>ection to learn how to upgrade a Helm release.</p>
			<h1 id="_idParaDest-79"><a id="_idTextAnchor116"/>Upgrading the WordPress release</h1>
			<p>Upgrading<a id="_idIndexMarker227"/> a release refers to the process of modifying the release’s values or updating the chart to a newer version. In this section, we will upgrade the WordPress release by a<a id="_idTextAnchor117"/>dding a couple more values to the installation.</p>
			<h2 id="_idParaDest-80"><a id="_idTextAnchor118"/>Modifying the Helm values</h2>
			<p>Oftentimes, when<a id="_idIndexMarker228"/> deploying applications to Kubernetes, you will want to run multiple replicas of the application to provide high availability and reduce the load on a single instance. Helm charts often provide some sort of replica-related value for configuring the number of pod replicas to deploy. A quick browse through the output of the <strong class="source-inline">helm show values bitnami/wordpress --version 12.1.6</strong> command shows that you can increase WordPress replicas by using the <strong class="source-inline">replicaCount</strong> value:</p>
			<div>
				<div id="_idContainer041" class="IMG---Figure">
					<img src="image/Figure_3.24_B17979.jpg" alt="Figure 3.24 – replicaCount in the helm show values command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.24 – replicaCount in the helm show values command</p>
			<p>Add the following line to your <strong class="source-inline">wordpress-values.yaml</strong> file to increase the number of replicas from <strong class="source-inline">1</strong> to <strong class="source-inline">2</strong>:</p>
			<pre class="source-code">
replicaCount: 2</pre>
			<p>Let’s add another value to set the resource requests. Looking through the <strong class="source-inline">helm show values</strong> output, you can see that this chart provides a <strong class="source-inline">resources</strong> map within its set of values:</p>
			<div>
				<div id="_idContainer042" class="IMG---Figure">
					<img src="image/Figure_3.25_B17979.jpg" alt="Figure 3.25 – The values under the resources stanza&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.25 – The values under the resources stanza</p>
			<p>Nested<a id="_idIndexMarker229"/> values such as <strong class="source-inline">resources</strong> are YAML maps (or objects), and they help provide a logical grouping of properties. Under the <strong class="source-inline">resources</strong> map is a <strong class="source-inline">requests</strong> map, which is used to configure the <strong class="source-inline">memory</strong> and <strong class="source-inline">cpu</strong> values that Kubernetes will allocate to the WordPress application. Let’s modify these values to decrease the memory request to <strong class="source-inline">256Mi</strong> (256 mebibytes) and the <strong class="source-inline">cpu</strong> request to <strong class="source-inline">100m</strong> (100 millicores). Add these modifications to the <strong class="source-inline">wordpress-values.yaml</strong> file, as shown here:</p>
			<pre class="source-code">
resources:
  requests:
    memory: 256Mi
    cpu: 100m</pre>
			<p>After defining these two new values, your entire <strong class="source-inline">wordpress-values.yaml</strong> file will look as follows:</p>
			<pre class="source-code">
wordpressUsername: helm-user
wordpressPassword: my-password
wordpressEmail: helm-user@example.com
wordpressFirstName: Helm_is
wordpressLastName: Fun
wordpressBlogName: Learn Helm!
service:
  type: NodePort
replicaCount: 2
resources:
  requests:
    memory: 256Mi
    cpu: 100m</pre>
			<p>Once <a id="_idIndexMarker230"/>the <strong class="source-inline">wordpress-values.yaml</strong> file has been updated with these new values, you can run the <strong class="source-inline">helm upgrade</strong> command to upgrade the <a id="_idTextAnchor119"/>release, as we will discuss in the next section.</p>
			<h2 id="_idParaDest-81"><a id="_idTextAnchor120"/>Running the upgrade</h2>
			<p>The <strong class="source-inline">helm upgrade</strong> command is <a id="_idIndexMarker231"/>almost identical to the <strong class="source-inline">helm install</strong> command in basic syntax, as illustrated in the following example:</p>
			<pre class="source-code">
helm upgrade [RELEASE] [CHART] [flags]</pre>
			<p>While <strong class="source-inline">helm install</strong> expects you to provide a name for a new release, <strong class="source-inline">helm upgrade</strong> expects you to provide the name of an already-existing release that should be upgraded. Alternatively, you can pass the <strong class="source-inline">--install </strong>flag, which instructs Helm to perform an installation instead if the release name you provide does not exist.</p>
			<p>Values defined in a <strong class="source-inline">values</strong> file can be provided using the <strong class="source-inline">--values</strong> flag, identical to that of the <strong class="source-inline">helm install</strong> command. Run the following command to upgrade the WordPress release with the new set of values:</p>
			<p class="source-code">$ helm upgrade wordpress bitnami/wordpress --values wordpress-values.yaml -n chapter3 --version 12.1.6</p>
			<p>Once this command<a id="_idIndexMarker232"/> has been executed, you should see an output similar to that of <strong class="source-inline">helm install</strong>. You should also notice that the <strong class="source-inline">REVISION</strong> field now says <strong class="source-inline">2</strong>:</p>
			<div>
				<div id="_idContainer043" class="IMG---Figure">
					<img src="image/Figure_3.26_B17979.jpg" alt="Figure 3.26 – The output for helm upgrade&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.26 – The output for helm upgrade</p>
			<p>You should also see that the <strong class="source-inline">wordpress</strong> pods have restarted if you run the following command:</p>
			<p class="source-code">$ kubectl get pods -n chapter3</p>
			<p>In Kubernetes, new pods are created when their pod template is modified. The same behavior can be observed in Helm. The values that were added during the upgrade introduced a configuration change to the WordPress pod template. As a result, new WordPress pods were created with the updated configuration. These changes can be observed using the same <strong class="source-inline">helm get manifest</strong> and <strong class="source-inline">kubectl get deployment</strong> commands that <a id="_idIndexMarker233"/>were used earlier in this chapter.</p>
			<p>In the next section, we’ll perform a couple more upgrades to demonstrate how values c<a id="_idTextAnchor121"/><a id="_idTextAnchor122"/>an sometimes behave differently during an upgrade.</p>
			<h2 id="_idParaDest-82"><a id="_idTextAnchor123"/>Reusing and resetting values during an upgrade</h2>
			<p>In <a id="_idIndexMarker234"/>addition to <strong class="source-inline">--set</strong> and <strong class="source-inline">--values</strong>, which are <a id="_idIndexMarker235"/>present in both <strong class="source-inline">helm install</strong> and <strong class="source-inline">helm upgrade</strong>, the <strong class="source-inline">helm upgrade</strong> command includes two additional values-related flags.</p>
			<p>Let’s look at these flags now:</p>
			<ul>
				<li><strong class="source-inline">--reuse-values</strong>: When upgrading, reuse the last release’s values</li>
				<li><strong class="source-inline">--reset-values</strong>: When upgrading, reset the values to the chart defaults</li>
			</ul>
			<p>If an upgrade is performed without providing values with the <strong class="source-inline">--set</strong> or <strong class="source-inline">--values</strong> flags, then the <strong class="source-inline">--reuse-values</strong> flag is applied by default. In other words, the same values that were used by the previous release will be used again during the upgrade if no values are provided. Alternatively, if at least one value is provided with <strong class="source-inline">--set</strong> or <strong class="source-inline">--values</strong>, then the <strong class="source-inline">--reset-values</strong> flag is applied by default. Let’s run through an example:</p>
			<ol>
				<li value="1">Run another <strong class="source-inline">upgrade</strong> command without specifying any values:<p class="source-code"><strong class="bold">$ helm upgrade wordpress bitnami/wordpress -n chapter3 --version 12.1.6</strong></p></li>
				<li>Run the <strong class="source-inline">helm get values</strong> command to inspect the values used in the upgrade:<p class="source-code"><strong class="bold">$ helm get values wordpress -n chapter3</strong></p></li>
			</ol>
			<p>Notice that the values displayed are identical to the previous upgrade:</p>
			<div>
				<div id="_idContainer044" class="IMG---Figure">
					<img src="image/Figure_3.27_B17979.jpg" alt="Figure 3.27 – The output of the helm get values command&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.27 – The output of the helm get values command</p>
			<p>Different behavior can be observed when values are provided during an upgrade. If values are passed via the <strong class="source-inline">--set</strong> or <strong class="source-inline">--values</strong> flags, all of the chart’s values that are not provided are reset to their defaults. Let’s see this in action.</p>
			<ol>
				<li value="3">Run another <a id="_idIndexMarker236"/>upgrade by providing <a id="_idIndexMarker237"/>a smaller set of values with the <strong class="source-inline">--set</strong> flag:<p class="source-code"><strong class="bold">$ helm upgrade wordpress bitnami/wordpress --set replicaCount=1 --set wordpressUsername=helm-user --set wordpressPassword=my-password -n chapter3 --version 12.1.6</strong></p></li>
				<li>After the upgrade, run the <strong class="source-inline">helm get values</strong> command:<p class="source-code"><strong class="bold">$ helm get values wordpress -n chapter3</strong></p></li>
			</ol>
			<p>The output will declare that you have only provided three values, as opposed to the many that you originally declared in the <strong class="source-inline">wordpress-values.yaml</strong> file:</p>
			<div>
				<div id="_idContainer045" class="IMG---Figure">
					<img src="image/Figure_3.28_B17979.jpg" alt="Figure 3.28 – The updated user-supplied values&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.28 – The updated user-supplied values</p>
			<p>To prevent confusion during your upgrades and to simplify how values are managed, try to manage all of your values in a <strong class="source-inline">values</strong> file. This provides a more declarative approach, and it makes it clear which values will be applied each time you upgrade.</p>
			<p>If you have been<a id="_idIndexMarker238"/> following along with each of the commands provided in this chapter, you should now have four revisions of the WordPress <a id="_idIndexMarker239"/>release in your environment. This fourth revision is not quite in the way we want the application to be configured since most of the values were set back to their defaults by the most recent upgrade. In the next section, we will explore how the WordPress release can be rolled back to the st<a id="_idTextAnchor124"/>able version that contained the set of desired values.</p>
			<h1 id="_idParaDest-83"><a id="_idTextAnchor125"/>Rolling back the WordPress release</h1>
			<p>While moving <a id="_idIndexMarker240"/>forward is preferred, there are some occasions where it makes more sense to return to a previous version of the application. The <strong class="source-inline">helm rollback</strong> command exists to satisfy this use case. Let’s describe how <a id="_idTextAnchor126"/>to roll back the WordPress release to a previous state.</p>
			<h2 id="_idParaDest-84"><a id="_idTextAnchor127"/>Inspecting the WordPress history</h2>
			<p>Every Helm <a id="_idIndexMarker241"/>release has a history of <strong class="bold">revisions</strong>. A revision <a id="_idIndexMarker242"/>is used to track the values, Kubernetes resources, and the chart version that were used in a particular release version. A new revision is created when a chart is installed, upgraded, or rolled back. Revision data is saved in Kubernetes Secrets by default (other options are ConfigMaps, local memory, or a PostgreSQL database, as determined by the <strong class="source-inline">HELM_DRIVER</strong> environment variable). This allows your Helm release to be managed and interacted with by different users on the Kubernetes cluster, provided they have the appropriate <strong class="bold">Role-Based Access Control</strong> (<strong class="bold">RBAC</strong>) permissions to view or modify resources in your namespace. <strong class="source-inline">Secrets</strong> containing the revisions can be observed by using <strong class="source-inline">kubectl</strong> to get them from the <strong class="source-inline">chapter3</strong> namespace:</p>
			<p class="source-code">$ kubectl get secrets -n chapter3</p>
			<p>This command will return all of the secrets within the namespace, but you should see these four in the output:</p>
			<p class="source-code">sh.helm.release.v1.wordpress.v1</p>
			<p class="source-code">Sh.helm.release.v1.wordpress.v2</p>
			<p class="source-code">sh.helm.release.v1.wordpress.v3</p>
			<p class="source-code">sh.helm.release.v1.wordpress.v4</p>
			<p>Each of these <strong class="source-inline">Secrets</strong> corresponds with an entry of the release’s revision history, which can be viewed by running the <strong class="source-inline">helm history</strong> command:</p>
			<p class="source-code">$ helm history wordpress -n chapter3</p>
			<p>This <a id="_idIndexMarker243"/>command will display a table of each revision, similar to the following (some columns have been omitted for readability):</p>
			<table id="table001-3" class="No-Table-Style _idGenTablePara-1">
				<colgroup>
					<col/>
					<col/>
					<col/>
				</colgroup>
				<tbody>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p><strong class="bold">REVISION</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">STATUS</strong></p>
						</td>
						<td class="No-Table-Style">
							<p><strong class="bold">DESCRIPTION</strong></p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>1</p>
						</td>
						<td class="No-Table-Style">
							<p>superseded</p>
						</td>
						<td class="No-Table-Style">
							<p>Install complete</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>2</p>
						</td>
						<td class="No-Table-Style">
							<p>superseded</p>
						</td>
						<td class="No-Table-Style">
							<p>Upgrade complete</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>3</p>
						</td>
						<td class="No-Table-Style">
							<p>superseded</p>
						</td>
						<td class="No-Table-Style">
							<p>Upgrade complete</p>
						</td>
					</tr>
					<tr class="No-Table-Style">
						<td class="No-Table-Style">
							<p>4</p>
						</td>
						<td class="No-Table-Style">
							<p>deployed</p>
						</td>
						<td class="No-Table-Style">
							<p>Upgrade complete</p>
						</td>
					</tr>
				</tbody>
			</table>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Table 3.1 – Table caption</p>
			<p>In this output, each revision has a number, along with the time it was updated, the status, the name of the chart, the app version, and the description. Revisions that have a status of <strong class="source-inline">superseded</strong> are no longer up to date, while the revision that says <strong class="source-inline">deployed</strong> is the currently deployed revision. Other statuses include <strong class="source-inline">pending</strong> and <strong class="source-inline">pending_upgrade</strong>, which means the installation or upgrade is currently in progress. <strong class="source-inline">failed</strong> refers to a particular revision that has failed to install or be upgraded and <strong class="source-inline">unknown</strong> means that you encountered a bug and may want to file an issue or notify the maintainers. It’s unlikely you will ever encounter a release with a state of <strong class="source-inline">unknown</strong>.</p>
			<p>The <strong class="source-inline">helm get</strong> commands described previously can be used against a revision number by specifying the <strong class="source-inline">--revision</strong> flag. For this rollback, let’s determine the release that had the full set of desired values. As you may recall, the current revision, <strong class="source-inline">revision 4</strong>, only <a id="_idIndexMarker244"/>contains a subset of the values we need, but <strong class="source-inline">revision 3</strong> should contain all of our desired values. This can be verified by running the <strong class="source-inline">helm get values</strong> command with the <strong class="source-inline">--revision</strong> flag:</p>
			<p class="source-code">$ helm get values wordpress --revision 3 -n chapter3</p>
			<p>The full list of values is presented by inspecting this revision:</p>
			<div>
				<div id="_idContainer046" class="IMG---Figure">
					<img src="image/Figure_3.29_B17979.jpg" alt="Figure 3.29 – The output of checking a specific revision&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.29 – The output of checking a specific revision</p>
			<p>It is possible to execute other <strong class="source-inline">helm get</strong> commands against a revision number to perform a further inspection. If necessary, the <strong class="source-inline">helm get manifest</strong> command can also be executed against <strong class="source-inline">revision 3</strong> to check the state of the Kubernetes resources that would be re<a id="_idTextAnchor128"/>stored.</p>
			<p>In the next section, we will execute the rollback.</p>
			<h2 id="_idParaDest-85"><a id="_idTextAnchor129"/>Running the rollback</h2>
			<p>The <strong class="source-inline">helm rollback</strong> command<a id="_idIndexMarker245"/> has the following syntax:</p>
			<p class="source-code">helm rollback &lt;RELEASE&gt; [REVISION] [flags]</p>
			<p>Users provide <a id="_idIndexMarker246"/>the name of the release and the desired revision number to roll a Helm release back to a previous point in time. Execute the following command to roll back WordPress to <strong class="source-inline">revision 3</strong>:</p>
			<p class="source-code">$ helm rollback wordpress 3 -n chapter3</p>
			<p>The <strong class="source-inline">rollback</strong> subcommand provides a simple output, printing the following message: </p>
			<p class="source-code">Rollback was a success! Happy Helming!</p>
			<p>This rollback can be observed in the release history by running the <strong class="source-inline">helm history</strong> command:</p>
			<p class="source-code">$ helm history wordpress -n chapter3</p>
			<p>In the release history, you will notice that a fifth revision was added with a status of <strong class="source-inline">deployed</strong> and a description of <strong class="source-inline">Rollback to 3</strong>. When an application is rolled back, it adds a new revision to the release history. This is not to be confused with an upgrade. The highest revision number simply denotes the currently deployed release. Be sure to check a revision’s description to determine whether it was created by an upgrade or a rollback.</p>
			<p>You can get this release’s values to ensure that the rollback now uses the desired values by running <strong class="source-inline">helm get values</strong> again:</p>
			<p class="source-code">$ helm get values wordpress -n chapter3</p>
			<p>The output will show the values from the latest stable release:</p>
			<div>
				<div id="_idContainer047" class="IMG---Figure">
					<img src="image/Figure_3.30_B17979.jpg" alt="Figure 3.30 – The values from the latest revision&#13;&#10;"/>
				</div>
			</div>
			<p class="IMG---Caption" lang="en-US" xml:lang="en-US">Figure 3.30 – The values from the latest revision</p>
			<p>You may notice that we did not explicitly set the chart version or the release’s values in the <strong class="source-inline">rollback</strong> subcommand. This is because the <strong class="source-inline">rollback</strong> subcommand is not designed to accept these inputs. It is designed to roll a chart back to a previous revision and leverage that revision’s chart version and values. Note that the <strong class="source-inline">rollback</strong> subcommand should not be part of everyday Helm practices and that it should be reserved only for emergencies, where the current state of an application is unstable and must be reverted to a previously stable point.</p>
			<p>If you have <a id="_idIndexMarker247"/>successfully rolled back the WordPress release, you are nearing the end of this chapter’s exercise. The final step is to remove the WordPress application from the Kubernetes cluster by using the <strong class="source-inline">unins<a id="_idTextAnchor130"/>tall</strong> subcommand, which we will describe in the next section.</p>
			<h1 id="_idParaDest-86"><a id="_idTextAnchor131"/>Uninstalling the WordPress release</h1>
			<p>Uninstalling a Helm <a id="_idIndexMarker248"/>release means deleting the Kubernetes resources that it manages. In addition, the <strong class="source-inline">uninstall</strong> command deletes the release’s history. While this is often what we want, specifying the <strong class="source-inline">--keep-history</strong> flag will instruct Helm to retain the release history.</p>
			<p>The syntax for the <strong class="source-inline">uninstall</strong> command is very simple:</p>
			<p class="source-code">helm uninstall RELEASE_NAME [...] [flags]</p>
			<p>Uninstall the WordPress release by running the <strong class="source-inline">helm uninstall</strong> command:</p>
			<p class="source-code">$ helm uninstall wordpress -n chapter3</p>
			<p>Once WordPress is uninstalled, you will see the following message:</p>
			<p class="source-code">release "wordpress" uninstalled</p>
			<p>You will also notice that the <strong class="source-inline">wordpress</strong> release no longer exists in the <strong class="source-inline">chapter3</strong> namespace:</p>
			<p class="source-code">$ helm list -n chapter3</p>
			<p>The output will be an empty table. You can also confirm that the release is no longer present by attempting to use <strong class="source-inline">kubectl</strong> to get the WordPress deployments:</p>
			<p class="source-code">$ kubectl get deployments -l app.kubernetes.io/name=wordpress -n chapter3</p>
			<p class="source-code">No resources found in chapter3 namespace.</p>
			<p>As expected, there are no more WordPress deployments available. However, there is still one <strong class="source-inline">PersistentVolumeClaim</strong> sticking around:</p>
			<p class="source-code">$ kubectl get pvc -n chapter3</p>
			<p class="source-code">NAME                       STATUS   </p>
			<p class="source-code">data-wordpress-mariadb-0   Bound</p>
			<p><strong class="source-inline">PersistentVolumeClaim</strong> was not deleted because it was created in the background by the MariaDB StatefulSet. In Kubernetes, <strong class="source-inline">PersistentVolumeClaim</strong> resources that are created by StatefulSets are not automatically removed if the StatefulSet is <a id="_idIndexMarker249"/>deleted. During the <strong class="source-inline">helm uninstall</strong> process, the StatefulSet was deleted but the associated <strong class="source-inline">PersistentVolumeClaim</strong> was not, as expected. The <strong class="source-inline">PersistentVolumeClaim</strong> command can be deleted manually with the following command:</p>
			<p class="source-code">$ kubectl delete pvc data-wordpress-mariadb-0 -n chapter3</p>
			<p>Now that we’ve finished running through an example of installing, upgrading, rolling back, and uninstalling an appli<a id="_idTextAnchor132"/>cation using Helm, let’s shut down the Kubernetes environment.</p>
			<h1 id="_idParaDest-87"><a id="_idTextAnchor133"/>Shutting down your environment</h1>
			<p>First, you can remove this chapter’s namespace by running the following command:</p>
			<p class="source-code">$ kubectl delete namespace chapter3</p>
			<p>After the <strong class="source-inline">chapter3</strong> namespace has been deleted, stop the minikube VM:</p>
			<p class="source-code">$ minikube stop</p>
			<p>This will shut down the VM but will retain its state so <a id="_idTextAnchor134"/>that you can quickly begin working again in the next exercise.</p>
			<h1 id="_idParaDest-88"><a id="_idTextAnchor135"/>Summary</h1>
			<p>In this chapter, you learned how to install a Helm chart and manage its life cycle. We began by searching Artifact Hub for a WordPress chart to install. After locating a chart, the repository containing the chart was added by following the instructions from its Artifact Hub page. We then proceeded to inspect the WordPress chart to create a set of values that overrides their defaults. These values were saved to a <strong class="source-inline">values</strong> file called <strong class="source-inline">wordpress-values.yaml</strong>, which was then provided during the installation.</p>
			<p>After the chart was installed, we used <strong class="source-inline">helm upgrade</strong> to upgrade the release by providing additional values. We then performed a rollback with <strong class="source-inline">helm rollback</strong> to restore the chart to a previous state. Finally, we removed the WordPress release at the end of the exercise with <strong class="source-inline">helm uninstall</strong>.</p>
			<p>This chapter taught you how to leverage Helm as an end user, and how to use an already-written Helm chart. In the next chapter, we will explore the concepts and structure of a Helm chart in greater detail to begin learning how to create Helm charts of our own.</p>
			<h1 id="_idParaDest-89"><a id="_idTextAnchor136"/>Further reading</h1>
			<p>To learn more about adding repositories locally, inspecting charts, and using the four life cycle commands used throughout this chapter (<strong class="source-inline">install</strong>, <strong class="source-inline">upgrade</strong>, <strong class="source-inline">rollback</strong>, and <strong class="source-inline">uninstall</strong>), go to <a href="B17979_03.xhtml#_idTextAnchor137">https://helm.sh/docs/intro/using_helm/</a>.</p>
			<h1 id="_idParaDest-90"><a id="_idTextAnchor137"/>Questions</h1>
			<ol>
				<li value="1">What is Artifact Hub? How can a user interact with it to find charts and chart repositories?</li>
				<li>What is the difference between the <strong class="source-inline">helm get</strong> and <strong class="source-inline">helm show</strong> commands?</li>
				<li>What is the difference between the <strong class="source-inline">--set</strong> and <strong class="source-inline">--values</strong> parameters in the <strong class="source-inline">helm install</strong> and <strong class="source-inline">helm upgrade</strong> commands? What are the benefits of using one over the other?</li>
				<li>What command can be used to provide the list of revisions for a release?</li>
				<li>What happens by default when you upgrade a release without providing any values? How does this behavior differ from when you do provide values for an upgrade?</li>
				<li>Imagine that you have five revisions of a release. What would the <strong class="source-inline">helm history</strong> command show after you roll back the release to <strong class="source-inline">revision 3</strong>?</li>
				<li>Imagine that you want to view all of the releases deployed to a Kubernetes namespace. What command should you run?</li>
				<li>Imagine that you run <strong class="source-inline">helm repo add</strong> to add a chart repository. What command can you run to list all of the charts in that repository?</li>
			</ol>
		</div>
	

		<div id="_idContainer049" class="Content">
			<h1 id="_idParaDest-91"><a id="_idTextAnchor138"/>Part 2: Helm Chart Development </h1>
		</div>
		<div id="_idContainer050">
			<p>You’ve deployed your first Helm chart from a public repository. Now, it’s time to develop your own Helm chart by learning the ins and outs of Helm templating and the Helm chart structure. </p>
			<p>In this part, we will cover the following topics:</p>
			<ul>
				<li><a href="B17979_04.xhtml#_idTextAnchor139"><em class="italic">Chapter 4</em></a><em class="italic">, Scaffolding a New Helm Chart</em></li>
				<li><a href="B17979_05.xhtml#_idTextAnchor154"><em class="italic">Chapter 5</em></a><em class="italic">, Helm Dependency Management	</em></li>
				<li><a href="B17979_06.xhtml#_idTextAnchor167"><em class="italic">Chapter 6</em></a><em class="italic">, Understanding Helm Templates</em></li>
				<li><a href="B17979_07.xhtml#_idTextAnchor196"><em class="italic">Chapter 7</em></a><em class="italic">, Helm Lifecycle Hooks</em></li>
				<li><a href="B17979_08.xhtml#_idTextAnchor210"><em class="italic">Chapter 8</em></a><em class="italic">, Publishing to a Helm Chart Repository</em></li>
				<li><a href="B17979_09.xhtml#_idTextAnchor222"><em class="italic">Chapter 9</em></a><em class="italic">, Testing Helm Charts</em></li>
			</ul>
		</div>
		<div>
			<div id="_idContainer051">
			</div>
		</div>
		<div>
			<div id="_idContainer052" class="Content">
			</div>
		</div>
		<div>
			<div id="_idContainer053">
			</div>
		</div>
	</body></html>