<html><head></head><body>
  <div id="_idContainer005">
    <h1 id="_idParaDest-4" class="mainHeading">Preface</h1>
    <p class="normal">Kubernetes is an open source system that automates the deployment, scaling, and management of containerized applications. If you are running more than just a few containers or want to automate the management of your containers, you need Kubernetes. This book focuses on guiding you through the advanced management of Kubernetes clusters.</p>
    <p class="normal">The book begins by explaining the fundamentals behind Kubernetes’ architecture and covers Kubernetes’ design in detail. You will discover how to run complex stateful microservices on Kubernetes, including advanced features such as horizontal pod autoscaling, rolling updates, resource quotas, and persistent storage backends. Using real-world use cases, you will explore the options for network configuration and understand how to set up, operate, secure, and troubleshoot Kubernetes clusters. Finally, you will learn about advanced topics such as custom resources, API aggregation, service meshes, and serverless computing. All the content is up to date and complies with Kubernetes 1.26. By the end of this book, you’ll know everything you need to know to go from intermediate to advanced level.</p>
    <h1 id="_idParaDest-5" class="heading-1">Who this book is for</h1>
    <p class="normal">The book is for system administrators and developers who have intermediate-level knowledge of Kubernetes and now want to master the advanced features. You should also have basic networking knowledge. This advanced-level book provides a pathway to master Kubernetes.</p>
    <h1 id="_idParaDest-6" class="heading-1">What this book covers</h1>
    <p class="normal"><em class="chapterRef">Chapter 1</em>, <em class="italic">Understanding Kubernetes Architecture</em>, in this chapter, we will build together the foundation necessary to utilize Kubernetes to its full potential. We will start by understanding what Kubernetes is, what Kubernetes isn’t, and what container orchestration means exactly. Then we will cover important Kubernetes concepts that will form the vocabulary we will use throughout the book.</p>
    <p class="normal"><em class="chapterRef">Chapter 2</em>, <em class="italic">Creating Kubernetes Clusters</em>, in this chapter, we will roll up our sleeves and build some Kubernetes clusters using minikube, KinD, and k3d. We will discuss and evaluate other tools such as kubeadm and Kubespray. We will also look into deployment environments such as local, cloud, and bare metal.</p>
    <p class="normal"><em class="chapterRef">Chapter 3</em>, <em class="italic">High Availability and Reliability</em>, in this chapter, we will dive into the topic of highly available clusters. This is a complicated topic. The Kubernetes project and the community haven’t settled on one true way to achieve high-availability nirvana. </p>
    <p class="normal">There are many aspects to highly available Kubernetes clusters, such as ensuring that the control plane can keep functioning in the face of failures, protecting the cluster state in etcd, protecting the system’s data, and recovering capacity and/or performance quickly. Different systems will have different reliability and availability requirements.</p>
    <p class="normal"><em class="chapterRef">Chapter 4</em>, <em class="italic">Securing Kubernetes</em>, in this chapter, we will explore the important topic of security. Kubernetes clusters are complicated systems composed of multiple layers of interacting components. The isolation and compartmentalization of different layers is very important when running critical applications. To secure the system and ensure proper access to resources, capabilities, and data, we must first understand the unique challenges facing Kubernetes as a general-purpose orchestration platform that runs unknown workloads. Then we can take advantage of various securities, isolation, and access control mechanisms to make sure the cluster, the applications running on it, and the data are all safe. We will discuss various best practices and when it is appropriate to use each mechanism.</p>
    <p class="normal"><em class="chapterRef">Chapter 5</em>, <em class="italic">Using Kubernetes Resources in Practice</em>, in this chapter, we will design a fictional massive-scale platform that will challenge Kubernetes’ capabilities and scalability. The Hue platform is all about creating an omniscient and omnipotent digital assistant. Hue is a digital extension of you. Hue will help you do anything, find anything, and, in many cases, will do a lot on your behalf. It will obviously need to store a lot information, integrate with many external services, respond to notifications and events, and be smart about interacting with you.</p>
    <p class="normal"><em class="chapterRef">Chapter 6</em>, <em class="italic">Managing Storage</em>, in this chapter, we’ll look at how Kubernetes manages storage. Storage is very different from computation, but at a high level, they are both resources. Kubernetes as a generic platform takes the approach of abstracting storage behind a programming model and a set of plugins for storage providers.</p>
    <p class="normal"><em class="chapterRef">Chapter 7</em>, <em class="italic">Running Stateful Applications with Kubernetes</em>, in this chapter, we will learn how to run stateful applications on Kubernetes. Kubernetes takes a lot of work out of our hands by automatically starting and restarting pods across the cluster nodes as needed, based on complex requirements and configurations such as namespaces, limits, and quotas. But when pods run storage-aware software, such as databases and queues, relocating a pod can cause the system to break.</p>
    <p class="normal"><em class="chapterRef">Chapter 8</em>, <em class="italic">Deploying and Updating Applications</em>, in this chapter, we will explore the automated pod scalability that Kubernetes provides, how it affects rolling updates, and how it interacts with quotas. We will touch on the important topic of provisioning and how to choose and manage the size of the cluster. Finally, we will go over how the Kubernetes team improved the performance of Kubernetes and how they test the limits of Kubernetes with the Kubemark tool.</p>
    <p class="normal"><em class="chapterRef">Chapter 9</em>, <em class="italic">Packaging Applications</em>, in this chapter, we are going to look into Helm, the Kubernetes package manager. Every successful and non-trivial platform must have a good packaging system. Helm was developed by Deis (acquired by Microsoft on April 4, 2017) and later contributed to the Kubernetes project directly. It became a CNCF project in 2018. We will start by understanding the motivation for Helm, its architecture, and its components.</p>
    <p class="normal"><em class="chapterRef">Chapter 10</em>, <em class="italic">Exploring Kubernetes Networking</em>, in this chapter, we will examine the important topic of networking. Kubernetes, as an orchestration platform, manages containers/pods running on different machines (physical or virtual) and requires an explicit networking model.</p>
    <p class="normal"><em class="chapterRef">Chapter 11</em>, <em class="italic">Running Kubernetes on Multiple Clusters</em>, in this chapter, we’ll take it to the next level, by running Kubernetes on multiple clouds and clusters. A Kubernetes cluster is a closely knit unit where all the components run in relative proximity and are connected by a fast network (typically a physical data center or cloud provider availability zone). This is great for many use cases, but there are several important use cases where systems need to scale beyond a single cluster.</p>
    <p class="normal"><em class="chapterRef">Chapter 12</em>, <em class="italic">Serverless Computing on Kubernetes</em>, in this chapter, we will explore the fascinating world of serverless computing in the cloud. The term “serverless” is getting a lot of attention, but it is a misnomer used to describe two different paradigms. A true serverless application runs as a web application in the user’s browser or a mobile app and only interacts with external services. The types of serverless systems we build on Kubernetes are different.</p>
    <p class="normal"><em class="chapterRef">Chapter 13</em>, <em class="italic">Monitoring Kubernetes Clusters</em>, in this chapter, we’re going to talk about how to make sure your systems are up and running and performing correctly and how to respond when they aren’t. In <em class="chapterRef">Chapter 3, </em><em class="italic">High Availability and Reliability</em>, we discussed related topics. The focus here is about knowing what’s going on in your system and what practices and tools you can use.</p>
    <p class="normal"><em class="chapterRef">Chapter 14</em>, <em class="italic">Utilizing Service Meshes</em>, in this chapter, we will learn how service meshes allow you to externalize cross-cutting concerns like monitoring and observability from the application code. The service mesh is a true paradigm shift in the way you can design, evolve, and operate distributed systems on Kubernetes. I like to think of it as aspect-oriented programming for cloud-native distributed systems.</p>
    <p class="normal"><em class="chapterRef">Chapter 15</em>, <em class="italic">Extending Kubernetes</em>, in this chapter, we will dig deep into the guts of Kubernetes. We will start with the Kubernetes API and learn how to work with Kubernetes programmatically via direct access to the API, the Go client, and automating kubectl. Then we’ll look into extending the Kubernetes API with custom resources. The last part is all about the various plugins Kubernetes supports. Many aspects of Kubernetes operation are modular and designed for extension. We will examine the API aggregation layer and several types of plugins, such as custom schedulers, authorization, admission control, custom metrics, and volumes. Finally, we’ll look into extending kubectl and adding your own commands.</p>
    <p class="normal"><em class="chapterRef">Chapter 16</em>, <em class="italic">Governing Kubernetes</em>, in this chapter, we will learn about the growing role of Kubernetes in large enterprise organizations, as well as what governance is and how it is applied in Kubernetes. We will look at policy engines, review some popular policy engines, and then dive deep into Kyverno.</p>
    <p class="normal"><em class="chapterRef">Chapter 17</em>, <em class="italic">Running Kubernetes in Production</em>, in this chapter, we will turn our attention to the overall management of Kubernetes in production. The focus will be on running multiple managed Kubernetes clusters in the cloud. There are so many different aspects to running Kubernetes in production. We will focus mostly on the compute side, which is the most fundamental and dominant.</p>
    <p class="normal"><em class="chapterRef">Chapter 18</em>, <em class="italic">The Future of Kubernetes</em>, in this chapter, we’ll look at the future of Kubernetes from multiple angles. We’ll start with the momentum of Kubernetes since its inception, across dimensions such as community, ecosystem, and mindshare. Spoiler alert: Kubernetes won the container orchestration wars by a landslide. As Kubernetes grows and matures, the battle lines shift from beating competitors to fighting against its own complexity. Usability, tooling, and education will play a major role as container orchestration is still new, fast-moving, and not a well-understood domain. Then we will take a look at some very interesting patterns and trends.</p>
    <h1 id="_idParaDest-7" class="heading-1">To get the most out of this book</h1>
    <p class="normal">To follow the examples in each chapter, you need a recent version of Docker and Kubernetes installed onto your machine, ideally Kubernetes 1.18. If your operating system is Windows 10 Professional, you can enable hypervisor mode; otherwise, you will need to install VirtualBox and use a Linux guest OS. If you use macOS then you’re good to go.</p>
    <h2 id="_idParaDest-8" class="heading-2">Download the example code files</h2>
    <p class="normal">The code bundle for the book is hosted on GitHub at <a href="https://github.com/PacktPublishing/Mastering-Kubernetes-4th-Edition"><span class="url">https://github.com/PacktPublishing/Mastering-Kubernetes-4th-Edition</span></a>. We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/"><span class="url">https://github.com/PacktPublishing/</span></a>. Check them out!</p>
    <h2 id="_idParaDest-9" class="heading-2">Download the color images</h2>
    <p class="normal">We also provide a PDF file that has color images of the screenshots/diagrams used in this book. You can download it here: <a href="https://packt.link/gXMql"><span class="url">https://packt.link/gXMql</span></a>.</p>
    <h2 id="_idParaDest-10" class="heading-2">Conventions used</h2>
    <p class="normal">There are a number of text conventions used throughout this book.</p>
    <p class="normal"><code class="inlineCode">CodeInText</code>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. For example: “If you chose HyperKit instead of VirtualBox, you need to add the flag <code class="inlineCode">--vm-driver=hyperkit</code> when starting the cluster.”</p>
    <p class="normal">A block of code is set as follows:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">"</span><span class="hljs-string">etcd.database.coreos.com/v1beta2"</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">"EtcdCluster"</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">"example-etcd-cluster"</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">"</span><span class="hljs-string">3.2.13"</span>
</code></pre>
    <p class="normal">When we wish to draw your attention to a particular part of a code block, the relevant lines or items are highlighted:</p>
    <pre class="programlisting code"><code class="hljs-code"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">"etcd.database.coreos.com/v1beta2"</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">"EtcdCluster"</span>
<span class="hljs-attr">metadata:</span>
  <span class="code-highlight"><strong class="hljs-attr-slc">name:</strong><strong class="hljs-slc"> </strong><strong class="hljs-string-slc">"example-etcd-cluster"</strong></span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">size:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">version:</span> <span class="hljs-string">"3.2.13"</span>
</code></pre>
    <p class="normal">Any command-line input or output is written as follows:</p>
    <pre class="programlisting con"><code class="hljs-con"><span class="hljs-con-meta">$ </span>k get pods
NAME                   READY   STATUS    RESTARTS   AGE
echo-855975f9c-r6kj8   1/1     Running   0          2m11s
</code></pre>
    <p class="normal"><strong class="screenText">Bold</strong>: Indicates a new term, an important word, or words that you see on the screen. For instance, words in menus or dialog boxes appear in the text like this. For example: “Select <strong class="screenText">System info</strong> from the <strong class="screenText">Administration</strong> panel.”</p>
    <div class="note">
      <p class="normal">Warnings or important notes appear like this.</p>
    </div>
    <div class="packt_tip">
      <p class="normal">Tips and tricks appear like this.</p>
    </div>
    <h1 id="_idParaDest-11" class="heading-1">Get in touch</h1>
    <p class="normal">Feedback from our readers is always welcome.</p>
    <p class="normal"><strong class="keyWord">General feedback</strong>: Email <code class="inlineCode">feedback@packtpub.com</code> and mention the book’s title in the subject of your message. If you have questions about any aspect of this book, please email us at <code class="inlineCode">questions@packtpub.com</code>.</p>
    <p class="normal"><strong class="keyWord">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you reported this to us. Please visit <a href="http://www.packtpub.com/submit-errata"><span class="url">http://www.packtpub.com/submit-errata</span></a>, click <strong class="keyWord">Submit Errata</strong>, and fill in the form.</p>
    <p class="normal"><strong class="keyWord">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <code class="inlineCode">copyright@packtpub.com</code> with a link to the material.</p>
    <p class="normal"><strong class="keyWord">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com"><span class="url">http://authors.packtpub.com</span></a>.</p>
    <h1 id="_idParaDest-12" class="heading-1">Share your thoughts</h1>
    <p class="normal">Once you’ve read <em class="italic">Mastering Kubernetes, Fourth Edition</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1804611395"><span class="url">click here to go straight to the Amazon review page</span></a> for this book and share your feedback.</p>
    <p class="normal">Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
  </div>
  <p class="eop"/>
  <div id="_idContainer007" class="Basic-Text-Frame">
    <h1 id="_idParaDest-13" class="heading-1">Download a free PDF copy of this book</h1>
    <p class="normal">Thanks for purchasing this book!</p>
    <p class="normal">Do you like to read on the go but are unable to carry your print books everywhere? Is your eBook purchase not compatible with the device of your choice?</p>
    <p class="normal">Don’t worry, now with every Packt book you get a DRM-free PDF version of that book at no cost.</p>
    <p class="normal">Read anywhere, any place, on any device. Search, copy, and paste code from your favorite technical books directly into your application. </p>
    <p class="normal">The perks don’t stop there, you can get exclusive access to discounts, newsletters, and great free content in your inbox daily</p>
    <p class="normal">Follow these simple steps to get the benefits:</p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="1">Scan the QR code or visit the link below</li>
    </ol>
    <figure class="mediaobject"><em class="italic"><img src="../Images/B18998_QR_Free_PDF.png" alt="Qr code  Description automatically generated"/></em></figure>
    <p class="packt_figref"><a href="https://packt.link/free-ebook/9781804611395"><span class="url">https://packt.link/free-ebook/9781804611395</span></a></p>
    <ol class="numberedList" style="list-style-type: decimal;">
      <li class="numberedList" value="2">Submit your proof of purchase</li>
      <li class="numberedList">That’s it! We’ll send your free PDF and other benefits to your email directly</li>
    </ol>
  </div>
</body></html>