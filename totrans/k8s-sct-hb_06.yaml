- en: '6'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '6'
- en: Disaster Recovery and Backups
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 灾难恢复和备份
- en: In this chapter, we delve into the world of disaster recovery and backups for
    Kubernetes Secrets. The importance of robust backup and recovery strategies cannot
    be overstated, especially given the sensitive nature of Secrets and the demands
    of data integrity and availability. By the end of this chapter, you’ll understand
    the critical importance of disaster recovery and backups in Secrets management,
    considering service availability, potential security implications, and stringent
    regulatory requirements. Moreover, you’ll be equipped to formulate a disaster
    recovery plan that aligns with your organization’s infrastructure and strategy,
    enhancing your capability to counteract potential disasters and challenges.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将深入探讨 Kubernetes Secrets 的灾难恢复和备份。考虑到 Secrets 的敏感性质以及数据完整性和可用性的需求，强大的备份和恢复策略的重要性不容忽视。本章结束时，你将理解灾难恢复和备份在
    Secrets 管理中的关键作用，涵盖服务可用性、潜在的安全影响以及严格的合规要求。此外，你还将能够制定符合组织基础设施和战略的灾难恢复计划，提升应对潜在灾难和挑战的能力。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Why disaster recovery and backups matter
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为什么灾难恢复和备份很重要
- en: Backup strategies
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份策略
- en: Security in backups
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 备份中的安全性
- en: Designing a disaster recovery plan
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设计灾难恢复计划
- en: By the end of this chapter, you’ll possess a deep understanding of the best
    practices, strategies, and tools available to back up your Kubernetes Secrets
    against disasters. These insights will position you to ensure the security, availability,
    and resilience of your Secrets, establishing a foundation for a more secure and
    efficient Kubernetes environment.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 本章结束时，你将深入理解最佳实践、策略和工具，能够有效地保护 Kubernetes Secrets 免受灾难影响。这些见解将帮助你确保 Secrets
    的安全性、可用性和弹性，为构建一个更安全高效的 Kubernetes 环境奠定基础。
- en: Technical requirements
  id: totrans-9
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 技术要求
- en: In this chapter, we will delve into backup and recovery strategies for Kubernetes
    Secrets, a critical element of resilient applications. To fully understand and
    execute the concepts discussed, we’ll be working with a set of industry-standard
    tools. These tools represent a common tech stack used in real-world scenarios,
    and understanding how to utilize them for Secrets management will enhance your
    ability to design a robust, secure Secrets system.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将深入探讨 Kubernetes Secrets 的备份和恢复策略，这是构建弹性应用程序的重要组成部分。为了全面理解和执行所讨论的概念，我们将使用一套行业标准工具。这些工具代表了现实场景中常用的技术栈，了解如何利用它们进行
    Secrets 管理将增强你设计一个强大、安全的 Secrets 系统的能力。
- en: 'Here are the tools we’ll need:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是我们需要的工具：
- en: '**minikube** ([https://minikube.sigs.k8s.io/docs/):](https://minikube.sigs.k8s.io/docs/):)
    This tool allows us to run a single-node Kubernetes cluster on our personal computers,
    making it perfect for learning and development purposes'
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**minikube** ([https://minikube.sigs.k8s.io/docs/):](https://minikube.sigs.k8s.io/docs/):)
    这个工具允许我们在个人计算机上运行单节点 Kubernetes 集群，非常适合学习和开发用途'
- en: '**HashiCorp Vault** ([https://www.vaultproject.io/):](https://www.vaultproject.io/):)
    We will use Vault, a secure external Secrets management system, to demonstrate
    how to back up and restore Secrets'
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**HashiCorp Vault** ([https://www.vaultproject.io/):](https://www.vaultproject.io/):)
    我们将使用 Vault，这是一个安全的外部 Secrets 管理系统，演示如何备份和恢复 Secrets'
- en: '**Helm** ([https://helm.sh/):](https://helm.sh/):) Helm is a package manager
    for Kubernetes that we’ll use for deploying applications and services'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Helm** ([https://helm.sh/):](https://helm.sh/):) Helm 是 Kubernetes 的包管理工具，我们将用它来部署应用程序和服务'
- en: Introduction to Secrets disaster recovery and backups
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Secrets 灾难恢复和备份简介
- en: The Kubernetes ecosystem offers various possibilities for managing sensitive
    data and credential info, commonly known as *Secrets*. In this dynamic and complex
    environment, the concept of disaster recovery and backups has become extremely
    critical. When speaking of backups, it could mean multiple things, depending on
    the architecture of the Secrets management.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes 生态系统提供了多种管理敏感数据和凭证信息的可能性，这些通常被称为 *Secrets*。在这个动态复杂的环境中，灾难恢复和备份的概念变得极为重要。在谈到备份时，根据
    Secrets 管理架构的不同，可能涉及多种含义。
- en: One approach to Secrets management in Kubernetes is using Kubernetes’ built-in
    *key-value store*. All the cluster data, including Secrets, are stored in etcd.
    If a disaster occurs, a backup of etcd can help restore the entire cluster state,
    including the Secrets. However, the restoration process in this case could be
    complex and might have limitations, especially when considering the sensitive
    nature of Secrets.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kubernetes 中管理 Secrets 的一种方法是使用 Kubernetes 内置的 *键值存储*。所有集群数据，包括 Secrets，都存储在
    etcd 中。如果发生灾难，etcd 的备份可以帮助恢复整个集群的状态，包括 Secrets。然而，在这种情况下，恢复过程可能会复杂，并且可能存在一些限制，尤其是在考虑到
    Secrets 的敏感性质时。
- en: Another approach is to use a centralized Secrets management system, such as
    *Hashicorp Vault*, which can interface with Kubernetes. In such systems, Secrets
    aren’t stored in etcd but in the central store that is secured and managed by
    the respective tool. In this case, the backup strategy would involve backing up
    the central store instead of etcd. This approach provides more granular control
    over Secrets and often includes sophisticated features for disaster recovery.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 另一种方法是使用集中式的 Secrets 管理系统，如 *Hashicorp Vault*，它可以与 Kubernetes 进行接口。在这种系统中，Secrets
    不会存储在 etcd 中，而是存储在由相应工具保护和管理的中央存储中。在这种情况下，备份策略将涉及备份中央存储而不是 etcd。此方法提供了对 Secrets
    更精细的控制，通常包括用于灾难恢复的复杂功能。
- en: Regardless of the approach chosen for Secrets management, the essence of backups
    remains the same – a way to restore the Kubernetes system to a functioning state
    in case of a disaster. Backups should be comprehensive, regularly updated, and
    securely stored to ensure they serve their purpose when required.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 无论选择哪种 Secrets 管理方法，备份的本质都是相同的——在灾难发生时恢复 Kubernetes 系统到正常工作状态的方法。备份应该是全面的、定期更新的，并且安全存储，以确保在需要时能发挥作用。
- en: Importance of disaster recovery and backups for Secrets management
  id: totrans-20
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Secrets 管理中灾难恢复和备份的重要性
- en: Secrets are often considered tier-0 services in any environment. This denotes
    their utmost importance, as Secrets such as API keys, passwords, tokens, certificates,
    and so on act as the linchpin for service interactions and secure communications
    within a Kubernetes cluster. If they get lost or compromised, the impact can be
    significant and wide-ranging.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: Secrets 在任何环境中通常被视为 tier-0 服务。这意味着它们的重要性至关重要，因为像 API 密钥、密码、令牌、证书等 Secrets 在
    Kubernetes 集群内的服务交互和安全通信中起着关键作用。如果它们丢失或泄露，影响可能是显著的并且广泛的。
- en: Service availability
  id: totrans-22
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 服务可用性
- en: Firstly, user applications running on the Kubernetes platform are highly dependent
    on these Secrets for their operation. They require Secrets to connect to databases,
    authenticate against internal or external services, interface with third-party
    APIs, and so on. If Secrets management systems were to suffer a failure or Secrets
    were lost, these applications may not be able to function properly. This could
    lead to a complete halt of operations until the Secrets are restored, thereby
    causing significant business disruption. Without a disaster recovery plan specifically
    tailored for Secrets, the restoration process might take longer than acceptable,
    leading to extended outages. In certain cases, this delay can result in significant
    business and financial impacts.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，运行在 Kubernetes 平台上的用户应用程序高度依赖这些 Secrets 来进行操作。它们需要 Secrets 来连接数据库、对内部或外部服务进行身份验证、与第三方
    API 接口等。如果 Secrets 管理系统发生故障或 Secrets 丢失，这些应用程序可能无法正常工作。这可能导致操作完全停滞，直到 Secrets
    恢复，从而造成严重的业务中断。如果没有专门为 Secrets 定制的灾难恢复计划，恢复过程可能会比可接受的时间更长，导致延长的停机时间。在某些情况下，这种延迟可能会导致显著的业务和财务影响。
- en: Note
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 注意事项
- en: The external secret store for Kubernetes may still create Kubernetes native
    secret resources and can be consumed by applications. In that case, the secret
    store failure should not directly impact service availability in a short period
    of time.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes 的外部秘密存储可能仍然会创建 Kubernetes 本地的秘密资源，并且可以被应用程序使用。在这种情况下，秘密存储故障不应直接影响服务的短期可用性。
- en: Recreation challenges
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 娱乐挑战
- en: Without suitable backups, Secrets can be permanently lost in a catastrophic
    event, such as a system crash or a disaster. Recreating Secrets can often be a
    challenging process. In many cases, these Secrets can’t simply be regenerated
    without going through additional complex procedures. For instance, Secrets obtained
    from third-party vendors usually require undergoing certain formalities and security
    checks before they are reissued. Some Secrets may be based on specific hardware
    or timed information and can’t be recreated easily. This emphasizes the necessity
    of having a reliable backup in place, enabling quick restoration of Secrets in
    case of loss.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 如果没有合适的备份，秘密可能会在灾难性事件中永久丧失，比如系统崩溃或灾难。重新创建秘密往往是一个具有挑战性的过程。在许多情况下，这些秘密不能简单地重新生成，而必须通过额外的复杂程序。例如，从第三方供应商获得的秘密通常需要经过某些手续和安全检查才能重新发行。有些秘密可能基于特定硬件或定时信息，无法轻易重建。这突出了拥有可靠备份的必要性，以便在丢失时能够快速恢复秘密。
- en: Security implications
  id: totrans-28
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 安全影响
- en: Furthermore, a robust backup and disaster recovery strategy is critical from
    a security perspective. In the unfortunate event of a security breach where Secrets
    are compromised, it is paramount to have the ability to revert and dynamically
    update Secrets or rotate them based on a short **time to live** (**TTL**) to a
    secure state using a trusted backup. This can minimize the exposure window and
    potential damage caused by the misuse of compromised Secrets.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，从安全角度来看，一个强大的备份和灾难恢复策略至关重要。在发生安全漏洞，秘密被泄露的情况下，能够通过信任的备份恢复并动态更新秘密，或者基于短**有效期**（**TTL**）将其旋转至安全状态，是至关重要的。这可以最大限度地减少暴露窗口和由泄露秘密的滥用可能造成的损害。
- en: Regulatory requirements
  id: totrans-30
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 监管要求
- en: Lastly, in many industries, the ability to recover critical systems (which would
    include Secrets management) is not just good practice but a regulatory requirement.
    Non-compliance can lead to heavy fines, not to mention the reputational damage
    that can result from a serious outage or data loss.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，在许多行业中，恢复关键系统的能力（包括秘密管理）不仅是良好的实践，还是监管要求。未能遵守规定可能导致巨额罚款，更不用说由严重故障或数据丢失引起的声誉损害。
- en: Practical case studies – the importance of backup Secrets
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 实际案例研究 – 备份秘密的重要性
- en: Inadequate secret backup strategies can cause security risks and vulnerabilities.
    Not managing Secrets properly can give rise to both availability and security
    disruptions. To understand the importance of backing up, let’s delve into some
    practical case studies.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 不充分的秘密备份策略可能会导致安全风险和漏洞。没有妥善管理秘密可能会引发可用性和安全性方面的问题。为了理解备份的重要性，让我们深入探讨一些实际的案例研究。
- en: Case study 1 – a service disruption due to a lack of proper backups
  id: totrans-34
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 案例研究 1 – 由于缺乏适当的备份导致的服务中断
- en: Imagine a fast-growing e-commerce company that relies heavily on Kubernetes
    for managing its application deployments. It faces a significant system failure
    that crashes its Kubernetes clusters. While it manages to restore most of its
    services from backups, it realizes that the secret stored in Kubernetes (such
    as API keys for payment gateways and database credentials) were not backed up
    separately.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一家依赖Kubernetes来管理应用部署的快速增长的电子商务公司。它遭遇了一个严重的系统故障，导致其Kubernetes集群崩溃。尽管它设法从备份中恢复了大部分服务，但它意识到存储在Kubernetes中的秘密（如支付网关的API密钥和数据库凭证）并未单独备份。
- en: As a result, the e-commerce platform goes offline, resulting in thousands of
    transactions being halted. It takes several days for the company to regenerate
    Secrets, reconfigure them, and get the platform back online. In the meantime,
    it suffers significant financial losses due to lost sales and a decline in customer
    trust.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 结果，电子商务平台下线，导致成千上万的交易被中断。公司需要几天时间才能重新生成秘密、重新配置它们并让平台重新上线。在此期间，由于销售损失和客户信任下降，它遭受了重大财务损失。
- en: Case study 2 – a security breach due to inadequate backup security
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 案例研究 2 – 由于备份安全不足导致的安全漏洞
- en: In another scenario, consider a global tech SaaS company that used a centralized
    Secrets management system integrated with its Kubernetes clusters. It had a robust
    backup strategy in place, but the backups themselves were not encrypted or secured
    adequately.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 在另一个场景中，考虑一家全球技术SaaS公司，它使用了一个与其Kubernetes集群集成的集中式秘密管理系统。虽然公司有一个强大的备份策略，但备份本身并未得到加密或适当的保护。
- en: In 2022, a group of cybercriminals managed to breach its backup store and gain
    access to the unencrypted Secrets. The hackers used these Secrets to perform unauthorized
    actions, from data theft to injecting malicious code into the company’s services.
    The incident led to a massive security breach, damaging the company’s reputation
    and causing significant financial harm.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 在2022年，一群网络犯罪分子设法突破了其备份存储并获取了未加密的机密信息。这些黑客利用这些机密信息进行未经授权的操作，从数据盗窃到向公司服务注入恶意代码。此次事件导致了大规模的安全漏洞，严重损害了公司的声誉，并造成了显著的财务损失。
- en: Even though the company had a backup strategy in place, the lack of access control,
    and the non-existing encryption and security measures for the backups themselves,
    resulted in a severe incident. This highlights the need for proper security measures
    in not just managing Secrets but also backing them up.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管公司已经制定了备份策略，但由于缺乏访问控制以及备份本身没有加密和安全措施，导致了严重的事件。这突显了在管理机密信息的同时，对备份过程进行适当安全防护的必要性。
- en: 'In a Kubernetes environment, backup and disaster recovery strategies are integral
    components of Secrets management. By quickly restoring lost or inaccessible Secrets
    from backups, applications can resume operations with minimal disruption in the
    event of a system failure or disaster. Also, security is enhanced: in case of
    security breaches, the system can revert to a secure state using a trusted backup,
    minimizing potential damage. A robust backup and disaster recovery strategy mitigates
    risks and ensures the availability, integrity, and confidentiality of Secrets,
    playing a vital role in sustaining overall system operations.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在Kubernetes环境中，备份和灾难恢复策略是机密管理的关键组成部分。通过从备份中快速恢复丢失或无法访问的机密信息，应用程序可以在系统故障或灾难发生时，最小化干扰，迅速恢复正常运行。此外，安全性得到了增强：在发生安全漏洞的情况下，系统可以通过可信的备份恢复到安全状态，从而最小化潜在的损害。一个健全的备份和灾难恢复策略能够降低风险，确保机密信息的可用性、完整性和保密性，对维持整体系统的运营至关重要。
- en: We shall proceed to the next section and get to know more about backup strategies
    for Kubernetes Secrets.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将继续下一部分，深入了解Kubernetes Secrets的备份策略。
- en: Backup strategies for Kubernetes Secrets
  id: totrans-43
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Kubernetes Secrets的备份策略
- en: Within Kubernetes, Secrets management involves dealing with highly sensitive
    data such as API tokens, certificates, keys, and more. Despite the relatively
    small volume of such data – a large transportation company might only manage less
    than a gigabyte of Secrets data – the sensitivity and value of this data are substantial.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 在Kubernetes中，机密管理涉及处理高度敏感的数据，如API令牌、证书、密钥等。尽管这些数据的体量相对较小——例如，一个大型运输公司可能管理不到一GB的机密数据——但这些数据的敏感性和价值却非常巨大。
- en: Owing to the critical importance of Secrets, it’s crucial to have robust backup
    strategies that minimize the possibility of data loss during backup processes.
    It’s worth noting, however, that achieving zero data loss can be challenging,
    and mitigating strategies should aim to reduce data loss to the barest minimum.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 鉴于机密信息的至关重要性，拥有健全的备份策略至关重要，以最小化在备份过程中数据丢失的可能性。然而，值得注意的是，完全避免数据丢失可能具有挑战性，因此减轻策略应尽量将数据丢失降到最低。
- en: An important distinction to make is that backups should not be conflated with
    audit logs. While backup strategies focus on preserving the value of the data
    itself, audit logs are geared toward tracking who accessed what data and providing
    a chronological record of events for accountability and traceability. In this
    section, we explore various backup strategies and highlight their advantages and
    potential challenges.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 需要做出一个重要的区分，即备份不应与审计日志混淆。备份策略专注于保持数据本身的价值，而审计日志则用于追踪谁访问了哪些数据，并提供一份事件的时间顺序记录，以确保问责制和可追溯性。在本节中，我们将探讨各种备份策略，并重点介绍它们的优势及潜在挑战。
- en: Geo-replication/cross-region replication
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 地理复制/跨区域复制
- en: '**Geo-replication** ensures that data is available across different geographical
    locations. There are two primary modes to consider:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**地理复制**确保数据在不同地理位置之间可用。主要有两种模式需要考虑：'
- en: '**Active-active replication**: In this model, data is written simultaneously
    to multiple regions. It offers high availability and is suited for applications
    with a global user base. It ensures fast data recovery and minimal data loss during
    a disaster.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主动-主动复制**：在这种模式下，数据同时写入多个区域。它提供了高可用性，适用于拥有全球用户群的应用程序。它确保在灾难发生时能够快速恢复数据，并将数据丢失降到最低。'
- en: '**Active-DR (disaster recovery) replication**: Here, one region is primarily
    active while the other is a standby DR region. In case of a failure in the active
    region, the DR region is activated. This strategy is more cost-effective than
    active-active replication, but might result in slightly higher data loss depending
    on the synchronization frequency.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**主动灾难恢复（DR）复制**：在这种方式下，一个区域是主要活动区域，另一个是备用灾难恢复区域。如果活动区域发生故障，灾难恢复区域会被激活。与主动-主动复制相比，这种策略更具成本效益，但根据同步频率，可能会导致稍微更高的数据丢失。'
- en: Geo-replication in Secrets management systems comes with several advantages,
    such as geographic redundancy, which offers protection against region-specific
    disasters, and improved accessibility, allowing users to access data from the
    nearest region, thereby improving latency. However, despite its benefits, geo-replication
    also presents challenges. Managing data across multiple regions can introduce
    complexity, and the cost of replicating data, especially in the active-active
    model, can be significant.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 在机密管理系统中，地理复制有几个优势，例如地理冗余，它可以防止特定区域的灾难，并提高可访问性，允许用户从最近的区域访问数据，从而改善延迟。然而，尽管有这些好处，地理复制也带来了挑战。跨多个区域管理数据可能会增加复杂性，特别是在主动-主动模式下，数据复制的成本可能相当高。
- en: Point-in-time snapshots to immutable storage
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 时间点快照到不可变存储
- en: 'This strategy involves taking snapshots of Secrets at specific intervals and
    storing them in an immutable storage system. This method offers flexibility in
    terms of the type of backup:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 该策略包括在特定时间间隔拍摄机密快照，并将其存储在不可变存储系统中。这种方法在备份类型上提供了灵活性：
- en: '**Full backup**: This captures the entirety of the dataset each time a backup
    is made. While it’s the most comprehensive approach, it can be resource-intensive
    and costly if done frequently, as it backs up every single piece of data every
    time.'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**完全备份**：每次备份时都会捕获整个数据集。尽管这是最全面的方法，但如果频繁进行，会消耗大量资源并增加成本，因为每次备份时都会备份所有数据。'
- en: '**Incremental backup**: Unlike a full backup, an incremental approach only
    backs up the data that has changed since the previous backup. This means that
    if users were to restore from an incremental backup, users need the most recent
    full backup and all subsequent incremental backups. It’s more storage-efficient
    than a full backup when regularly backing up, but the restore process can be more
    intricate.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**增量备份**：与完全备份不同，增量备份方法仅备份自上次备份以来发生变化的数据。这意味着，如果用户从增量备份恢复数据，用户需要最新的完全备份和所有后续的增量备份。它比完全备份在定期备份时更节省存储空间，但恢复过程可能更复杂。'
- en: '**Differential backup**: This method backs up all changes made since the previous
    full backup, regardless of any incremental backups that might have been made in
    the interim. It strikes a balance between the previous two methods. Restoring
    is simpler than with incremental backups since users only need the most recent
    full backup and the latest differential backup. However, the amount of data stored
    can grow larger than incremental backups over time.'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**差异备份**：这种方法备份自上次完全备份以来所有的更改，无论在此期间是否进行了增量备份。它在前两种方法之间达到了平衡。恢复比增量备份更简单，因为用户只需要最新的完全备份和最新的差异备份。然而，随着时间的推移，存储的数据量可能会比增量备份更大。'
- en: Point-in-time snapshots in data management come with notable advantages, such
    as data integrity, where immutable storage ensures that once data is written,
    it cannot be altered, offering protection against malicious attacks or accidental
    deletions. Additionally, they allow for the restoration of data from any previous
    point in time. However, adopting a point-in-time approach also presents challenges.
    The granularity of this method means the recovery point is limited to the latest
    snapshot, which may result in some data loss. Moreover, maintaining multiple snapshots
    over time can significantly increase storage costs.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 数据管理中的时间点快照具有显著的优势，例如数据完整性，其中不可变存储确保一旦数据写入后，无法更改，从而防止恶意攻击或意外删除。此外，它们允许从任何先前的时间点恢复数据。然而，采用时间点方法也带来了挑战。该方法的粒度意味着恢复点仅限于最新的快照，这可能导致部分数据丢失。此外，随着时间推移，维护多个快照会显著增加存储成本。
- en: Writing to multiple places during transit
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在传输过程中写入多个位置
- en: Before the secret data reaches its final storage destination, it’s first encrypted
    and written to an event stream (such as Kafka or a Pub/Sub system). This data
    is then batch-persisted into immutable storage. Adopting a real-time event streaming
    approach to Secrets management offers distinct advantages, such as redundancy,
    where multiple copies of data ensure high availability, and event-driven backup,
    which guarantees that all changes to Secrets are instantly backed up. However,
    this approach also brings its own set of challenges. Managing real-time event
    streams and batch processes can be complex, and there’s a potential for data duplication,
    which can lead to increased storage costs due to storing data in multiple locations.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在秘密数据到达最终存储目的地之前，它会首先被加密并写入事件流（例如 Kafka 或 Pub/Sub 系统）。然后，这些数据会被批量持久化到不可变存储中。采用实时事件流的方式来管理秘密数据具有明显的优势，例如冗余，其中数据的多个副本确保了高可用性，以及事件驱动的备份，这确保所有对秘密的更改都能即时备份。然而，这种方法也带来了一些挑战。管理实时事件流和批处理过程可能比较复杂，并且存在数据重复的潜在风险，这可能导致由于数据存储在多个位置而增加存储成本。
- en: Secrets versioning and backup considerations
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 秘密版本控制和备份考虑事项
- en: '**Secrets versioning** is a unique challenge in data management, especially
    considering the sensitive nature of Secrets and the frequency with which they
    might change. Here are some considerations and strategies surrounding the versioning
    of Secrets during backups:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**秘密版本控制**是在数据管理中面临的独特挑战，尤其考虑到秘密数据的敏感性以及它们可能频繁变化的特性。以下是关于在备份过程中对秘密进行版本控制的一些考虑因素和策略：'
- en: '**The value** **of versioning**:'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**版本控制的价值**：'
- en: '**Audit and compliance**: Keeping multiple versions of Secrets allows for better
    auditing and compliance. It provides an immutable history of changes that can
    be invaluable in tracking unauthorized modifications or understanding changes.'
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审计与合规**：保留多个版本的秘密可以帮助更好的审计和合规性。它提供了不可变的变更历史，这在追踪未经授权的修改或理解变更时具有重要价值。'
- en: '**Rollbacks**: In the event of a misconfiguration or an error in a new secret
    value, having previous versions allows for quick rollbacks.'
  id: totrans-64
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**回滚**：如果发生配置错误或新的秘密值出现问题，保留以前的版本可以快速进行回滚。'
- en: '**Backup of all versions**: By implementing a comprehensive backup strategy
    that includes all versions of a secret, users can ensure a complete historical
    record. This approach is particularly valuable in environments where maintaining
    a detailed audit trail is essential for compliance purposes. The primary drawback
    of this method is the increased storage overhead. However, considering that Secrets
    are usually small in size, this additional storage requirement might be negligible
    for most.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**备份所有版本**：通过实施包括所有版本的全面备份策略，用户可以确保完整的历史记录。这种方法在那些需要保持详细审计记录以符合合规要求的环境中特别有价值。这种方法的主要缺点是增加了存储开销。然而，考虑到秘密数据通常比较小，这额外的存储需求对于大多数情况下来说可能是微不足道的。'
- en: '**Backup of only the latest version**: Adopting a storage-efficient approach
    minimizes storage requirements and simplifies the backup process, but it also
    comes with the risk of potential loss of history. If only the latest version of
    data is backed up, all previous versions and the associated change history would
    be lost in the event of a data loss incident. This compromise might be acceptable
    in environments where historical data isn’t deemed crucial.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**仅备份最新版本**：采用高效的存储策略可以减少存储需求并简化备份过程，但它也带来了可能丢失历史记录的风险。如果只备份最新版本的数据，那么所有先前的版本及其变更历史将在数据丢失事件中丢失。如果历史数据不被认为是至关重要的，这种妥协可能在某些环境中是可以接受的。'
- en: '**Hybrid approach**: Selective versioning allows users to tailor their backup
    strategy depending on the importance of a secret, opting to keep multiple versions
    of some Secrets while maintaining only the latest version of others. Additionally,
    implementing retention policies can further refine this process, where older versions
    are either archived or deleted after a set period or upon reaching a specific
    version count.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**混合方法**：选择性版本控制允许用户根据秘密的优先级定制备份策略，选择保留某些秘密的多个版本，同时只保留其他秘密的最新版本。此外，实施保留策略可以进一步细化这一过程，在特定时间段后或达到某个版本数量时，将较旧版本归档或删除。'
- en: '**Metadata and annotations**: These are used to track information related to
    Secrets, serving purposes such as tracking, auditing, and usage analysis. During
    backups, whether users are archiving the most recent or only selective versions,
    it’s advantageous to back up the associated metadata and annotations. These backups
    provide essential context and additional data during the recovery process. Metadata
    and annotations can offer valuable context and insights for tracking, auditing,
    and analysis, and should be included in backups for effective recovery.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**元数据和注释**：这些用于跟踪与Secrets相关的信息，具有跟踪、审计和使用分析等功能。在备份过程中，无论用户是归档最新版本还是仅归档特定版本，备份相关的元数据和注释都是有益的。这些备份在恢复过程中提供了必要的上下文和额外数据。元数据和注释能够提供有价值的上下文和见解，供跟踪、审计和分析使用，因此应包括在备份中，以确保有效的恢复。'
- en: In summary, managing secret versions efficiently balances audit compliance and
    storage concerns. Strategies range from comprehensive backups of all versions
    for detailed records to selective or efficient approaches for specific needs,
    always considering the inclusion of metadata for effective recovery.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 总之，高效地管理秘密版本需要平衡审计合规性和存储问题。从全面备份所有版本以详细记录到针对特定需求的选择性或高效方法，策略各异，但始终需要考虑将元数据纳入备份，以确保有效的恢复。
- en: Choosing a backup strategy
  id: totrans-70
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 选择备份策略
- en: 'Designing a robust backup strategy for Kubernetes Secrets is essential. An
    effective strategy protects Secrets in the face of a disaster, helping to prevent
    service disruptions and potential security vulnerabilities. The choice of strategy
    primarily depends on where the Secrets are stored. This section will outline factors
    to consider when deciding on a backup strategy, divided into shared considerations
    and storage-specific factors:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为Kubernetes Secrets设计一个强健的备份策略至关重要。一项有效的策略能够在灾难发生时保护Secrets，帮助防止服务中断和潜在的安全漏洞。策略的选择主要取决于Secrets的存储位置。本节将概述在决定备份策略时需要考虑的因素，分为共享考虑因素和存储特定因素：
- en: '**Granularity of backup**: The ability to restore individual Secrets without
    affecting others can be crucial in certain situations.'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**备份粒度**：在某些情况下，能够单独恢复特定的Secrets而不影响其他Secrets是至关重要的。'
- en: '**Encryption**: It’s vital to ensure that backup data is encrypted, which can
    prevent unauthorized access and potential data breaches.'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加密**：确保备份数据加密至关重要，这可以防止未授权访问和潜在的数据泄露。'
- en: '**Access control**: Implement strict access controls. Limit access to the backups
    to only those who absolutely need it, such as a specific admin group.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**访问控制**：实施严格的访问控制。将备份的访问权限限制为仅对那些绝对需要访问的人员，如特定的管理员组。'
- en: '**Regulatory compliance**: Some regulations, such as the **General Data Protection
    Regulation** (**GDPR**) or the **Health Insurance Portability and Accountability
    Act** (**HIPAA**), may dictate specific backup procedures. It’s crucial to be
    aware of and adhere to these regulations when designing a backup strategy.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**合规性要求**：某些法规，如**通用数据保护条例**（**GDPR**）或**健康保险流通与问责法案**（**HIPAA**），可能会规定具体的备份程序。在设计备份策略时，了解并遵守这些法规非常重要。'
- en: '**Storage overhead**: Full backups use more storage but are comprehensive.
    Incremental/differential backups save on storage by capturing only changes but
    make restoration slightly complex.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**存储开销**：完整备份使用更多存储空间，但它是全面的。增量/差异备份通过只捕获变化来节省存储，但恢复过程会稍微复杂一些。'
- en: '**Data retention**: Periodically prune older backups that are beyond regulatory
    or business needs to manage storage or use data compression and deduplication
    to reduce backup size.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据保留**：定期修剪超过法规或业务需求的旧备份，以管理存储，或者使用数据压缩和去重技术来减少备份的大小。'
- en: '**Long-term storage costs**: Regular backups (for example, every 10 minutes)
    with long retention (for example, 13 months) accumulate significant storage. Adjust
    based on secret criticality and change frequency. It is worth periodically analyzing
    storage expenses and adjusting the backup strategy if the costs outweigh the benefits.
    For Secrets with multiple versions, periodically remove older, unnecessary versions.
    Use different storage tiers based on backup age and importance. Shift older backups
    to cost-effective storage. Choose storage solutions offering predictable costs
    to manage budgets effectively.'
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**长期存储成本**：定期备份（例如，每 10 分钟一次）并长期保存（例如，13 个月）会累积大量存储。根据机密的关键性和变更频率进行调整。值得定期分析存储费用，并在成本超出收益时调整备份策略。对于有多个版本的机密，定期删除较旧且不必要的版本。根据备份的年龄和重要性使用不同的存储层级。将较旧的备份转移到成本效益较高的存储中。选择提供可预测成本的存储解决方案，以有效管理预算。'
- en: The approach that we take to back up Secrets is heavily influenced by the way
    we manage Secrets. Whether we store Secrets on etcd or in an external secret store,
    the solutions will differ significantly.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 我们备份机密的方式受到我们管理机密方式的深刻影响。无论是将机密存储在 etcd 中还是在外部机密存储中，解决方案都会有显著不同。
- en: Secrets stored in etcd
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 存储在 etcd 中的机密
- en: 'By default, Secrets on Kubernetes are stored on etcd, but the approach to backups
    will be more Kubernetes-oriented:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Kubernetes 中的机密存储在 etcd 中，但备份方法将更加面向 Kubernetes：
- en: '**Kubernetes cluster backup**: When Secrets are stored in etcd, backing up
    the entire Kubernetes cluster will encompass all Secrets. Tools such as *Velero*
    can back up and restore the entire cluster, including Secrets.'
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kubernetes 集群备份**：当机密存储在 etcd 中时，备份整个 Kubernetes 集群将涵盖所有机密。像 *Velero* 这样的工具可以备份和恢复整个集群，包括机密。'
- en: '**etcd snapshot**: Periodic snapshots of etcd are another option, although
    this requires more technical expertise and caution, given its potential effects
    on the entire Kubernetes cluster.'
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**etcd 快照**：定期的 etcd 快照是另一种选择，尽管这需要更多的技术专长和谨慎，因为它可能对整个 Kubernetes 集群产生影响。'
- en: 'For secret stored in etcd, there are two backup methods: full cluster backups
    and etcd snapshots, each with unique technical aspects and impacts.'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 对于存储在 etcd 中的机密，有两种备份方法：完整集群备份和 etcd 快照，每种方法都有独特的技术特性和影响。
- en: Secrets stored in external secret stores
  id: totrans-85
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 存储在外部机密存储中的机密
- en: Many external Secrets management solutions, such as HashiCorp Vault or AWS Secrets
    Manager, have their own backup capabilities. Understanding these features and
    integrating them into the strategy is important. If the secret store is a cloud
    service, using backup services from the same provider may provide better integration
    and support.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 许多外部机密管理解决方案，如 HashiCorp Vault 或 AWS Secrets Manager，都具有自己的备份功能。了解这些功能并将其集成到策略中非常重要。如果机密存储是云服务，使用相同提供商的备份服务可能会提供更好的集成和支持。
- en: Security guidance for backup
  id: totrans-87
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 备份的安全指导
- en: 'Once we have decided on a backup strategy, it is essential to comply with certain
    guidelines that ensure the security of our backups:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们决定了备份策略，必须遵循一些准则，以确保备份的安全：
- en: '**Isolated environment with access control**: To prevent unauthorized access,
    restrict access to the backup environment. Restricting access can be achieved
    with the following:'
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**隔离环境与访问控制**：为了防止未经授权的访问，限制对备份环境的访问。可以通过以下方式实现访问限制：'
- en: '**IP whitelisting**: Only allow specific IPs to access the backup storage,
    especially if it’s external.'
  id: totrans-90
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**IP 白名单**：仅允许特定的 IP 地址访问备份存储，尤其是当它是外部存储时。'
- en: '**User access control**: Differentiate between general users and admins. Use
    roles and permissions to grant differential access.'
  id: totrans-91
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**用户访问控制**：区分普通用户和管理员。使用角色和权限授予不同的访问权限。'
- en: '**Access through a VPN**: Access to the resources that contain the backups
    should be permitted for individuals who are on the same network.'
  id: totrans-92
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通过 VPN 访问**：应该允许处于同一网络中的人员访问包含备份的资源。'
- en: '**Zero trust model**: Implement a zero trust security model where no user or
    device is trusted by default, whether inside or outside the network.'
  id: totrans-93
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**零信任模型**：实施零信任安全模型，默认情况下不信任任何用户或设备，无论是内部还是外部网络。'
- en: '**At rest encryption with rotatable encryption keys**: Encrypt backups when
    stored. Always use modern encryption standards. Regularly rotate the encryption
    keys and ensure users have a secure key management process.'
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**静态加密与可旋转的加密密钥**：存储时对备份进行加密。始终使用现代加密标准。定期旋转加密密钥，并确保用户拥有安全的密钥管理流程。'
- en: '**In-transit security**: Secure the backups when they’re being transferred.
    Employ protocols such as HTTPS or TLS to encrypt data during transit. Use VPNs
    or dedicated lines for secure connectivity.'
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**传输中的安全性**：在备份传输过程中确保其安全。采用如HTTPS或TLS等协议对数据进行加密传输。使用VPN或专用线路确保连接的安全。'
- en: '**Auditing and alert**: Implement monitoring of access patterns and set up
    alerts for unusual activities. Log all access and modification attempts. Set up
    immediate alerts for suspicious behaviors.'
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**审计和警报**：实施访问模式监控，并为异常活动设置警报。记录所有访问和修改尝试。为可疑行为设置即时警报。'
- en: '**Immediate response to data breaches**: If backups are compromised, do the
    following:'
  id: totrans-97
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**数据泄露的即时响应**：如果备份遭到泄露，执行以下操作：'
- en: Assess the impact
  id: totrans-98
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 评估影响
- en: Rotate and change all keys and credentials to prevent decryption
  id: totrans-99
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 轮换并更改所有密钥和凭证以防止解密
- en: '**Safeguard with immutable storage**: Ensure backup data remains unchanged
    by making it immutable. Use features such as AWS S3’s Object Lock or WORM storage.
    Consider the balance between protection duration and storage costs.'
  id: totrans-100
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**使用不可变存储保障**：确保备份数据保持不变，使其不可修改。使用如AWS S3的Object Lock或WORM存储等功能。考虑保护时长与存储成本之间的平衡。'
- en: Now that we have an understanding of the security guidelines with regard to
    secret backups, we shall proceed with the tools we can use to back up the Secrets
    that reside on a Kubernetes cluster.
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了有关Secrets备份的安全指南，接下来将探讨我们可以使用的工具，以备份存储在Kubernetes集群中的Secrets。
- en: Tools and solutions for backing up Kubernetes Secrets
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用于备份Kubernetes Secrets的工具和解决方案
- en: Several tools and solutions exist to help users back up Secrets in a Kubernetes
    environment. The right one for users depends on the specific setup, requirements,
    and preferences. We will examine the tools that are available and how they can
    be combined with our infrastructure decisions.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 存在多种工具和解决方案，可以帮助用户备份Kubernetes环境中的Secrets。适合用户的工具取决于具体的设置、需求和偏好。我们将探讨可用的工具以及如何将它们与我们的基础设施决策相结合。
- en: Velero
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Velero
- en: '**Velero** is a popular open source tool for managing disaster recovery and
    migrating Kubernetes cluster resources and persistent volumes. Velero allows users
    to back up and restore Kubernetes objects and persistent volumes.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**Velero**是一个流行的开源工具，用于管理灾难恢复和迁移Kubernetes集群资源与持久化卷。Velero允许用户备份和恢复Kubernetes对象及持久化卷。'
- en: 'Sample configuration for Velero backup is as follows:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: Velero备份的示例配置如下：
- en: '[PRE0]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: For more details, please refer to the Velero documentation ([https://velero.io/docs/v1.11/](https://velero.io/docs/v1.11/)).
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 有关更多详细信息，请参阅Velero文档（[https://velero.io/docs/v1.11/](https://velero.io/docs/v1.11/)）。
- en: etcdctl
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: etcdctl
- en: '**etcdctl** is a command-line tool used with etcd, a distributed key-value
    store that provides a reliable way to store data across a cluster of machines.
    Kubernetes uses etcd to store all its data, including Secrets.'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: '**etcdctl**是一个命令行工具，用于与etcd配合使用，etcd是一个分布式键值存储，提供可靠的方式在一组机器之间存储数据。Kubernetes使用etcd来存储所有数据，包括Secrets。'
- en: 'A sample etcdctl command for backup is as follows:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 一个用于备份的etcdctl命令示例如下：
- en: '[PRE1]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Check the etcdctl documentation ([https://github.com/etcd-io/etcd/tree/main/etcdctl#snapshot-subcommand](https://github.com/etcd-io/etcd/tree/main/etcdctl#snapshot-subcommand))
    to learn more.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 查阅etcdctl文档（[https://github.com/etcd-io/etcd/tree/main/etcdctl#snapshot-subcommand](https://github.com/etcd-io/etcd/tree/main/etcdctl#snapshot-subcommand)）以了解更多信息。
- en: HashiCorp Vault
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: HashiCorp Vault
- en: '**HashiCorp Vault** is a product that provides control over access to sensitive
    data and Secrets across distributed applications. It includes a feature to snapshot
    its internal state for backup purposes.'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: '**HashiCorp Vault**是一个提供控制访问敏感数据和Secrets的产品，适用于分布式应用程序。它包括一个功能，用于快照其内部状态以进行备份。'
- en: 'For the open source version of Vault, users can leverage the Vault operator
    raft snapshot feature. Here is a sample command to create a snapshot of Vault’s
    data:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 对于Vault的开源版本，用户可以利用Vault操作员Raft快照功能。以下是创建Vault数据快照的示例命令：
- en: '[PRE2]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: However, this requires additional steps, such as integrating it into a sidecar
    deployment during the Vault deployment. Additionally, a mechanism for periodic
    uploading of data to a chosen storage location must be manually implemented.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，这需要额外的步骤，比如在Vault部署过程中将其集成到sidecar部署中。此外，必须手动实现一个周期性上传数据到指定存储位置的机制。
- en: For Vault Enterprise, the process is simplified as it includes a built-in feature
    for backups. Users can configure the backup destination to be, for example, AWS
    S3 GCS. After providing AWS credentials and setting up the interval ([https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#interval](https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#interval)),
    Vault Enterprise will automatically handle the data uploading process. Please
    refer to the configuration at [https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#storage_type-aws-s3](https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#storage_type-aws-s3)
    for more details.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Vault Enterprise，过程简化了，因为它包含了一个内置的备份功能。用户可以配置备份目标为 AWS S3、GCS 等。例如，在提供 AWS
    凭证并设置间隔之后 ([https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#interval](https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#interval))，Vault
    Enterprise 会自动处理数据上传过程。有关更多详情，请参阅配置 [https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#storage_type-aws-s3](https://developer.hashicorp.com/vault/api-docs/system/storage/raftautosnapshots#storage_type-aws-s3)。
- en: Despite this, monitoring of backup data metrics is still crucial. Alerts should
    be set up to trigger in case a backup fails. For more information, please refer
    to the HashiCorp Vault documentation ([https://developer.hashicorp.com/vault/docs/commands/operator/raft#snapshot](https://developer.hashicorp.com/vault/docs/commands/operator/raft#snapshot)).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 尽管如此，备份数据指标的监控依然至关重要。如果备份失败，应设置警报以触发提醒。有关更多信息，请参见 HashiCorp Vault 文档 ([https://developer.hashicorp.com/vault/docs/commands/operator/raft#snapshot](https://developer.hashicorp.com/vault/docs/commands/operator/raft#snapshot))。
- en: 'Following is a sample figure showing the backup sidecar container, which takes
    snapshots and uploads them to S3:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 以下是一个示例图，显示了备份侧车容器，它会拍摄快照并将其上传到 S3：
- en: '![Figure 6.1 – Hashicorp Vault sidecar for backup](img/B20970_06_1.jpg)'
  id: totrans-122
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.1 – Hashicorp Vault 备份侧车](img/B20970_06_1.jpg)'
- en: Figure 6.1 – Hashicorp Vault sidecar for backup
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.1 – Hashicorp Vault 备份侧车
- en: So, this section described the backup features of HashiCorp Vault; the open
    source version uses manual snapshots and data uploads, while Vault Enterprise
    automates these processes with features such as AWS S3 integration.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，本节描述了 HashiCorp Vault 的备份功能；开源版本使用手动快照和数据上传，而 Vault Enterprise 通过 AWS S3
    集成功能等来自动化这些过程。
- en: AWS Secrets Manager
  id: totrans-125
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: AWS Secrets Manager
- en: '**AWS Secrets Manager** is a Secrets management service that helps users protect
    access to applications, services, and IT resources. On March 3, 2021, AWS launched
    a new feature for AWS Secrets Manager that makes it possible for users to replicate
    Secrets across multiple AWS regions, which can automatically replicate a secret
    and access it from the recovery region to support a disaster recovery plan. For
    more details, see how to replicate Secrets across multiple AWS regions at [https://aws.amazon.com/blogs/security/how-to-replicate-secrets-aws-secrets-manager-multiple-regions/](https://aws.amazon.com/blogs/security/how-to-replicate-secrets-aws-secrets-manager-multiple-regions/).'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '**AWS Secrets Manager** 是一个密钥管理服务，帮助用户保护对应用程序、服务和 IT 资源的访问。在 2021 年 3 月 3 日，AWS
    推出了 AWS Secrets Manager 的一项新功能，使用户能够在多个 AWS 区域之间复制密钥，这可以自动复制密钥，并从恢复区域访问它，以支持灾难恢复计划。有关更多信息，请参见如何在多个
    AWS 区域之间复制密钥，访问 [https://aws.amazon.com/blogs/security/how-to-replicate-secrets-aws-secrets-manager-multiple-regions/](https://aws.amazon.com/blogs/security/how-to-replicate-secrets-aws-secrets-manager-multiple-regions/)。'
- en: Azure Key Vault
  id: totrans-127
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Azure Key Vault
- en: '`Backup-AzKeyVaultSecret` cmdlet backs up a specified secret in the Azure Key
    Vault by downloading it and storing it in a file. If there are multiple versions
    of the secret, all versions are included in the backup.'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '`Backup-AzKeyVaultSecret` cmdlet 通过下载指定密钥并将其存储在文件中来备份 Azure Key Vault 中的密钥。如果该密钥有多个版本，则所有版本都包含在备份中。'
- en: 'HashiCorp Vault, AWS Secrets Manager, and Azure Key Vault are forms of secret
    storage. Overall, they share the same qualities, which can be depicted in the
    following figure:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: HashiCorp Vault、AWS Secrets Manager 和 Azure Key Vault 都是密钥存储的形式。总体而言，它们具有相同的特性，可以通过下图呈现：
- en: '![Figure 6.2 – Backup secret store](img/B20970_06_2.jpg)'
  id: totrans-130
  prefs: []
  type: TYPE_IMG
  zh: '![图 6.2 – 备份密钥存储](img/B20970_06_2.jpg)'
- en: Figure 6.2 – Backup secret store
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 图 6.2 – 备份密钥存储
- en: Each tool and solution has its own strengths and is suitable for different secret
    stores. Choose the one that fits your needs the best and always remember to consider
    security and compliance requirements when setting up these tools.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 每个工具和解决方案都有其独特的优点，适用于不同的密钥存储。请选择最适合您需求的工具，并在配置这些工具时始终考虑安全性和合规性要求。
- en: Next, we will talk about disaster recovery procedures for Kubernetes Secrets.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将讨论 Kubernetes Secrets 的灾难恢复程序。
- en: Disaster recovery for Kubernetes Secrets
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Kubernetes Secrets 的灾难恢复
- en: A major consideration within Kubernetes Secrets management is the concept of
    *disaster recovery*. This involves preparing for and recovering from potential
    failures that may drastically affect a Kubernetes environment, particularly the
    Secrets it houses. In this chapter, we discuss **disaster recovery plans** (**DRPs**),
    recovery procedures for Secrets, the associated tools, and solutions, and we examine
    a real-life disaster recovery scenario.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: Kubernetes Secrets 管理中的一个主要考虑因素是 *灾难恢复*。这包括为可能会极大影响 Kubernetes 环境，特别是其中存储的 Secrets，做准备并恢复。在本章中，我们讨论
    **灾难恢复计划**（**DRPs**）、Secrets 恢复程序、相关工具和解决方案，并研究一个真实的灾难恢复场景。
- en: DRP in a Kubernetes environment
  id: totrans-136
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Kubernetes 环境中的灾难恢复计划（DRP）
- en: A DRP is a predefined and documented set of directives designed to guide organizations
    in recovering from potentially disastrous events. In the context of management,
    a well-designed DRP is instrumental in mitigating the effects of Secrets loss
    or exposure.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 灾难恢复计划（DRP）是一个预定义和文档化的指令集，旨在指导组织从潜在灾难事件中恢复。在管理的背景下，精心设计的 DRP 对于减轻 Secrets 丢失或泄露的影响至关重要。
- en: 'A sound DRP for a Kubernetes environment should incorporate the following elements:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 一个完善的 Kubernetes 环境灾难恢复计划（DRP）应包含以下元素：
- en: '**Clear roles and responsibilities**: This involves the designation of a recovery
    team and an explicit detailing of what each member’s roles and tasks are.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**明确的角色和职责**：这涉及到指定恢复团队，并明确每个成员的角色和任务。'
- en: '**Defined communication strategy**: It’s crucial to have a robust communication
    plan, covering both internal (recovery team) and external (stakeholders) communications.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**定义的通信策略**：必须拥有一套健全的通信计划，涵盖内部（恢复团队）和外部（利益相关者）的通信。'
- en: '**Prepared incident response**: This includes a set of protocols for swift
    and effective response to minimize downtime and limit the extent of damage.'
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**准备的事件响应**：这包括一套协议，用于迅速有效地响应，以最小化停机时间并限制损害的程度。'
- en: '**Recovery procedures**: These are scenario-specific steps designed to recover
    Secrets from various sources (e.g., etcd, external secret stores). Bear in mind
    that these procedures need to be tested frequently to confirm their effectiveness
    during actual disasters.'
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**恢复程序**：这些是针对特定场景的步骤，旨在从各种来源（例如，etcd、外部秘密存储）恢复 Secrets。请记住，这些程序需要经常测试，以确认它们在实际灾难中的有效性。'
- en: Additionally, due to the sensitive nature of these Secrets, their recovery should
    be limited to authorized personnel only, and their actions during the recovery
    should be auditable to maintain security and compliance standards.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，由于这些 Secrets 的敏感性，它们的恢复应仅限于授权人员，并且在恢复过程中的操作应可审计，以保持安全性和合规性标准。
- en: Regular testing and updating
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定期测试和更新
- en: 'Managing Secrets in a Kubernetes environment, whether stored internally within
    etcd or externally, is a sensitive and crucial operation. Ensuring that backup
    and disaster recovery systems are functional, secure, and up-to-date is paramount.
    Regular testing and updating of these systems help to do the following:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Kubernetes 环境中管理 Secrets，无论是存储在 etcd 内部还是外部，都是一项敏感且至关重要的操作。确保备份和灾难恢复系统的功能、安全性和更新性至关重要。定期测试和更新这些系统有助于实现以下目标：
- en: '**Ensure system robustness**: Frequently test the backup and DRP systems through
    gamedays, which simulate real-world failure scenarios. This approach helps identify
    potential flaws or inefficiencies in Secrets recovery processes. The testing should
    encompass a range of scenarios, such as a total cluster failure for internally
    stored Secrets, catastrophic events at external storage locations, or the failure
    of the backup system itself. Gamedays provide a practical, hands-on way to assess
    and improve system resilience and response strategies.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**确保系统的稳健性**：通过模拟真实世界故障场景的游戏日（gamedays），经常测试备份和灾难恢复计划（DRP）系统。这种方法有助于识别 Secrets
    恢复过程中潜在的缺陷或低效之处。测试应涵盖一系列场景，例如存储在 etcd 中的 Secrets 整个集群故障、外部存储位置的灾难性事件，或者备份系统本身的故障。游戏日提供了一种实际操作的方法，用于评估和改善系统的弹性和响应策略。'
- en: '**Maintain up-to-date backups**: Secrets often change, so backup systems should
    be designed to update whenever there is a change to the Secrets. Regular testing
    can help ensure that the most recent version of Secrets is always backed up and
    can be restored correctly.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保持最新的备份**：Secrets 经常发生变化，因此备份系统应设计为在 Secrets 发生变化时自动更新。定期测试有助于确保最新版本的 Secrets
    始终被备份并能够正确恢复。'
- en: '**Security assurance**: Given the sensitive nature of Secrets, security is
    paramount. Regular penetration tests and audits should be conducted on both the
    Secrets storage and the backup system to uncover any potential vulnerabilities.
    Alerts should be set up to notify relevant personnel in case of security issues
    or system failures.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**安全保障**：鉴于 Secrets 的敏感性质，安全性至关重要。应定期对 Secrets 存储和备份系统进行渗透测试和审计，以发现潜在的漏洞。同时，应设置警报，通知相关人员安全问题或系统故障。'
- en: '**DRP relevance**: Kubernetes environments are dynamic, and changes can affect
    the effectiveness of existing DRPs. Regular reviews and updates of DRPs are necessary
    to keep them relevant to the evolving environment. As much as possible, automate
    the process of updating backups whenever there is a change in the Secrets.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DRP 相关性**：Kubernetes 环境是动态的，变化可能影响现有 DRP 的有效性。定期审查和更新 DRP 是确保其与不断发展的环境保持相关性的必要措施。尽可能地，自动化更新备份的过程，以便在
    Secrets 发生变化时及时更新。'
- en: '**Cross-team involvement**: Regularly involve relevant teams (DevOps, security,
    IT, etc.) in the testing and updating process to ensure a comprehensive review
    of systems.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**跨团队参与**：定期让相关团队（如 DevOps、安全、IT 等）参与测试和更新过程，以确保全面审查系统。'
- en: Tools and solutions for disaster recovery in Kubernetes
  id: totrans-151
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Kubernetes 中的灾难恢复工具和解决方案
- en: 'There exist numerous tools for facilitating disaster recovery in Kubernetes.
    Notable mentions include Velero, Kubestr, and Kasten K10:'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: 存在许多工具可以帮助 Kubernetes 中的灾难恢复。值得注意的包括 Velero、Kubestr 和 Kasten K10：
- en: '**Velero**: Supports both backup and restoration operations and can handle
    etcd data, making it suitable for backing up Kubernetes Secrets'
  id: totrans-153
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Velero**：支持备份和恢复操作，并能够处理 etcd 数据，适用于备份 Kubernetes Secrets。'
- en: '**Kubestr**: Can validate the effectiveness of the backup and recovery strategy'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kubestr**：可以验证备份和恢复策略的有效性。'
- en: '**Kasten K10**: Offers a comprehensive platform for managing Kubernetes application
    data, including backup and recovery'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Kasten K10**：提供一个全面的平台来管理 Kubernetes 应用数据，包括备份和恢复。'
- en: Onward, we shall see how all the pieces come together by examining a disaster
    recovery scenario.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将通过检查灾难恢复场景来了解所有部分如何整合在一起。
- en: Effective Secrets recovery scenario during a crisis
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 有效的 Secrets 恢复场景：危机中的恢复
- en: 'Let’s look at a simplified example of an organization, *OrgX*, that successfully
    managed a disaster recovery scenario, specifically dealing with Kubernetes Secrets:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一个简化的示例，描述一个成功管理灾难恢复场景的组织，*OrgX*，特别是处理 Kubernetes Secrets 的情况：
- en: '**DRP**: OrgX had a DRP in place and periodically performed simulations, or
    “gamedays,” to validate its efficacy. This practice prepared the team for actual
    disaster scenarios.'
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**DRP**：OrgX 已经制定了 DRP，并定期进行模拟或“演练日”，以验证其有效性。这一做法为团队应对实际灾难场景做好了准备。'
- en: '**Team collaboration**: During the disaster, a cross-functional team activated
    the DRP. The collective efforts across different departments were key to the effective
    execution of the recovery plan.'
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**团队协作**：在灾难发生期间，一个跨职能团队激活了 DRP。不同部门的集体努力是有效执行恢复计划的关键。'
- en: '**Protecting Secrets**: As part of the recovery, the team retrieved the encrypted
    Secrets backups from an AWS S3 bucket. The decryption and restoration of Secrets
    were handled by authorized personnel using secure procedures. The Secrets were
    restored to a secret store, ensuring that the Secrets’ integrity was maintained
    throughout the process.'
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**保护 Secrets**：作为恢复的一部分，团队从 AWS S3 存储桶中检索了加密的 Secrets 备份。由授权人员使用安全流程进行解密和恢复。Secrets
    被恢复到密钥存储中，确保在整个过程中 Secrets 的完整性得到保持。'
- en: '**Service continuity**: Quick action and adherence to the DRP enabled OrgX
    to restore its Kubernetes Secrets swiftly. This prompt response minimized service
    disruptions and ensured applications used the latest secret values.'
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**服务连续性**：迅速采取行动并遵循 DRP，使 OrgX 能够迅速恢复其 Kubernetes Secrets。这一迅速响应最大限度地减少了服务中断，确保应用程序使用的是最新的密钥值。'
- en: The *OrgX* case highlights the importance of a DRP, team collaboration, security
    measures, and regular testing in recovering Kubernetes Secrets during a disaster.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: '*OrgX* 案例突出了在灾难恢复过程中，DRP、团队协作、安全措施和定期测试在恢复 Kubernetes Secrets 中的重要性。'
- en: Summary
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, we embarked on a deep exploration of disaster recovery and
    backup for Kubernetes Secrets. You have learned about various backup strategies,
    such as geo-replication, point-in-time snapshots, and writing to multiple places
    during transit, and how they can be applied in different scenarios. We discussed
    the importance of access control, encryption, and data retention in creating a
    robust backup strategy. We highlighted key security measures for backing up Kubernetes
    Secrets and how to respond swiftly and effectively to data breaches.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们深入探讨了 Kubernetes Secrets 的灾难恢复和备份。你了解了各种备份策略，如地理复制、时间点快照以及在传输过程中写入多个位置，并了解它们如何应用于不同的场景。我们讨论了在创建强健备份策略时，访问控制、加密和数据保留的重要性。我们强调了备份
    Kubernetes Secrets 的关键安全措施，以及如何迅速有效地应对数据泄露事件。
- en: Through our practical examples and detailed discussions, you’re now equipped
    with the knowledge to plan and execute a comprehensive DRP in a Kubernetes environment.
    You have also understood the importance of regular testing and updating of your
    DRP and backup systems.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 通过我们的实践示例和详细讨论，你现在已经掌握了在 Kubernetes 环境中规划和执行全面灾难恢复计划（DRP）的知识。你还理解了定期测试和更新 DRP
    以及备份系统的重要性。
- en: As we venture into the next chapter, we’ll address the challenges and security
    risks associated with managing Secrets in a Kubernetes environment. This will
    equip you with an understanding of potential pitfalls and arm you with strategies
    to overcome these challenges, further enhancing the security and reliability of
    your applications.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 随着我们进入下一章，我们将讨论在 Kubernetes 环境中管理 Secrets 时所面临的挑战和安全风险。这将帮助你了解潜在的陷阱，并为你提供克服这些挑战的策略，进一步增强应用程序的安全性和可靠性。
