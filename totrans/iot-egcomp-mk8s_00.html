<html><head></head><body>
<div id="sbo-rt-content"><div id="_idContainer004">
<h1 id="_idParaDest-5"><a id="_idTextAnchor004"/>Preface</h1>
<p>The idea for this book was born when one of my customers wanted to implement a minimal container orchestration engine for their apps on their resource-constrained edge device. Deploying the entirety of Kubernetes was not the solution, but then I encountered the realm of minimal Kubernetes distributions, and after much experimentation with several providers, I chose MicroK8s to successfully build various edge computing use cases and scenarios for them.</p>
<p><em class="italic">Canonical’s MicroK8s</em> Kubernetes distribution is small, lightweight, and fully conformant. It’s a minimalistic distribution with a focus on performance and simplicity. MicroK8s can be easily deployed in IoT and edge devices due to its small footprint. By the end of this book, you will know how to effectively implement the following use cases and scenarios for edge computing using MicroK8s:</p>
<ul>
<li>Getting your Kubernetes cluster up and running</li>
<li>Enabling core Kubernetes add-ons such as <strong class="bold">Domain Name System</strong> (<strong class="bold">DNS</strong>) and dashboards</li>
<li>Creating, scaling, and performing rolling updates on multi-node Kubernetes clusters</li>
<li>Working with various container networking options, such as Calico, Flannel, and Cilium</li>
<li>Setting up MetalLB and Ingress options for load balancing</li>
<li>Using OpenEBS storage replication for stateful application</li>
<li>Configuring Kubeflow and running AI/ML use cases</li>
<li>Configuring service mesh integration with Istio and Linkerd</li>
<li>Running serverless applications using Knative and OpenFaaS</li>
<li>Configuring logging and monitoring options (Prometheus, Grafana, Elastic, Fluentd, and Kibana)</li>
<li>Configuring a multi-node, highly available Kubernetes cluster</li>
<li>Configuring Kata for secured containers</li>
<li>Configuring strict confinement for running in isolation</li>
</ul>
<p>According to <em class="italic">Canonical’s 2022 Kubernetes and cloud native operations report</em> (<a href="https://juju.is/cloud-native-kubernetes-usage-report-2022">https://juju.is/cloud-native-kubernetes-usage-report-2022</a>), 48 percent of respondents indicated the biggest barriers to migrating to or using Kubernetes and containers are a lack of in-house capabilities and limited staff. </p>
<p>As indicated in the report, there is a skills deficit as well as a knowledge gap, which I believe this book will solve by covering crucial areas that are required to bring you up to speed in no time.</p>
<h1 id="_idParaDest-6"><a id="_idTextAnchor005"/>Who this book is for</h1>
<p>The book is intended for DevOps and cloud engineers, Kubernetes <strong class="bold">Site Reliability Engineers</strong><em class="italic"> </em>(<strong class="bold">SREs</strong>), and application developers who desire to implement efficient techniques for deploying their software solutions. It will be also useful for technical architects and technology leaders who are looking to adopt cloud-native technologies. A basic understanding of container-based application design and development, virtual machines, networking, databases, and programming will be helpful to get the most out of this book.</p>
<h1 id="_idParaDest-7"><a id="_idTextAnchor006"/>What this book covers</h1>
<p><a href="B18115_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic">Getting Started with Kubernetes</em>, introduces Kubernetes and the various components of the Kubernetes system as well as the abstractions.</p>
<p><a href="B18115_02.xhtml#_idTextAnchor030"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing MicroK8s</em>, introduces MicroK8s and shows how to install it, how to verify its installation status, and how to monitor and manage a Kubernetes cluster. We will also learn how to use some of the add-ons and deploy a sample application.</p>
<p><a href="B18115_03.xhtml#_idTextAnchor051"><em class="italic">Chapter 3</em></a>, <em class="italic">Essentials of IoT and Edge Computing</em>, delves into how Kubernetes, edge computing, and the cloud can collaborate to drive intelligent business decisions. This chapter gives an overview of the <strong class="bold">Internet of Things</strong> (<strong class="bold">IoT</strong>), the Edge, and how they are related, as well as the advantages of edge computing.</p>
<p><a href="B18115_04.xhtml#_idTextAnchor060"><em class="italic">Chapter 4</em></a>, <em class="italic">Handling the Kubernetes Platform for IoT and Edge Computing</em>, examines how Kubernetes for edge computing offers a compelling value proposition and different architectural approaches that demonstrate how Kubernetes can be used for edge workloads, as well as support for architecture that meets an enterprise application’s requirements – low latency, resource-constrained, data privacy, and bandwidth scalability.</p>
<p><a href="B18115_05.xhtml#_idTextAnchor070"><em class="italic">Chapter 5</em></a>, <em class="italic">Creating and Implementing on Updates Multi-Node Raspberry Pi Kubernetes Clusters</em>, explores how to set up a MicroK8s Raspberry Pi multi-node cluster, deploy a sample application, and execute rolling updates on the deployed application. We will also understand ways to scale the deployed application. We will also touch upon some of the recommended practices for building a scalable, secure, and highly optimized Kubernetes cluster model.</p>
<p><a href="B18115_06.xhtml#_idTextAnchor085"><em class="italic">Chapter 6</em></a>, <em class="italic">Configuring Connectivity for Containers</em>, looks at how networking is handled in a Kubernetes cluster. Furthermore, we will understand how to use Calico, Cilium, and Flannel CNI plugins to network the cluster. We will go through the most important factors to consider when choosing a CNI service.</p>
<p><a href="B18115_07.xhtml#_idTextAnchor107"><em class="italic">Chapter 7</em></a>, <em class="italic">Setting Up MetalLB and Ingress for Load Balancing</em>, delves into techniques (MetalLB and Ingress) for exposing services outside a cluster.</p>
<p><a href="B18115_08.xhtml#_idTextAnchor121"><em class="italic">Chapter 8</em></a>, <em class="italic">Monitoring the Health of Infrastructure and Applications</em>, examines various choices for monitoring, logging, and alerting your cluster, and provides detailed steps on how to configure them. We will also go through the essential metrics that should be watched in order to successfully manage your infrastructure and apps.</p>
<p><a href="B18115_09.xhtml#_idTextAnchor136"><em class="italic">Chapter 9</em></a>, <em class="italic">Using Kubeflow to Run AI/MLOps Workloads</em>, covers how to develop and deploy a sample ML model using the Kubeflow ML platform. We will also go through some of the best practices for running AI/ML workloads on Kubernetes.</p>
<p><a href="B18115_10.xhtml#_idTextAnchor157"><em class="italic">Chapter 10</em></a>, <em class="italic">Going Serverless with Knative and OpenFaaS Frameworks</em>, examines two of the most popular serverless frameworks included with MicroK8s, Knative and OpenFaaS, both of which are Kubernetes-based platforms for developing, deploying, and managing modern serverless workloads. We will also go through the best practices for developing and deploying serverless applications. </p>
<p><a href="B18115_11.xhtml#_idTextAnchor180"><em class="italic">Chapter 11</em></a>, <em class="italic">Managing Storage Replication with OpenEBS</em>, looks at how to use OpenEBS to implement storage replication that synchronizes data across several nodes. We will go through the steps involved in configuring and implementing a PostgreSQL stateful application utilizing the OpenEBS Jiva storage engine. We will also look at the Kubernetes storage best practices as well as recommendations for data engines.</p>
<p><a href="B18115_12.xhtml#_idTextAnchor196"><em class="italic">Chapter 12</em></a>, <em class="italic">Implementing Service Mesh for Cross-Cutting Concerns</em>, walks you through the steps of deploying Istio and Linkerd service meshes. You will also learn how to deploy and run a sample application, as well as how to configure and access dashboards.</p>
<p><a href="B18115_13.xhtml#_idTextAnchor212"><em class="italic">Chapter 13</em></a>, <em class="italic">Resting Component Failure Using HA Clusters</em>, walks you through the steps involved in setting up a highly available cluster that can withstand a component failure and continue to serve workloads without interruption. We will also discuss some of the best practices for implementing Kubernetes applications on your production-ready cluster.</p>
<p><a href="B18115_14.xhtml#_idTextAnchor223"><em class="italic">Chapter 14</em></a>, <em class="italic">Hardware Virtualization for Securing Containers</em>, looks at how to use Kata Containers, a secure container runtime, to provide stronger workload isolation, leveraging hardware virtualization technology. We also discuss the best practices for establishing container security on your production-grade cluster.</p>
<p><a href="B18115_15.xhtml#_idTextAnchor243"><em class="italic">Chapter 15</em></a>, <em class="italic">Implementing Strict Confinement for Isolated Containers</em>, shows you how to install the MicroK8s snap with a strict confinement option, monitor the installation’s progress, and manage a Kubernetes cluster running on Ubuntu Core. We will also deploy a sample application and examine whether the application is able to run on a strict confinement-enabled Kubernetes cluster.</p>
<p><a href="B18115_16.xhtml#_idTextAnchor257"><em class="italic">Chapter 16</em></a>, <em class="italic">Diving into the Future</em>, looks at how Kubernetes and MicroK8s are uniquely positioned for accelerating IoT and edge deployments, and also the key trends that are shaping our new future.</p>
<p><em class="italic">Frequently Asked Questions About MicroK8s</em></p>
<h1 id="_idParaDest-8"><a id="_idTextAnchor007"/>To get the most out of this book</h1>
<p>A basic understanding of container-based application design and development, virtual machines, networking, databases, and programming will be helpful to get the most out of this book<em class="italic">.</em> The following are the prerequisites for building a MicroK8s Kubernetes cluster:</p>
<table class="No-Table-Style _idGenTablePara-1" id="table001">
<colgroup>
<col/>
<col/>
</colgroup>
<tbody>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<p><strong class="bold">Software/hardware covered in the book</strong></p>
</td>
<td class="No-Table-Style">
<p><strong class="bold">Operating system requirements</strong></p>
</td>
</tr>
<tr class="No-Table-Style">
<td class="No-Table-Style">
<ul>
<li>A microSD card (4 GB minimum, with 8 GB recommended)</li>
<li>A computer with a microSD card drive</li>
<li>A Raspberry Pi 2, 3, or 4 (3 or more)</li>
<li>A micro-USB power cable (USB-C for the Pi 4)</li>
<li>A Wi-Fi network or an Ethernet cable with an internet connection</li>
<li>(Optional) A monitor with an HDMI interface</li>
<li>(Optional) An HDMI cable for the Pi 2 and 3 and a micro-HDMI cable for the Pi 4</li>
<li>(Optional) A USB keyboard</li>
<li>An SSH client such as PuTTY</li>
<li>A hypervisor such as Oracle VM VirtualBox 6.1 to create virtual machines</li>
</ul>
</td>
<td class="No-Table-Style">
<p>Windows or Linux to run Ubuntu virtual machines</p>
</td>
</tr>
</tbody>
</table>
<p><strong class="bold">If you are using the digital version of this book, we advise you to type the code yourself or access the code from the book. Doing so will help you avoid any potential errors related to the copying and pasting of code.</strong></p>
<h1 id="_idParaDest-9"><a id="_idTextAnchor008"/>Download the example code files</h1>
<p>You can download the example code files for this book from GitHub at <a href="https://github.com/PacktPublishing/IoT-Edge-Computing-with-MicroK8s">https://github.com/PacktPublishing/IoT-Edge-Computing-with-MicroK8s</a>. If there’s an update to the code, it will be updated in the GitHub repository.</p>
<p>We also have other code bundles from our rich catalog of books and videos available at <a href="https://github.com/PacktPublishing/">https://github.com/PacktPublishing/</a>. Check them out!</p>
<h1 id="_idParaDest-10"><a id="_idTextAnchor009"/>Download the color images</h1>
<p>We also provide a PDF file that has color images of the screenshots and diagrams used in this book. You can download it here: <a href="https://packt.link/HprZX">https://packt.link/HprZX</a>.</p>
<h1 id="_idParaDest-11"><a id="_idTextAnchor010"/>Conventions used</h1>
<p>There are a number of text conventions used throughout this book.</p>
<p><strong class="source-inline">Code in text</strong>: Indicates code words in text, database table names, folder names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter handles. Here is an example: “To check a list of available and installed add-ons, use the <strong class="source-inline">status</strong> command.”</p>
<p>A block of code is set as follows:</p>
<pre class="source-code">apiVersion: v1
kind: Service
metadata:
  name: metallb-load-balancer
spec:
  selector:
    app: whoami
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: LoadBalancer</pre>
<p>Any command-line input or output is written as follows:</p>
<p class="source-code">kubectl apply -f loadbalancer.yaml</p>
<p><strong class="bold">Bold</strong>: Indicates a new term, an important word, or words that you see onscreen. For instance, words in menus or dialog boxes appear in <strong class="bold">bold</strong>. Here is an example: “Navigate to <strong class="bold">Monitoring</strong> under <strong class="bold">Namespaces</strong> on the Kubernetes dashboard, and then click <strong class="bold">Services</strong>.”</p>
<p class="callout-heading">Tips or Important Notes</p>
<p class="callout">Appear like this.</p>
<h1 id="_idParaDest-12"><a id="_idTextAnchor011"/>Get in touch</h1>
<p>Feedback from our readers is always welcome.</p>
<p><strong class="bold">General feedback</strong>: If you have questions about any aspect of this book, email us at <a href="mailto:customercare@packtpub.com">customercare@packtpub.com</a> and mention the book title in the subject of your message.</p>
<p><strong class="bold">Errata</strong>: Although we have taken every care to ensure the accuracy of our content, mistakes do happen. If you have found a mistake in this book, we would be grateful if you would report this to us. Please visit <a href="http://www.packtpub.com/support/errata">www.packtpub.com/support/errata</a> and fill in the form.</p>
<p><strong class="bold">Piracy</strong>: If you come across any illegal copies of our works in any form on the internet, we would be grateful if you would provide us with the location address or website name. Please contact us at <a href="mailto:copyright@packt.com">copyright@packt.com</a> with a link to the material.</p>
<p><strong class="bold">If you are interested in becoming an author</strong>: If there is a topic that you have expertise in and you are interested in either writing or contributing to a book, please visit <a href="http://authors.packtpub.com">authors.packtpub.com</a>.</p>
<h1 id="_idParaDest-13"><a id="_idTextAnchor012"/>Share Your Thoughts</h1>
<p>Once you’ve read <em class="italic">IoT Edge Computing with MicroK8s</em>, we’d love to hear your thoughts! Please <a href="https://packt.link/r/1803230630">click here to go straight to the Amazon review page</a> for this book and share your feedback.</p>
<p>Your review is important to us and the tech community and will help us make sure we’re delivering excellent quality content.</p>
</div>
</div>


<div id="sbo-rt-content"><div class="Content" id="_idContainer005">
<h1 id="_idParaDest-14"><a id="_idTextAnchor013"/>Part 1: Foundations of Kubernetes and MicroK8s</h1>
<p>In this part, you will be introduced to MicroK8s and its ecosystem. You will also learn how to install a MicroK8s Kubernetes cluster and get it up and running.</p>
<p>This part of the book comprises the following chapters:</p>
<ul>
<li><a href="B18115_01.xhtml#_idTextAnchor014"><em class="italic">Chapter 1</em></a>, <em class="italic">Getting Started with Kubernetes</em></li>
<li><a href="B18115_02.xhtml#_idTextAnchor030"><em class="italic">Chapter 2</em></a>, <em class="italic">Introducing MicroK8s</em></li>
</ul>
</div>
</div>
</body></html>